var t,e,n;!function(t){t.Sequence="Sequence",t.Group="Group",t.Wait="Wait",t.Custom="Custom",t.Move="Move",t.Scale="Scale"}(t||(t={}));class i{}i.none=(t,e,n,i)=>n+e,i.linear=(t,e,n,i)=>n*t/i+e,i.quadraticIn=(t,e,n,i)=>n*(t/=i)*t+e,i.quadraticOut=(t,e,n,i)=>-n*(t/=i)*(t-2)+e,i.quadraticInOut=(t,e,n,i)=>(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e,i.cubicIn=(t,e,n,i)=>n*(t/=i)*t*t+e,i.cubicOut=(t,e,n,i)=>(t/=i,n*(--t*t*t+1)+e),i.cubicInOut=(t,e,n,i)=>(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e,i.quarticIn=(t,e,n,i)=>n*(t/=i)*t*t*t+e,i.quarticOut=(t,e,n,i)=>(t/=i,-n*(--t*t*t*t-1)+e),i.quarticInOut=(t,e,n,i)=>(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e,i.quinticIn=(t,e,n,i)=>n*(t/=i)*t*t*t*t+e,i.quinticOut=(t,e,n,i)=>(t/=i,n*(--t*t*t*t*t+1)+e),i.quinticInOut=(t,e,n,i)=>(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e,i.sinusoidalIn=(t,e,n,i)=>-n*Math.cos(t/i*(Math.PI/2))+n+e,i.sinusoidalOut=(t,e,n,i)=>n*Math.sin(t/i*(Math.PI/2))+e,i.sinusoidalInOut=(t,e,n,i)=>-n/2*(Math.cos(Math.PI*t/i)-1)+e,i.exponentialIn=(t,e,n,i)=>n*Math.pow(2,10*(t/i-1))+e,i.exponentialOut=(t,e,n,i)=>n*(1-Math.pow(2,-10*t/i))+e,i.exponentialInOut=(t,e,n,i)=>(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:(t--,n/2*(2-Math.pow(2,-10*t))+e),i.circularIn=(t,e,n,i)=>(t/=i,-n*(Math.sqrt(1-t*t)-1)+e),i.circularOut=(t,e,n,i)=>(t/=i,t--,n*Math.sqrt(1-t*t)+e),i.circularInOut=(t,e,n,i)=>(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:(t-=2,n/2*(Math.sqrt(1-t*t)+1)+e);class r{constructor(t=!1){this.startOffset=-1,this.endOffset=-1,this.started=!1,this.running=!1,this.completed=!1,this.runStartTime=-1,this.duration=0,this.isParent=!1,this.isChild=!1,this.runDuringTransition=t}static move(t){var e,n;return new c(t.point,t.duration,null!==(e=t.easing)&&void 0!==e?e:i.linear,null!==(n=t.runDuringTransition)&&void 0!==n&&n)}static wait(t){var e;return new l(t.duration,null!==(e=t.runDuringTransition)&&void 0!==e&&e)}static custom(t){var e;return new s(t.callback,null!==(e=t.runDuringTransition)&&void 0!==e&&e)}static scale(t){return new h(t.scale,t.duration,t.runDuringTransition)}static sequence(t){const e=new o(t);return e.children=t,e}static group(t){const e=new a(t);return e.children=t,e}initialize(e,n){this.assignParents(this,this,n);const i=this.flattenActions(this);return i.forEach((t=>t.duration=this.calculateDuration(t))),this.calculateStartEndOffsets(this),i.filter((e=>e.type!==t.Group&&e.type!==t.Sequence)).map((t=>r.cloneAction(t,n)))}static cloneAction(e,n){let i;switch(e.type){case t.Sequence:{const t=e.children.map((t=>r.cloneAction(t,n)));i=r.sequence(t);break}case t.Group:{const t=e.children.map((t=>r.cloneAction(t,n)));i=r.sequence(t);break}case t.Move:{const t=e;i=r.move({point:t.point,duration:t.duration,easing:t.easing,runDuringTransition:t.runDuringTransition});break}case t.Custom:{const t=e;i=r.custom({callback:t.callback,runDuringTransition:t.runDuringTransition});break}case t.Scale:{const t=e;i=r.scale({scale:t.scale,duration:t.duration,runDuringTransition:t.runDuringTransition});break}case t.Wait:{const t=e;i=r.wait({duration:t.duration,runDuringTransition:t.runDuringTransition});break}default:throw new Error("unknown action")}return void 0!==n&&(i.key=n),i.startOffset=e.startOffset,i.endOffset=e.endOffset,i}static evaluateAction(e,n,i,r){if(i<e.runStartTime+e.startOffset)return;if(i>=e.runStartTime+e.startOffset&&i<=e.runStartTime+e.startOffset+e.duration?e.running=!0:e.running=!1,!1===e.running&&!0===e.completed)return;const o=i-(e.runStartTime+e.startOffset);if(e.type===t.Custom){const t=e;t.callback(),t.running=!1,t.completed=!0}if(e.type===t.Wait){const t=e;i>e.runStartTime+e.startOffset+e.duration&&(t.running=!1,t.completed=!0)}if(e.type===t.Move){const t=e;t.started||(t.dx=t.point.x-n.position.x,t.dy=t.point.y-n.position.y,t.startPoint.x=n.position.x,t.startPoint.y=n.position.y,t.started=!0),o<t.duration?(n.position.x=t.easing(o,t.startPoint.x,t.dx,t.duration),n.position.y=t.easing(o,t.startPoint.y,t.dy,t.duration)):(n.position.x=t.point.x,n.position.y=t.point.y,t.running=!1,t.completed=!0)}if(e.type===t.Scale){const t=e;t.started||(t.delta=t.scale-n.scale,t.started=!0),o<t.duration?n.scale=n.scale+t.delta*(r/t.duration):(n.scale=t.scale,t.running=!1,t.completed=!0)}}calculateDuration(e){return e.type===t.Group?e.children.map((t=>this.calculateDuration(t))).reduce(((t,e)=>Math.max(t,e)),0):e.type===t.Sequence?e.children.map((t=>this.calculateDuration(t))).reduce(((t,e)=>t+e),0):e.duration}calculateStartEndOffsets(e){var n,i,r;let o;if(o=void 0===e.parent?0:e.parent.startOffset,(null===(n=e.parent)||void 0===n?void 0:n.type)===t.Group)e.startOffset=o,e.endOffset=e.startOffset+e.duration;else if((null===(i=e.parent)||void 0===i?void 0:i.type)===t.Sequence){const t=e.parent;let n=0;for(const i of t.children){if(i===e)break;n+=i.duration}e.startOffset=o+n,e.endOffset=e.startOffset+e.duration}else e.startOffset=0,e.endOffset=e.startOffset+e.duration;e.isParent&&(null===(r=e.children)||void 0===r||r.forEach((t=>this.calculateStartEndOffsets(t))))}flattenActions(t,e){if(e||(e=new Array).push(t),t.isParent){const n=t,i=n.children;e.push(...i),n.children.filter((t=>t.isParent)).forEach((t=>this.flattenActions(t,e)))}return e}assignParents(t,e,n){if(void 0!==n&&(t.key=n),t.isParent){const i=t;i.children.forEach((e=>{e.parent=t,e.isChild=!0})),i.children.filter((t=>t.isParent)).forEach((t=>this.assignParents(t,e,n)))}}}class o extends r{constructor(e){super(),this.type=t.Sequence,this.children=e,this.isParent=!0}}class a extends r{constructor(e){super(),this.type=t.Group,this.children=new Array,this.children=e,this.isParent=!0}}class s extends r{constructor(e,n=!1){super(n),this.type=t.Custom,this.callback=e,this.isParent=!1,this.duration=0}}class l extends r{constructor(e,n){super(n),this.type=t.Wait,this.duration=e,this.isParent=!1}}class c extends r{constructor(e,n,i,r){super(r),this.type=t.Move,this.dx=0,this.dy=0,this.duration=n,this.point=e,this.isParent=!1,this.startPoint={x:NaN,y:NaN},this.easing=i}}class h extends r{constructor(e,n,i=!1){super(i),this.type=t.Scale,this.delta=0,this.duration=n,this.scale=e,this.isParent=!1}}function u(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}!function(t){t.Game="Game",t.Survey="Survey"}(e||(e={}));class d{static Dispose(t){t.filter((t=>!(null==t?void 0:t.isDeleted))).forEach((t=>null==t?void 0:t.delete()))}}!function(t){t.SessionInitialize="SessionInitialize",t.SessionStart="SessionStart",t.SessionEnd="SessionEnd",t.ActivityStart="ActivityStart",t.ActivityEnd="ActivityEnd",t.ActivityCancel="ActivityCancel",t.ActivityData="ActivityData",t.TapDown="TapDown",t.TapUp="TapUp",t.TapUpAny="TapUpAny",t.TapLeave="TapLeave",t.PointerDown="PointerDown",t.PointerUp="PointerUp",t.PointerMove="PointerMove",t.CompositeCustom="CompositeCustom"}(n||(n={}));window.globalThis||(console.log("shimming globalThis"),window.globalThis=window),globalThis.Globals=new class{constructor(){this.now=NaN,this.deltaTime=NaN,this.canvasScale=NaN,this.rootScale=1,this.canvasCssWidth=NaN,this.canvasCssHeight=NaN}};class f{constructor(t,e,n,i){this.name=t,this.image=e,this.width=n,this.height=i}}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function m(t){var e=t.default;if("function"==typeof e){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,i.get?i:{enumerable:!0,get:function(){return t[e]}})})),n}var g,y,v,b,w,S={exports:{}},_=m(Object.freeze({__proto__:null,path_empty_shim:function(){}})),C=m(Object.freeze({__proto__:null,fs_empty_shim:function(){}}));!function(t,e){var n,i=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(t){var e,i,r,o;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){i=t,r=e})),(o=e).Sd=o.Sd||[],o.Sd.push((function(){o.MakeSWCanvasSurface=function(t){var e=t;if("CANVAS"!==e.tagName&&!(e=document.getElementById(t)))throw"Canvas with id "+t+" was not found";return(t=o.MakeSurface(e.width,e.height))&&(t.Od=e),t},o.MakeCanvasSurface||(o.MakeCanvasSurface=o.MakeSWCanvasSurface),o.MakeSurface=function(t,e){var n={width:t,height:e,colorType:o.ColorType.RGBA_8888,alphaType:o.AlphaType.Unpremul,colorSpace:o.ColorSpace.SRGB},i=t*e*4,r=o._malloc(i);return(n=o.Surface._makeRasterDirect(n,r,4*t))&&(n.Od=null,n.Ff=t,n.Bf=e,n.Df=i,n.af=r,n.getCanvas().clear(o.TRANSPARENT)),n},o.MakeRasterDirectSurface=function(t,e,n){return o.Surface._makeRasterDirect(t,e.byteOffset,n)},o.Surface.prototype.flush=function(t){if(o.Pd(this.Nd),this._flush(),this.Od){var e=new Uint8ClampedArray(o.HEAPU8.buffer,this.af,this.Df);e=new ImageData(e,this.Ff,this.Bf),t?this.Od.getContext("2d").putImageData(e,0,0,t[0],t[1],t[2]-t[0],t[3]-t[1]):this.Od.getContext("2d").putImageData(e,0,0)}},o.Surface.prototype.dispose=function(){this.af&&o._free(this.af),this.delete()},o.Pd=o.Pd||function(){},o.ef=o.ef||function(){return null}})),function(t){t.Sd=t.Sd||[],t.Sd.push((function(){function e(t,e,n){return t&&t.hasOwnProperty(e)?t[e]:n}function n(t){var e=De(Ae);return Ae[e]=t,e}function i(t){return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}function r(t){return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}function o(e,n,i,r){return e.bindTexture(e.TEXTURE_2D,n),r||i.alphaType!==t.AlphaType.Premul||e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n}function a(e,n,i){i||n.alphaType!==t.AlphaType.Premul||e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.bindTexture(e.TEXTURE_2D,null)}t.GetWebGLContext=function(t,n){if(!t)throw"null canvas passed into makeWebGLContext";var i={alpha:e(n,"alpha",1),depth:e(n,"depth",1),stencil:e(n,"stencil",8),antialias:e(n,"antialias",0),premultipliedAlpha:e(n,"premultipliedAlpha",1),preserveDrawingBuffer:e(n,"preserveDrawingBuffer",0),preferLowPowerToHighPerformance:e(n,"preferLowPowerToHighPerformance",0),failIfMajorPerformanceCaveat:e(n,"failIfMajorPerformanceCaveat",0),enableExtensionsByDefault:e(n,"enableExtensionsByDefault",1),explicitSwapControl:e(n,"explicitSwapControl",0),renderViaOffscreenBackBuffer:e(n,"renderViaOffscreenBackBuffer",0)};if(i.majorVersion=n&&n.majorVersion?n.majorVersion:"undefined"!=typeof WebGL2RenderingContext?2:1,i.explicitSwapControl)throw"explicitSwapControl is not supported";return t=function(t,e){t.mf||(t.mf=t.getContext,t.getContext=function(e,n){return"webgl"==e==(n=t.mf(e,n))instanceof WebGLRenderingContext?n:null});var n=1<e.majorVersion?t.getContext("webgl2",e):t.getContext("webgl",e);return n?function(t,e){var n=De(ke),i={Vf:n,attributes:e,version:e.majorVersion,he:t};return t.canvas&&(t.canvas.zf=i),ke[n]=i,(void 0===e.Lf||e.Lf)&&function(t){if(t||(t=Le),!t.Xf){t.Xf=!0;var e=t.he;!function(t){var e=t.getExtension("ANGLE_instanced_arrays");e&&(t.vertexAttribDivisor=function(t,n){e.vertexAttribDivisorANGLE(t,n)},t.drawArraysInstanced=function(t,n,i,r){e.drawArraysInstancedANGLE(t,n,i,r)},t.drawElementsInstanced=function(t,n,i,r,o){e.drawElementsInstancedANGLE(t,n,i,r,o)})}(e),function(t){var e=t.getExtension("OES_vertex_array_object");e&&(t.createVertexArray=function(){return e.createVertexArrayOES()},t.deleteVertexArray=function(t){e.deleteVertexArrayOES(t)},t.bindVertexArray=function(t){e.bindVertexArrayOES(t)},t.isVertexArray=function(t){return e.isVertexArrayOES(t)})}(e),function(t){var e=t.getExtension("WEBGL_draw_buffers");e&&(t.drawBuffers=function(t,n){e.drawBuffersWEBGL(t,n)})}(e),e.rf=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),e.vf=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=t.version&&(e.sf=e.getExtension("EXT_disjoint_timer_query_webgl2")),(2>t.version||!e.sf)&&(e.sf=e.getExtension("EXT_disjoint_timer_query")),e.tg=e.getExtension("WEBGL_multi_draw"),(e.getSupportedExtensions()||[]).forEach((function(t){t.includes("lose_context")||t.includes("debug")||e.getExtension(t)}))}}(i),n}(n,e):0}(t,i),t?(Be(t),Le.he.getExtension("WEBGL_debug_renderer_info"),t):0},t.deleteContext=function(t){Le===ke[t]&&(Le=null),"object"==typeof JSEvents&&JSEvents.vg(ke[t].he.canvas),ke[t]&&ke[t].he.canvas&&(ke[t].he.canvas.zf=void 0),ke[t]=null},t._setTextureCleanup({deleteTexture:function(t,e){var n=Ae[e];n&&ke[t].he.deleteTexture(n),Ae[e]=null}}),t.MakeWebGLContext=function(t){if(!this.Pd(t))return null;var e=this._MakeGrContext();return e?(e.Nd=t,Le.ff=e):null},t.MakeGrContext=t.MakeWebGLContext,t.MakeOnScreenGLSurface=function(t,e,n,i){return this.Pd(t.Nd)&&(e=this._MakeOnScreenGLSurface(t,e,n,i))?(e.Nd=t.Nd,e):null},t.MakeRenderTarget=function(){var t=arguments[0];if(!this.Pd(t.Nd))return null;if(3===arguments.length){var e=this._MakeRenderTargetWH(t,arguments[1],arguments[2]);if(!e)return null}else{if(2!==arguments.length)return null;if(!(e=this._MakeRenderTargetII(t,arguments[1])))return null}return e.Nd=t.Nd,e},t.MakeWebGLCanvasSurface=function(e,n,i){n=n||null;var r=e,o="undefined"!=typeof OffscreenCanvas&&r instanceof OffscreenCanvas;if(!("undefined"!=typeof HTMLCanvasElement&&r instanceof HTMLCanvasElement||o||(r=document.getElementById(e),r)))throw"Canvas with id "+e+" was not found";if(!(e=this.GetWebGLContext(r,i))||0>e)throw"failed to create webgl context: err "+e;return e=this.MakeWebGLContext(e),(n=this.MakeOnScreenGLSurface(e,r.width,r.height,n))||(n=r.cloneNode(!0),r.parentNode.replaceChild(n,r),n.classList.add("ck-replaced"),t.MakeSWCanvasSurface(n))},t.MakeCanvasSurface=t.MakeWebGLCanvasSurface,t.Surface.prototype.makeImageFromTexture=function(e,i){return t.Pd(this.Nd),e=n(e),(i=this._makeImageFromTexture(this.Nd,e,i))&&(i.Me=e),i},t.Surface.prototype.makeImageFromTextureSource=function(e,n,s){n||(n={height:i(e),width:r(e),colorType:t.ColorType.RGBA_8888,alphaType:s?t.AlphaType.Premul:t.AlphaType.Unpremul}),n.colorSpace||(n.colorSpace=t.ColorSpace.SRGB),t.Pd(this.Nd);var l=Le.he;return s=o(l,l.createTexture(),n,s),2===Le.version?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,n.width,n.height,0,l.RGBA,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,e),a(l,n),this.makeImageFromTexture(s,n)},t.Surface.prototype.updateTextureFromSource=function(e,s,l){if(e.Me){t.Pd(this.Nd);var c=e.getImageInfo(),h=Le.he,u=o(h,Ae[e.Me],c,l);2===Le.version?h.texImage2D(h.TEXTURE_2D,0,h.RGBA,r(s),i(s),0,h.RGBA,h.UNSIGNED_BYTE,s):h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,s),a(h,c,l),this._resetContext(),Ae[e.Me]=null,e.Me=n(u),c.colorSpace=e.getColorSpace(),s=this._makeImageFromTexture(this.Nd,e.Me,c),l=e.Md.Vd,h=e.Md.ae,e.Md.Vd=s.Md.Vd,e.Md.ae=s.Md.ae,s.Md.Vd=l,s.Md.ae=h,s.delete(),c.colorSpace.delete()}},t.MakeLazyImageFromTextureSource=function(e,s,l){s||(s={height:i(e),width:r(e),colorType:t.ColorType.RGBA_8888,alphaType:l?t.AlphaType.Premul:t.AlphaType.Unpremul}),s.colorSpace||(s.colorSpace=t.ColorSpace.SRGB);var c={makeTexture:function(){var t=Le,i=t.he,r=o(i,i.createTexture(),s,l);return 2===t.version?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,s.width,s.height,0,i.RGBA,i.UNSIGNED_BYTE,e):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),a(i,s,l),n(r)},freeSrc:function(){}};return"VideoFrame"===e.constructor.name&&(c.freeSrc=function(){e.close()}),t.Image._makeFromGenerator(s,c)},t.Pd=function(t){return!!t&&Be(t)},t.ef=function(){return Le&&Le.ff&&!Le.ff.isDeleted()?Le.ff:null}}))}(e),function(t){function n(t,e,n,i,r){for(var o=0;o<t.length;o++)e[o*n+(o*r+i+n)%n]=t[o];return e}function i(t){for(var e=t*t,n=Array(e);e--;)n[e]=0==e%(t+1)?1:0;return n}function r(t){return!!t&&t.constructor===Float32Array&&4===t.length}function o(t){return(l(255*t[3])<<24|l(255*t[0])<<16|l(255*t[1])<<8|l(255*t[2])<<0)>>>0}function a(t){if(t&&t._ck)return t;if(t instanceof Float32Array){for(var e=Math.floor(t.length/4),n=new Uint32Array(e),i=0;i<e;i++)n[i]=o(t.slice(4*i,4*(i+1)));return n}return t instanceof Uint32Array?t:t instanceof Array&&t[0]instanceof Float32Array?t.map(o):void 0}function s(t){if(void 0===t)return 1;var e=parseFloat(t);return t&&-1!==t.indexOf("%")?e/100:e}function l(t){return Math.round(Math.max(0,Math.min(t||0,255)))}function c(e,n){n&&n._ck||t._free(e)}function h(e,n,i){if(!e||!e.length)return $;if(e&&e._ck)return e.byteOffset;var r=t[n].BYTES_PER_ELEMENT;return i||(i=t._malloc(e.length*r)),t[n].set(e,i/r),i}function u(e){var n={de:$,count:e.length,colorType:t.ColorType.RGBA_F32};if(e instanceof Float32Array)n.de=h(e,"HEAPF32"),n.count=e.length/4;else if(e instanceof Uint32Array)n.de=h(e,"HEAPU32"),n.colorType=t.ColorType.RGBA_8888;else{if(!(e instanceof Array))throw"Invalid argument to copyFlexibleColorArray, Not a color array "+typeof e;if(e&&e.length){for(var i=t._malloc(16*e.length),r=0,o=i/4,a=0;a<e.length;a++)for(var s=0;4>s;s++)t.HEAPF32[o+r]=e[a][s],r++;e=i}else e=$;n.de=e}return n}function d(e){if(!e)return $;var n=S.toTypedArray();if(e.length){if(6===e.length||9===e.length)return h(e,"HEAPF32",F),6===e.length&&t.HEAPF32.set(H,6+F/4),F;if(16===e.length)return n[0]=e[0],n[1]=e[1],n[2]=e[3],n[3]=e[4],n[4]=e[5],n[5]=e[7],n[6]=e[12],n[7]=e[13],n[8]=e[15],F;throw"invalid matrix size"}if(void 0===e.m11)throw"invalid matrix argument";return n[0]=e.m11,n[1]=e.m21,n[2]=e.m41,n[3]=e.m12,n[4]=e.m22,n[5]=e.m42,n[6]=e.m14,n[7]=e.m24,n[8]=e.m44,F}function f(t,e){return h(t,"HEAPF32",e||D)}function p(t,e,n,i){var r=C.toTypedArray();return r[0]=t,r[1]=e,r[2]=n,r[3]=i,D}function m(e){for(var n=new Float32Array(4),i=0;4>i;i++)n[i]=t.HEAPF32[e/4+i];return n}function g(t,e){return h(t,"HEAPF32",e||L)}function y(t,e){return h(t,"HEAPF32",e||z)}function v(){for(var t=0,e=0;e<arguments.length-1;e+=2)t+=arguments[e]*arguments[e+1];return t}function b(t,e,n){for(var i=Array(t.length),r=0;r<n;r++)for(var o=0;o<n;o++){for(var a=0,s=0;s<n;s++)a+=t[n*r+s]*e[n*s+o];i[r*n+o]=a}return i}function w(t,e){for(var n=b(e[0],e[1],t),i=2;i<e.length;)n=b(n,e[i],t),i++;return n}t.Color=function(e,n,i,r){return void 0===r&&(r=1),t.Color4f(l(e)/255,l(n)/255,l(i)/255,r)},t.ColorAsInt=function(t,e,n,i){return void 0===i&&(i=255),(l(i)<<24|l(t)<<16|l(e)<<8|l(n)<<0&268435455)>>>0},t.Color4f=function(t,e,n,i){return void 0===i&&(i=1),Float32Array.of(t,e,n,i)},Object.defineProperty(t,"TRANSPARENT",{get:function(){return t.Color4f(0,0,0,0)}}),Object.defineProperty(t,"BLACK",{get:function(){return t.Color4f(0,0,0,1)}}),Object.defineProperty(t,"WHITE",{get:function(){return t.Color4f(1,1,1,1)}}),Object.defineProperty(t,"RED",{get:function(){return t.Color4f(1,0,0,1)}}),Object.defineProperty(t,"GREEN",{get:function(){return t.Color4f(0,1,0,1)}}),Object.defineProperty(t,"BLUE",{get:function(){return t.Color4f(0,0,1,1)}}),Object.defineProperty(t,"YELLOW",{get:function(){return t.Color4f(1,1,0,1)}}),Object.defineProperty(t,"CYAN",{get:function(){return t.Color4f(0,1,1,1)}}),Object.defineProperty(t,"MAGENTA",{get:function(){return t.Color4f(1,0,1,1)}}),t.getColorComponents=function(t){return[Math.floor(255*t[0]),Math.floor(255*t[1]),Math.floor(255*t[2]),t[3]]},t.parseColorString=function(e,n){if((e=e.toLowerCase()).startsWith("#")){switch(n=255,e.length){case 9:n=parseInt(e.slice(7,9),16);case 7:var i=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);break;case 5:n=17*parseInt(e.slice(4,5),16);case 4:i=17*parseInt(e.slice(1,2),16),r=17*parseInt(e.slice(2,3),16),o=17*parseInt(e.slice(3,4),16)}return t.Color(i,r,o,n/255)}return e.startsWith("rgba")?(e=(e=e.slice(5,-1)).split(","),t.Color(+e[0],+e[1],+e[2],s(e[3]))):e.startsWith("rgb")?(e=(e=e.slice(4,-1)).split(","),t.Color(+e[0],+e[1],+e[2],s(e[3]))):e.startsWith("gray(")||e.startsWith("hsl")||!n||void 0===(e=n[e])?t.BLACK:e},t.multiplyByAlpha=function(t,e){return(t=t.slice())[3]=Math.max(0,Math.min(t[3]*e,1)),t},t.Malloc=function(e,n){var i=t._malloc(n*e.BYTES_PER_ELEMENT);return{_ck:!0,length:n,byteOffset:i,se:null,subarray:function(t,e){return(t=this.toTypedArray().subarray(t,e))._ck=!0,t},toTypedArray:function(){return this.se&&this.se.length||(this.se=new e(t.HEAPU8.buffer,i,n),this.se._ck=!0),this.se}}},t.Free=function(e){t._free(e.byteOffset),e.byteOffset=$,e.toTypedArray=null,e.se=null};var S,_,C,T,A,P,E,k,M,x,F=$,I=$,D=$,L=$,G=$,N=$,U=$,W=$,z=$,j=$,H=Float32Array.of(0,0,1),$=0;t.onRuntimeInitialized=function(){function e(e,n,i,r,o,a,s){a||(a=4*r.width,r.colorType===t.ColorType.RGBA_F16?a*=2:r.colorType===t.ColorType.RGBA_F32&&(a*=4));var l=a*r.height,c=o?o.byteOffset:t._malloc(l);if(s?!e._readPixels(r,c,a,n,i,s):!e._readPixels(r,c,a,n,i))return o||t._free(c),null;if(o)return o.toTypedArray();switch(r.colorType){case t.ColorType.RGBA_8888:case t.ColorType.RGBA_F16:e=new Uint8Array(t.HEAPU8.buffer,c,l).slice();break;case t.ColorType.RGBA_F32:e=new Float32Array(t.HEAPU8.buffer,c,l).slice();break;default:return null}return t._free(c),e}C=t.Malloc(Float32Array,4),D=C.byteOffset,_=t.Malloc(Float32Array,16),I=_.byteOffset,S=t.Malloc(Float32Array,9),F=S.byteOffset,M=t.Malloc(Float32Array,12),z=M.byteOffset,x=t.Malloc(Float32Array,12),j=x.byteOffset,T=t.Malloc(Float32Array,4),L=T.byteOffset,A=t.Malloc(Float32Array,4),G=A.byteOffset,P=t.Malloc(Float32Array,3),N=P.byteOffset,E=t.Malloc(Float32Array,3),U=E.byteOffset,k=t.Malloc(Int32Array,4),W=k.byteOffset,t.ColorSpace.SRGB=t.ColorSpace._MakeSRGB(),t.ColorSpace.DISPLAY_P3=t.ColorSpace._MakeDisplayP3(),t.ColorSpace.ADOBE_RGB=t.ColorSpace._MakeAdobeRGB(),t.GlyphRunFlags={IsWhiteSpace:t._GlyphRunFlags_isWhiteSpace},t.Path.MakeFromCmds=function(e){var n=h(e,"HEAPF32"),i=t.Path._MakeFromCmds(n,e.length);return c(n,e),i},t.Path.MakeFromVerbsPointsWeights=function(e,n,i){var r=h(e,"HEAPU8"),o=h(n,"HEAPF32"),a=h(i,"HEAPF32"),s=t.Path._MakeFromVerbsPointsWeights(r,e.length,o,n.length,a,i&&i.length||0);return c(r,e),c(o,n),c(a,i),s},t.Path.prototype.addArc=function(t,e,n){return t=g(t),this._addArc(t,e,n),this},t.Path.prototype.addCircle=function(t,e,n,i){return this._addCircle(t,e,n,!!i),this},t.Path.prototype.addOval=function(t,e,n){return void 0===n&&(n=1),t=g(t),this._addOval(t,!!e,n),this},t.Path.prototype.addPath=function(){var t=Array.prototype.slice.call(arguments),e=t[0],n=!1;if("boolean"==typeof t[t.length-1]&&(n=t.pop()),1===t.length)this._addPath(e,1,0,0,0,1,0,0,0,1,n);else if(2===t.length)t=t[1],this._addPath(e,t[0],t[1],t[2],t[3],t[4],t[5],t[6]||0,t[7]||0,t[8]||1,n);else{if(7!==t.length&&10!==t.length)return null;this._addPath(e,t[1],t[2],t[3],t[4],t[5],t[6],t[7]||0,t[8]||0,t[9]||1,n)}return this},t.Path.prototype.addPoly=function(t,e){var n=h(t,"HEAPF32");return this._addPoly(n,t.length/2,e),c(n,t),this},t.Path.prototype.addRect=function(t,e){return t=g(t),this._addRect(t,!!e),this},t.Path.prototype.addRRect=function(t,e){return t=y(t),this._addRRect(t,!!e),this},t.Path.prototype.addVerbsPointsWeights=function(t,e,n){var i=h(t,"HEAPU8"),r=h(e,"HEAPF32"),o=h(n,"HEAPF32");this._addVerbsPointsWeights(i,t.length,r,e.length,o,n&&n.length||0),c(i,t),c(r,e),c(o,n)},t.Path.prototype.arc=function(e,n,i,r,o,a){return e=t.LTRBRect(e-i,n-i,e+i,n+i),o=(o-r)/Math.PI*180-360*!!a,(a=new t.Path).addArc(e,r/Math.PI*180,o),this.addPath(a,!0),a.delete(),this},t.Path.prototype.arcToOval=function(t,e,n,i){return t=g(t),this._arcToOval(t,e,n,i),this},t.Path.prototype.arcToRotated=function(t,e,n,i,r,o,a){return this._arcToRotated(t,e,n,!!i,!!r,o,a),this},t.Path.prototype.arcToTangent=function(t,e,n,i,r){return this._arcToTangent(t,e,n,i,r),this},t.Path.prototype.close=function(){return this._close(),this},t.Path.prototype.conicTo=function(t,e,n,i,r){return this._conicTo(t,e,n,i,r),this},t.Path.prototype.computeTightBounds=function(t){this._computeTightBounds(L);var e=T.toTypedArray();return t?(t.set(e),t):e.slice()},t.Path.prototype.cubicTo=function(t,e,n,i,r,o){return this._cubicTo(t,e,n,i,r,o),this},t.Path.prototype.dash=function(t,e,n){return this._dash(t,e,n)?this:null},t.Path.prototype.getBounds=function(t){this._getBounds(L);var e=T.toTypedArray();return t?(t.set(e),t):e.slice()},t.Path.prototype.lineTo=function(t,e){return this._lineTo(t,e),this},t.Path.prototype.moveTo=function(t,e){return this._moveTo(t,e),this},t.Path.prototype.offset=function(t,e){return this._transform(1,0,t,0,1,e,0,0,1),this},t.Path.prototype.quadTo=function(t,e,n,i){return this._quadTo(t,e,n,i),this},t.Path.prototype.rArcTo=function(t,e,n,i,r,o,a){return this._rArcTo(t,e,n,i,r,o,a),this},t.Path.prototype.rConicTo=function(t,e,n,i,r){return this._rConicTo(t,e,n,i,r),this},t.Path.prototype.rCubicTo=function(t,e,n,i,r,o){return this._rCubicTo(t,e,n,i,r,o),this},t.Path.prototype.rLineTo=function(t,e){return this._rLineTo(t,e),this},t.Path.prototype.rMoveTo=function(t,e){return this._rMoveTo(t,e),this},t.Path.prototype.rQuadTo=function(t,e,n,i){return this._rQuadTo(t,e,n,i),this},t.Path.prototype.stroke=function(e){return(e=e||{}).width=e.width||1,e.miter_limit=e.miter_limit||4,e.cap=e.cap||t.StrokeCap.Butt,e.join=e.join||t.StrokeJoin.Miter,e.precision=e.precision||1,this._stroke(e)?this:null},t.Path.prototype.transform=function(){if(1===arguments.length){var t=arguments[0];this._transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6]||0,t[7]||0,t[8]||1)}else{if(6!==arguments.length&&9!==arguments.length)throw"transform expected to take 1 or 9 arguments. Got "+arguments.length;t=arguments,this._transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6]||0,t[7]||0,t[8]||1)}return this},t.Path.prototype.trim=function(t,e,n){return this._trim(t,e,!!n)?this:null},t.Image.prototype.makeShaderCubic=function(t,e,n,i,r){return r=d(r),this._makeShaderCubic(t,e,n,i,r)},t.Image.prototype.makeShaderOptions=function(t,e,n,i,r){return r=d(r),this._makeShaderOptions(t,e,n,i,r)},t.Image.prototype.readPixels=function(n,i,r,o,a){return e(this,n,i,r,o,a,t.ef())},t.Canvas.prototype.clear=function(e){t.Pd(this.Nd),e=f(e),this._clear(e)},t.Canvas.prototype.clipRRect=function(e,n,i){t.Pd(this.Nd),e=y(e),this._clipRRect(e,n,i)},t.Canvas.prototype.clipRect=function(e,n,i){t.Pd(this.Nd),e=g(e),this._clipRect(e,n,i)},t.Canvas.prototype.concat=function(e){t.Pd(this.Nd),e=function(t){if(!t)return $;var e=_.toTypedArray();if(t.length){if(16!==t.length&&6!==t.length&&9!==t.length)throw"invalid matrix size";return 16===t.length?h(t,"HEAPF32",I):(e.fill(0),e[0]=t[0],e[1]=t[1],e[3]=t[2],e[4]=t[3],e[5]=t[4],e[7]=t[5],e[10]=1,e[12]=t[6],e[13]=t[7],e[15]=t[8],6===t.length&&(e[12]=0,e[13]=0,e[15]=1),I)}if(void 0===t.m11)throw"invalid matrix argument";return e[0]=t.m11,e[1]=t.m21,e[2]=t.m31,e[3]=t.m41,e[4]=t.m12,e[5]=t.m22,e[6]=t.m32,e[7]=t.m42,e[8]=t.m13,e[9]=t.m23,e[10]=t.m33,e[11]=t.m43,e[12]=t.m14,e[13]=t.m24,e[14]=t.m34,e[15]=t.m44,I}(e),this._concat(e)},t.Canvas.prototype.drawArc=function(e,n,i,r,o){t.Pd(this.Nd),e=g(e),this._drawArc(e,n,i,r,o)},t.Canvas.prototype.drawAtlas=function(e,n,i,r,o,s,l){if(e&&r&&n&&i&&n.length===i.length){t.Pd(this.Nd),o||(o=t.BlendMode.SrcOver);var u=h(n,"HEAPF32"),d=h(i,"HEAPF32"),f=i.length/4,p=h(a(s),"HEAPU32");if(l&&"B"in l&&"C"in l)this._drawAtlasCubic(e,d,u,p,f,o,l.B,l.C,r);else{let n=t.FilterMode.Linear,i=t.MipmapMode.None;l&&(n=l.filter,"mipmap"in l&&(i=l.mipmap)),this._drawAtlasOptions(e,d,u,p,f,o,n,i,r)}c(u,n),c(d,i),c(p,s)}},t.Canvas.prototype.drawCircle=function(e,n,i,r){t.Pd(this.Nd),this._drawCircle(e,n,i,r)},t.Canvas.prototype.drawColor=function(e,n){t.Pd(this.Nd),e=f(e),void 0!==n?this._drawColor(e,n):this._drawColor(e)},t.Canvas.prototype.drawColorInt=function(e,n){t.Pd(this.Nd),this._drawColorInt(e,n||t.BlendMode.SrcOver)},t.Canvas.prototype.drawColorComponents=function(e,n,i,r,o){t.Pd(this.Nd),e=p(e,n,i,r),void 0!==o?this._drawColor(e,o):this._drawColor(e)},t.Canvas.prototype.drawDRRect=function(e,n,i){t.Pd(this.Nd),e=y(e,z),n=y(n,j),this._drawDRRect(e,n,i)},t.Canvas.prototype.drawImage=function(e,n,i,r){t.Pd(this.Nd),this._drawImage(e,n,i,r||null)},t.Canvas.prototype.drawImageCubic=function(e,n,i,r,o,a){t.Pd(this.Nd),this._drawImageCubic(e,n,i,r,o,a||null)},t.Canvas.prototype.drawImageOptions=function(e,n,i,r,o,a){t.Pd(this.Nd),this._drawImageOptions(e,n,i,r,o,a||null)},t.Canvas.prototype.drawImageNine=function(e,n,i,r,o){t.Pd(this.Nd),n=h(n,"HEAP32",W),i=g(i),this._drawImageNine(e,n,i,r,o||null)},t.Canvas.prototype.drawImageRect=function(e,n,i,r,o){t.Pd(this.Nd),g(n,L),g(i,G),this._drawImageRect(e,L,G,r,!!o)},t.Canvas.prototype.drawImageRectCubic=function(e,n,i,r,o,a){t.Pd(this.Nd),g(n,L),g(i,G),this._drawImageRectCubic(e,L,G,r,o,a||null)},t.Canvas.prototype.drawImageRectOptions=function(e,n,i,r,o,a){t.Pd(this.Nd),g(n,L),g(i,G),this._drawImageRectOptions(e,L,G,r,o,a||null)},t.Canvas.prototype.drawLine=function(e,n,i,r,o){t.Pd(this.Nd),this._drawLine(e,n,i,r,o)},t.Canvas.prototype.drawOval=function(e,n){t.Pd(this.Nd),e=g(e),this._drawOval(e,n)},t.Canvas.prototype.drawPaint=function(e){t.Pd(this.Nd),this._drawPaint(e)},t.Canvas.prototype.drawParagraph=function(e,n,i){t.Pd(this.Nd),this._drawParagraph(e,n,i)},t.Canvas.prototype.drawPatch=function(e,n,i,r,o){if(24>e.length)throw"Need 12 cubic points";if(n&&4>n.length)throw"Need 4 colors";if(i&&8>i.length)throw"Need 4 shader coordinates";t.Pd(this.Nd);const s=h(e,"HEAPF32"),l=n?h(a(n),"HEAPU32"):$,u=i?h(i,"HEAPF32"):$;r||(r=t.BlendMode.Modulate),this._drawPatch(s,l,u,r,o),c(u,i),c(l,n),c(s,e)},t.Canvas.prototype.drawPath=function(e,n){t.Pd(this.Nd),this._drawPath(e,n)},t.Canvas.prototype.drawPicture=function(e){t.Pd(this.Nd),this._drawPicture(e)},t.Canvas.prototype.drawPoints=function(e,n,i){t.Pd(this.Nd);var r=h(n,"HEAPF32");this._drawPoints(e,r,n.length/2,i),c(r,n)},t.Canvas.prototype.drawRRect=function(e,n){t.Pd(this.Nd),e=y(e),this._drawRRect(e,n)},t.Canvas.prototype.drawRect=function(e,n){t.Pd(this.Nd),e=g(e),this._drawRect(e,n)},t.Canvas.prototype.drawRect4f=function(e,n,i,r,o){t.Pd(this.Nd),this._drawRect4f(e,n,i,r,o)},t.Canvas.prototype.drawShadow=function(e,n,i,r,o,a,s){t.Pd(this.Nd);var l=h(o,"HEAPF32"),u=h(a,"HEAPF32");n=h(n,"HEAPF32",N),i=h(i,"HEAPF32",U),this._drawShadow(e,n,i,r,l,u,s),c(l,o),c(u,a)},t.getShadowLocalBounds=function(t,e,n,i,r,o,a){return t=d(t),n=h(n,"HEAPF32",N),i=h(i,"HEAPF32",U),this._getShadowLocalBounds(t,e,n,i,r,o,L)?(e=T.toTypedArray(),a?(a.set(e),a):e.slice()):null},t.Canvas.prototype.drawTextBlob=function(e,n,i,r){t.Pd(this.Nd),this._drawTextBlob(e,n,i,r)},t.Canvas.prototype.drawVertices=function(e,n,i){t.Pd(this.Nd),this._drawVertices(e,n,i)},t.Canvas.prototype.getDeviceClipBounds=function(t){this._getDeviceClipBounds(W);var e=k.toTypedArray();return t?t.set(e):t=e.slice(),t},t.Canvas.prototype.getLocalToDevice=function(){this._getLocalToDevice(I);for(var e=I,n=Array(16),i=0;16>i;i++)n[i]=t.HEAPF32[e/4+i];return n},t.Canvas.prototype.getTotalMatrix=function(){this._getTotalMatrix(F);for(var e=Array(9),n=0;9>n;n++)e[n]=t.HEAPF32[F/4+n];return e},t.Canvas.prototype.makeSurface=function(t){return(t=this._makeSurface(t)).Nd=this.Nd,t},t.Canvas.prototype.readPixels=function(n,i,r,o,a){return t.Pd(this.Nd),e(this,n,i,r,o,a)},t.Canvas.prototype.saveLayer=function(t,e,n,i){return e=g(e),this._saveLayer(t||null,e,n||null,i||0)},t.Canvas.prototype.writePixels=function(e,n,i,r,o,a,s,l){if(e.byteLength%(n*i))throw"pixels length must be a multiple of the srcWidth * srcHeight";t.Pd(this.Nd);var u=e.byteLength/(n*i);a=a||t.AlphaType.Unpremul,s=s||t.ColorType.RGBA_8888,l=l||t.ColorSpace.SRGB;var d=u*n;return u=h(e,"HEAPU8"),n=this._writePixels({width:n,height:i,colorType:s,alphaType:a,colorSpace:l},u,d,r,o),c(u,e),n},t.ColorFilter.MakeBlend=function(e,n,i){return e=f(e),i=i||t.ColorSpace.SRGB,t.ColorFilter._MakeBlend(e,n,i)},t.ColorFilter.MakeMatrix=function(e){if(!e||20!==e.length)throw"invalid color matrix";var n=h(e,"HEAPF32"),i=t.ColorFilter._makeMatrix(n);return c(n,e),i},t.ContourMeasure.prototype.getPosTan=function(t,e){return this._getPosTan(t,L),t=T.toTypedArray(),e?(e.set(t),e):t.slice()},t.ImageFilter.MakeDropShadow=function(e,n,i,r,o,a){return o=f(o,D),t.ImageFilter._MakeDropShadow(e,n,i,r,o,a)},t.ImageFilter.MakeDropShadowOnly=function(e,n,i,r,o,a){return o=f(o,D),t.ImageFilter._MakeDropShadowOnly(e,n,i,r,o,a)},t.ImageFilter.MakeImage=function(e,n,i,r){if(i=g(i,L),r=g(r,G),"B"in n&&"C"in n)return t.ImageFilter._MakeImageCubic(e,n.B,n.C,i,r);const o=n.filter;let a=t.MipmapMode.None;return"mipmap"in n&&(a=n.mipmap),t.ImageFilter._MakeImageOptions(e,o,a,i,r)},t.ImageFilter.MakeMatrixTransform=function(e,n,i){if(e=d(e),"B"in n&&"C"in n)return t.ImageFilter._MakeMatrixTransformCubic(e,n.B,n.C,i);const r=n.filter;let o=t.MipmapMode.None;return"mipmap"in n&&(o=n.mipmap),t.ImageFilter._MakeMatrixTransformOptions(e,r,o,i)},t.Paint.prototype.getColor=function(){return this._getColor(D),m(D)},t.Paint.prototype.setColor=function(t,e){e=e||null,t=f(t),this._setColor(t,e)},t.Paint.prototype.setColorComponents=function(t,e,n,i,r){r=r||null,t=p(t,e,n,i),this._setColor(t,r)},t.Path.prototype.getPoint=function(t,e){return this._getPoint(t,L),t=T.toTypedArray(),e?(e[0]=t[0],e[1]=t[1],e):t.slice(0,2)},t.Picture.prototype.makeShader=function(t,e,n,i,r){return i=d(i),r=g(r),this._makeShader(t,e,n,i,r)},t.PictureRecorder.prototype.beginRecording=function(t){return t=g(t),this._beginRecording(t)},t.Surface.prototype.getCanvas=function(){var t=this._getCanvas();return t.Nd=this.Nd,t},t.Surface.prototype.makeImageSnapshot=function(e){return t.Pd(this.Nd),e=h(e,"HEAP32",W),this._makeImageSnapshot(e)},t.Surface.prototype.makeSurface=function(e){return t.Pd(this.Nd),(e=this._makeSurface(e)).Nd=this.Nd,e},t.Surface.prototype.Ef=function(e,n){this.Ie||(this.Ie=this.getCanvas()),requestAnimationFrame(function(){t.Pd(this.Nd),e(this.Ie),this.flush(n)}.bind(this))},t.Surface.prototype.requestAnimationFrame||(t.Surface.prototype.requestAnimationFrame=t.Surface.prototype.Ef),t.Surface.prototype.Af=function(e,n){this.Ie||(this.Ie=this.getCanvas()),requestAnimationFrame(function(){t.Pd(this.Nd),e(this.Ie),this.flush(n),this.dispose()}.bind(this))},t.Surface.prototype.drawOnce||(t.Surface.prototype.drawOnce=t.Surface.prototype.Af),t.PathEffect.MakeDash=function(e,n){if(n||(n=0),!e.length||1==e.length%2)throw"Intervals array must have even length";var i=h(e,"HEAPF32");return n=t.PathEffect._MakeDash(i,e.length,n),c(i,e),n},t.PathEffect.MakeLine2D=function(e,n){return n=d(n),t.PathEffect._MakeLine2D(e,n)},t.PathEffect.MakePath2D=function(e,n){return e=d(e),t.PathEffect._MakePath2D(e,n)},t.Shader.MakeColor=function(e,n){return n=n||null,e=f(e),t.Shader._MakeColor(e,n)},t.Shader.Blend=t.Shader.MakeBlend,t.Shader.Color=t.Shader.MakeColor,t.Shader.MakeLinearGradient=function(e,n,i,r,o,a,s,l){l=l||null;var f=u(i),p=h(r,"HEAPF32");s=s||0,a=d(a);var m=T.toTypedArray();return m.set(e),m.set(n,2),e=t.Shader._MakeLinearGradient(L,f.de,f.colorType,p,f.count,o,s,a,l),c(f.de,i),r&&c(p,r),e},t.Shader.MakeRadialGradient=function(e,n,i,r,o,a,s,l){l=l||null;var f=u(i),p=h(r,"HEAPF32");return s=s||0,a=d(a),e=t.Shader._MakeRadialGradient(e[0],e[1],n,f.de,f.colorType,p,f.count,o,s,a,l),c(f.de,i),r&&c(p,r),e},t.Shader.MakeSweepGradient=function(e,n,i,r,o,a,s,l,f,p){p=p||null;var m=u(i),g=h(r,"HEAPF32");return s=s||0,l=l||0,f=f||360,a=d(a),e=t.Shader._MakeSweepGradient(e,n,m.de,m.colorType,g,m.count,o,l,f,s,a,p),c(m.de,i),r&&c(g,r),e},t.Shader.MakeTwoPointConicalGradient=function(e,n,i,r,o,a,s,l,f,p){p=p||null;var m=u(o),g=h(a,"HEAPF32");f=f||0,l=d(l);var y=T.toTypedArray();return y.set(e),y.set(i,2),e=t.Shader._MakeTwoPointConicalGradient(L,n,r,m.de,m.colorType,g,m.count,s,f,l,p),c(m.de,o),a&&c(g,a),e},t.Vertices.prototype.bounds=function(t){this._bounds(L);var e=T.toTypedArray();return t?(t.set(e),t):e.slice()},t.Sd&&t.Sd.forEach((function(t){t()}))},t.computeTonalColors=function(t){var e=h(t.ambient,"HEAPF32"),n=h(t.spot,"HEAPF32");this._computeTonalColors(e,n);var i={ambient:m(e),spot:m(n)};return c(e,t.ambient),c(n,t.spot),i},t.LTRBRect=function(t,e,n,i){return Float32Array.of(t,e,n,i)},t.XYWHRect=function(t,e,n,i){return Float32Array.of(t,e,t+n,e+i)},t.LTRBiRect=function(t,e,n,i){return Int32Array.of(t,e,n,i)},t.XYWHiRect=function(t,e,n,i){return Int32Array.of(t,e,t+n,e+i)},t.RRectXY=function(t,e,n){return Float32Array.of(t[0],t[1],t[2],t[3],e,n,e,n,e,n,e,n)},t.MakeAnimatedImageFromEncoded=function(e){e=new Uint8Array(e);var n=t._malloc(e.byteLength);return t.HEAPU8.set(e,n),(e=t._decodeAnimatedImage(n,e.byteLength))?e:null},t.MakeImageFromEncoded=function(e){e=new Uint8Array(e);var n=t._malloc(e.byteLength);return t.HEAPU8.set(e,n),(e=t._decodeImage(n,e.byteLength))?e:null};var V=null;t.MakeImageFromCanvasImageSource=function(e){var n=e.width,i=e.height;V||(V=document.createElement("canvas")),V.width=n,V.height=i;var r=V.getContext("2d",{xg:!0});return r.drawImage(e,0,0),e=r.getImageData(0,0,n,i),t.MakeImage({width:n,height:i,alphaType:t.AlphaType.Unpremul,colorType:t.ColorType.RGBA_8888,colorSpace:t.ColorSpace.SRGB},e.data,4*n)},t.MakeImage=function(e,n,i){var r=t._malloc(n.length);return t.HEAPU8.set(n,r),t._MakeImage(e,r,n.length,i)},t.MakeVertices=function(e,n,i,r,o,s){var l=o&&o.length||0,c=0;return i&&i.length&&(c|=1),r&&r.length&&(c|=2),void 0===s||s||(c|=4),h(n,"HEAPF32",(e=new t._VerticesBuilder(e,n.length/2,l,c)).positions()),e.texCoords()&&h(i,"HEAPF32",e.texCoords()),e.colors()&&h(a(r),"HEAPU32",e.colors()),e.indices()&&h(o,"HEAPU16",e.indices()),e.detach()},t.Matrix={},t.Matrix.identity=function(){return i(3)},t.Matrix.invert=function(t){var e=t[0]*t[4]*t[8]+t[1]*t[5]*t[6]+t[2]*t[3]*t[7]-t[2]*t[4]*t[6]-t[1]*t[3]*t[8]-t[0]*t[5]*t[7];return e?[(t[4]*t[8]-t[5]*t[7])/e,(t[2]*t[7]-t[1]*t[8])/e,(t[1]*t[5]-t[2]*t[4])/e,(t[5]*t[6]-t[3]*t[8])/e,(t[0]*t[8]-t[2]*t[6])/e,(t[2]*t[3]-t[0]*t[5])/e,(t[3]*t[7]-t[4]*t[6])/e,(t[1]*t[6]-t[0]*t[7])/e,(t[0]*t[4]-t[1]*t[3])/e]:null},t.Matrix.mapPoints=function(t,e){for(var n=0;n<e.length;n+=2){var i=e[n],r=e[n+1],o=t[6]*i+t[7]*r+t[8],a=t[3]*i+t[4]*r+t[5];e[n]=(t[0]*i+t[1]*r+t[2])/o,e[n+1]=a/o}return e},t.Matrix.multiply=function(){return w(3,arguments)},t.Matrix.rotated=function(t,e,n){e=e||0,n=n||0;var i=Math.sin(t);return[t=Math.cos(t),-i,v(i,n,1-t,e),i,t,v(-i,e,1-t,n),0,0,1]},t.Matrix.scaled=function(t,e,r,o){r=r||0,o=o||0;var a=n([t,e],i(3),3,0,1);return n([r-t*r,o-e*o],a,3,2,0)},t.Matrix.skewed=function(t,e,r,o){r=r||0,o=o||0;var a=n([t,e],i(3),3,1,-1);return n([-t*r,-e*o],a,3,2,0)},t.Matrix.translated=function(t,e){return n(arguments,i(3),3,2,0)},t.Vector={},t.Vector.dot=function(t,e){return t.map((function(t,n){return t*e[n]})).reduce((function(t,e){return t+e}))},t.Vector.lengthSquared=function(e){return t.Vector.dot(e,e)},t.Vector.length=function(e){return Math.sqrt(t.Vector.lengthSquared(e))},t.Vector.mulScalar=function(t,e){return t.map((function(t){return t*e}))},t.Vector.add=function(t,e){return t.map((function(t,n){return t+e[n]}))},t.Vector.sub=function(t,e){return t.map((function(t,n){return t-e[n]}))},t.Vector.dist=function(e,n){return t.Vector.length(t.Vector.sub(e,n))},t.Vector.normalize=function(e){return t.Vector.mulScalar(e,1/t.Vector.length(e))},t.Vector.cross=function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},t.M44={},t.M44.identity=function(){return i(4)},t.M44.translated=function(t){return n(t,i(4),4,3,0)},t.M44.scaled=function(t){return n(t,i(4),4,0,1)},t.M44.rotated=function(e,n){return t.M44.rotatedUnitSinCos(t.Vector.normalize(e),Math.sin(n),Math.cos(n))},t.M44.rotatedUnitSinCos=function(t,e,n){var i=t[0],r=t[1],o=1-n;return[o*i*i+n,o*i*r-e*(t=t[2]),o*i*t+e*r,0,o*i*r+e*t,o*r*r+n,o*r*t-e*i,0,o*i*t-e*r,o*r*t+e*i,o*t*t+n,0,0,0,0,1]},t.M44.lookat=function(e,i,r){i=t.Vector.normalize(t.Vector.sub(i,e)),r=t.Vector.normalize(r),r=t.Vector.normalize(t.Vector.cross(i,r));var o=t.M44.identity();return n(r,o,4,0,0),n(t.Vector.cross(r,i),o,4,1,0),n(t.Vector.mulScalar(i,-1),o,4,2,0),n(e,o,4,3,0),null===(e=t.M44.invert(o))?t.M44.identity():e},t.M44.perspective=function(t,e,n){var i=1/(e-t);return n/=2,[n=Math.cos(n)/Math.sin(n),0,0,0,0,n,0,0,0,0,(e+t)*i,2*e*t*i,0,0,-1,1]},t.M44.rc=function(t,e,n){return t[4*e+n]},t.M44.multiply=function(){return w(4,arguments)},t.M44.invert=function(t){var e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14],f=t[3],p=t[7],m=t[11],g=e*a-n*o,y=e*s-i*o,v=e*l-r*o,b=n*s-i*a,w=n*l-r*a,S=i*l-r*s,_=c*p-h*f,C=c*m-u*f,T=c*(t=t[15])-d*f,A=h*m-u*p,P=h*t-d*p,E=u*t-d*m,k=g*E-y*P+v*A+b*T-w*C+S*_,M=1/k;return 0===k||1/0===M?null:(e=[a*(E*=M)-s*(P*=M)+l*(A*=M),s*(T*=M)-o*E-l*(C*=M),o*P-a*T+l*(_*=M),a*C-o*A-s*_,i*P-n*E-r*A,e*E-i*T+r*C,n*T-e*P-r*_,e*A-n*C+i*_,p*(S*=M)-m*(w*=M)+t*(b*=M),m*(v*=M)-f*S-t*(y*=M),f*w-p*v+t*(g*=M),p*y-f*b-m*g,u*w-h*S-d*b,c*S-u*v+d*y,h*v-c*w-d*g,c*b-h*y+u*g]).every((function(t){return!isNaN(t)&&1/0!==t&&-1/0!==t}))?e:null},t.M44.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},t.M44.mustInvert=function(e){if(null===(e=t.M44.invert(e)))throw"Matrix not invertible";return e},t.M44.setupCamera=function(e,n,i){var r=t.M44.lookat(i.eye,i.coa,i.up);return i=t.M44.perspective(i.near,i.far,i.angle),n=[(e[2]-e[0])/2,(e[3]-e[1])/2,n],e=t.M44.multiply(t.M44.translated([(e[0]+e[2])/2,(e[1]+e[3])/2,0]),t.M44.scaled(n)),t.M44.multiply(e,i,r,t.M44.mustInvert(e))},t.ColorMatrix={},t.ColorMatrix.identity=function(){var t=new Float32Array(20);return t[0]=1,t[6]=1,t[12]=1,t[18]=1,t},t.ColorMatrix.scaled=function(t,e,n,i){var r=new Float32Array(20);return r[0]=t,r[6]=e,r[12]=n,r[18]=i,r};var q,Y=[[6,7,11,12],[0,10,2,12],[0,1,5,6]];t.ColorMatrix.rotated=function(e,n,i){var r=t.ColorMatrix.identity();return r[(e=Y[e])[0]]=i,r[e[1]]=n,r[e[2]]=-n,r[e[3]]=i,r},t.ColorMatrix.postTranslate=function(t,e,n,i,r){return t[4]+=e,t[9]+=n,t[14]+=i,t[19]+=r,t},t.ColorMatrix.concat=function(t,e){for(var n=new Float32Array(20),i=0,r=0;20>r;r+=5){for(var o=0;4>o;o++)n[i++]=t[r]*e[o]+t[r+1]*e[o+5]+t[r+2]*e[o+10]+t[r+3]*e[o+15];n[i++]=t[r]*e[4]+t[r+1]*e[9]+t[r+2]*e[14]+t[r+3]*e[19]+t[r+4]}return n},(q=e).Sd=q.Sd||[],q.Sd.push((function(){function t(t){if(!t||!t.length)return[];for(var e=[],n=0;n<t.length;n+=5){var i=q.LTRBRect(t[n],t[n+1],t[n+2],t[n+3]);i.direction=0===t[n+4]?q.TextDirection.RTL:q.TextDirection.LTR,e.push(i)}return q._free(t.byteOffset),e}function e(t){return void 0===(t=t||{}).weight&&(t.weight=q.FontWeight.Normal),t.width=t.width||q.FontWidth.Normal,t.slant=t.slant||q.FontSlant.Upright,t}function n(t){if(!t||!t.length)return $;for(var e=[],n=0;n<t.length;n++){var r=i(t[n]);e.push(r)}return h(e,"HEAPU32")}function i(t){if(a[t])return a[t];var e=R(t)+1,n=q._malloc(e);return O(t,B,n,e),a[t]=n}function r(t){if(t._colorPtr=f(t.color),t._foregroundColorPtr=$,t._backgroundColorPtr=$,t._decorationColorPtr=$,t.foregroundColor&&(t._foregroundColorPtr=f(t.foregroundColor,s)),t.backgroundColor&&(t._backgroundColorPtr=f(t.backgroundColor,l)),t.decorationColor&&(t._decorationColorPtr=f(t.decorationColor,d)),Array.isArray(t.fontFamilies)&&t.fontFamilies.length?(t._fontFamiliesPtr=n(t.fontFamilies),t._fontFamiliesLen=t.fontFamilies.length):(t._fontFamiliesPtr=$,t._fontFamiliesLen=0),t.locale){var e=t.locale;t._localePtr=i(e),t._localeLen=R(e)+1}else t._localePtr=$,t._localeLen=0;if(Array.isArray(t.shadows)&&t.shadows.length){var r=(e=t.shadows).map((function(t){return t.color||q.BLACK})),o=e.map((function(t){return t.blurRadius||0}));t._shadowLen=e.length;for(var a=q._malloc(8*e.length),c=a/4,p=0;p<e.length;p++){var m=e[p].offset||[0,0];q.HEAPF32[c]=m[0],q.HEAPF32[c+1]=m[1],c+=2}t._shadowColorsPtr=u(r).de,t._shadowOffsetsPtr=a,t._shadowBlurRadiiPtr=h(o,"HEAPF32")}else t._shadowLen=0,t._shadowColorsPtr=$,t._shadowOffsetsPtr=$,t._shadowBlurRadiiPtr=$;Array.isArray(t.fontFeatures)&&t.fontFeatures.length?(r=(e=t.fontFeatures).map((function(t){return t.name})),o=e.map((function(t){return t.value})),t._fontFeatureLen=e.length,t._fontFeatureNamesPtr=n(r),t._fontFeatureValuesPtr=h(o,"HEAPU32")):(t._fontFeatureLen=0,t._fontFeatureNamesPtr=$,t._fontFeatureValuesPtr=$),Array.isArray(t.fontVariations)&&t.fontVariations.length?(r=(e=t.fontVariations).map((function(t){return t.axis})),o=e.map((function(t){return t.value})),t._fontVariationLen=e.length,t._fontVariationAxesPtr=n(r),t._fontVariationValuesPtr=h(o,"HEAPF32")):(t._fontVariationLen=0,t._fontVariationAxesPtr=$,t._fontVariationValuesPtr=$)}function o(t){q._free(t._fontFamiliesPtr),q._free(t._shadowColorsPtr),q._free(t._shadowOffsetsPtr),q._free(t._shadowBlurRadiiPtr),q._free(t._fontFeatureNamesPtr),q._free(t._fontFeatureValuesPtr)}q.Paragraph.prototype.getRectsForRange=function(e,n,i,r){return t(e=this._getRectsForRange(e,n,i,r))},q.Paragraph.prototype.getRectsForPlaceholders=function(){return t(this._getRectsForPlaceholders())},q.TypefaceFontProvider.prototype.registerFont=function(t,e){if(!(t=q.Typeface.MakeFreeTypeFaceFromData(t)))return null;e=i(e),this._registerFont(t,e)},q.ParagraphStyle=function(t){if(t.disableHinting=t.disableHinting||!1,t.ellipsis){var r=t.ellipsis;t._ellipsisPtr=i(r),t._ellipsisLen=R(r)+1}else t._ellipsisPtr=$,t._ellipsisLen=0;return t.heightMultiplier=t.heightMultiplier||0,t.maxLines=t.maxLines||0,t.replaceTabCharacters=t.replaceTabCharacters||!1,(r=(r=t.strutStyle)||{}).strutEnabled=r.strutEnabled||!1,r.strutEnabled&&Array.isArray(r.fontFamilies)&&r.fontFamilies.length?(r._fontFamiliesPtr=n(r.fontFamilies),r._fontFamiliesLen=r.fontFamilies.length):(r._fontFamiliesPtr=$,r._fontFamiliesLen=0),r.fontStyle=e(r.fontStyle),r.fontSize=r.fontSize||0,r.heightMultiplier=r.heightMultiplier||0,r.halfLeading=r.halfLeading||!1,r.leading=r.leading||0,r.forceStrutHeight=r.forceStrutHeight||!1,t.strutStyle=r,t.textAlign=t.textAlign||q.TextAlign.Start,t.textDirection=t.textDirection||q.TextDirection.LTR,t.textHeightBehavior=t.textHeightBehavior||q.TextHeightBehavior.All,t.textStyle=q.TextStyle(t.textStyle),t},q.TextStyle=function(t){return t.color||(t.color=q.BLACK),t.decoration=t.decoration||0,t.decorationThickness=t.decorationThickness||0,t.decorationStyle=t.decorationStyle||q.DecorationStyle.Solid,t.textBaseline=t.textBaseline||q.TextBaseline.Alphabetic,t.fontSize=t.fontSize||0,t.letterSpacing=t.letterSpacing||0,t.wordSpacing=t.wordSpacing||0,t.heightMultiplier=t.heightMultiplier||0,t.halfLeading=t.halfLeading||!1,t.fontStyle=e(t.fontStyle),t};var a={},s=q._malloc(16),l=q._malloc(16),d=q._malloc(16);q.ParagraphBuilder.Make=function(t,e){return r(t.textStyle),e=q.ParagraphBuilder._Make(t,e),o(t.textStyle),e},q.ParagraphBuilder.MakeFromFontProvider=function(t,e){return r(t.textStyle),e=q.ParagraphBuilder._MakeFromFontProvider(t,e),o(t.textStyle),e},q.ParagraphBuilder.ShapeText=function(t,e,n){let i=0;for(const t of e)i+=t.length;if(i!==t.length)throw"Accumulated block lengths must equal text.length";return q.ParagraphBuilder._ShapeText(t,e,n)},q.ParagraphBuilder.prototype.pushStyle=function(t){r(t),this._pushStyle(t),o(t)},q.ParagraphBuilder.prototype.pushPaintStyle=function(t,e,n){r(t),this._pushPaintStyle(t,e,n),o(t)},q.ParagraphBuilder.prototype.addPlaceholder=function(t,e,n,i,r){n=n||q.PlaceholderAlignment.Baseline,i=i||q.TextBaseline.Alphabetic,this._addPlaceholder(t||0,e||0,n,i,r||0)},q.ParagraphBuilder.prototype.buildWithClientInfo=function(t,e,n,i,r){var o=h(t,"HEAPU32"),a=h(e,"HEAPU32"),s=h(n,"HEAPU32"),l=h(i,"HEAPU32"),u=h(r,"HEAPU32"),d=this._buildWithClientInfo(o,t&&t.length||0,a,e&&e.length||0,s,n&&n.length||0,l,i&&i.length||0,u,r&&r.length||0);return c(o,t),c(a,e),c(s,n),c(l,i),c(u,r),d}})),t.MakeManagedAnimation=function(e,n,i,r,o){if(!t._MakeManagedAnimation)throw"Not compiled with MakeManagedAnimation";if(i||(i=""),!n)return t._MakeManagedAnimation(e,0,$,$,$,i,r,o);for(var a=[],s=[],l=[],c=Object.keys(n||{}),u=0;u<c.length;u++){var d=c[u],f=new Uint8Array(n[d]),p=t._malloc(f.byteLength);t.HEAPU8.set(f,p),s.push(p),l.push(f.byteLength),f=R(d)+1,p=t._malloc(f),O(d,B,p,f),a.push(p)}return n=h(a,"HEAPU32"),s=h(s,"HEAPU32"),l=h(l,"HEAPU32"),e=t._MakeManagedAnimation(e,c.length,n,s,l,i,r,o),t._free(n),t._free(s),t._free(l),e},function(t){t.Sd=t.Sd||[],t.Sd.push((function(){t.Animation.prototype.render=function(t,e){g(e,L),this._render(t,L)},t.Animation.prototype.size=function(t){this._size(L);var e=T.toTypedArray();return t?(t[0]=e[0],t[1]=e[1],t):e.slice(0,2)},t.ManagedAnimation&&(t.ManagedAnimation.prototype.render=function(t,e){g(e,L),this._render(t,L)},t.ManagedAnimation.prototype.seek=function(t,e){return this._seek(t,L),t=T.toTypedArray(),e?(e.set(t),e):t.slice()},t.ManagedAnimation.prototype.seekFrame=function(t,e){return this._seekFrame(t,L),t=T.toTypedArray(),e?(e.set(t),e):t.slice()},t.ManagedAnimation.prototype.setColor=function(t,e){return e=f(e),this._setColor(t,e)},t.ManagedAnimation.prototype.size=function(t){this._size(L);var e=T.toTypedArray();return t?(t[0]=e[0],t[1]=e[1],t):e.slice(0,2)})}))}(e),t.MakeParticles=function(e,n){if(!t._MakeParticles)throw"Not compiled with MakeParticles";if(!n)return t._MakeParticles(e,0,$,$,$);for(var i=[],r=[],o=[],a=Object.keys(n||{}),s=0;s<a.length;s++){var l=a[s],c=new Uint8Array(n[l]),u=t._malloc(c.byteLength);t.HEAPU8.set(c,u),r.push(u),o.push(c.byteLength),c=R(l)+1,u=t._malloc(c),O(l,B,u,c),i.push(u)}return n=h(i,"HEAPU32"),r=h(r,"HEAPU32"),o=h(o,"HEAPU32"),e=t._MakeParticles(e,a.length,n,r,o),t._free(n),t._free(r),t._free(o),e},t.Sd=t.Sd||[],t.Sd.push((function(){t.ParticleEffect.prototype.uniforms=function(){var e=this._uniformPtr(),n=this.getUniformFloatCount();return!e||0>=n?new Float32Array:new Float32Array(t.HEAPU8.buffer,e,n)},t.ParticleEffect.prototype.setPosition=function(t){this._setPosition(t[0],t[1])}})),t.Sd=t.Sd||[],t.Sd.push((function(){t.Path.prototype.op=function(t,e){return this._op(t,e)?this:null},t.Path.prototype.simplify=function(){return this._simplify()?this:null}})),t.Sd=t.Sd||[],t.Sd.push((function(){t.Canvas.prototype.drawText=function(e,n,i,r,o){var a=R(e),s=t._malloc(a+1);O(e,B,s,a+1),this._drawSimpleText(s,a,n,i,o,r),t._free(s)},t.Canvas.prototype.drawGlyphs=function(e,n,i,r,o,a){if(!(2*e.length<=n.length))throw"Not enough positions for the array of gyphs";t.Pd(this.Nd);const s=h(e,"HEAPU16"),l=h(n,"HEAPF32");this._drawGlyphs(e.length,s,l,i,r,o,a),c(l,n),c(s,e)},t.Font.prototype.getGlyphBounds=function(e,n,i){var r=h(e,"HEAPU16"),o=t._malloc(16*e.length);return this._getGlyphWidthBounds(r,e.length,$,o,n||null),n=new Float32Array(t.HEAPU8.buffer,o,4*e.length),c(r,e),i?(i.set(n),t._free(o),i):(e=Float32Array.from(n),t._free(o),e)},t.Font.prototype.getGlyphIDs=function(e,n,i){n||(n=e.length);var r=R(e)+1,o=t._malloc(r);return O(e,B,o,r),e=t._malloc(2*n),n=this._getGlyphIDs(o,r-1,n,e),t._free(o),0>n?(t._free(e),null):(o=new Uint16Array(t.HEAPU8.buffer,e,n),i?(i.set(o),t._free(e),i):(i=Uint16Array.from(o),t._free(e),i))},t.Font.prototype.getGlyphIntercepts=function(t,e,n,i){var r=h(t,"HEAPU16"),o=h(e,"HEAPF32");return this._getGlyphIntercepts(r,t.length,!(t&&t._ck),o,e.length,!(e&&e._ck),n,i)},t.Font.prototype.getGlyphWidths=function(e,n,i){var r=h(e,"HEAPU16"),o=t._malloc(4*e.length);return this._getGlyphWidthBounds(r,e.length,o,$,n||null),n=new Float32Array(t.HEAPU8.buffer,o,e.length),c(r,e),i?(i.set(n),t._free(o),i):(e=Float32Array.from(n),t._free(o),e)},t.FontMgr.FromData=function(){if(!arguments.length)return null;var e=arguments;if(1===e.length&&Array.isArray(e[0])&&(e=arguments[0]),!e.length)return null;for(var n=[],i=[],r=0;r<e.length;r++){var o=new Uint8Array(e[r]),a=h(o,"HEAPU8");n.push(a),i.push(o.byteLength)}return n=h(n,"HEAPU32"),i=h(i,"HEAPU32"),e=t.FontMgr._fromData(n,i,e.length),t._free(n),t._free(i),e},t.Typeface.MakeFreeTypeFaceFromData=function(e){var n=h(e=new Uint8Array(e),"HEAPU8");return(e=t.Typeface._MakeFreeTypeFaceFromData(n,e.byteLength))?e:null},t.Typeface.prototype.getGlyphIDs=function(e,n,i){n||(n=e.length);var r=R(e)+1,o=t._malloc(r);return O(e,B,o,r),e=t._malloc(2*n),n=this._getGlyphIDs(o,r-1,n,e),t._free(o),0>n?(t._free(e),null):(o=new Uint16Array(t.HEAPU8.buffer,e,n),i?(i.set(o),t._free(e),i):(i=Uint16Array.from(o),t._free(e),i))},t.TextBlob.MakeOnPath=function(e,n,i,r){if(e&&e.length&&n&&n.countPoints()){if(1===n.countPoints())return this.MakeFromText(e,i);r||(r=0);var o=i.getGlyphIDs(e);o=i.getGlyphWidths(o);for(var a=[],s=(n=new t.ContourMeasureIter(n,!1,1)).next(),l=new Float32Array(4),c=0;c<e.length&&s;c++){var h=o[c];if((r+=h/2)>s.length()){if(s.delete(),!(s=n.next())){e=e.substring(0,c);break}r=h/2}s.getPosTan(r,l);var u=l[2],d=l[3];a.push(u,d,l[0]-h/2*u,l[1]-h/2*d),r+=h/2}return e=this.MakeFromRSXform(e,a,i),s&&s.delete(),n.delete(),e}},t.TextBlob.MakeFromRSXform=function(e,n,i){var r=R(e)+1,o=t._malloc(r);return O(e,B,o,r),e=h(n,"HEAPF32"),i=t.TextBlob._MakeFromRSXform(o,r-1,e,i),t._free(o),i||null},t.TextBlob.MakeFromRSXformGlyphs=function(e,n,i){var r=h(e,"HEAPU16");return n=h(n,"HEAPF32"),i=t.TextBlob._MakeFromRSXformGlyphs(r,2*e.length,n,i),c(r,e),i||null},t.TextBlob.MakeFromGlyphs=function(e,n){var i=h(e,"HEAPU16");return n=t.TextBlob._MakeFromGlyphs(i,2*e.length,n),c(i,e),n||null},t.TextBlob.MakeFromText=function(e,n){var i=R(e)+1,r=t._malloc(i);return O(e,B,r,i),e=t.TextBlob._MakeFromText(r,i-1,n),t._free(r),e||null},t.MallocGlyphIDs=function(e){return t.Malloc(Uint16Array,e)}})),t.Sd=t.Sd||[],t.Sd.push((function(){t.MakePicture=function(e){e=new Uint8Array(e);var n=t._malloc(e.byteLength);return t.HEAPU8.set(e,n),(e=t._MakePicture(n,e.byteLength))?e:null}})),t.Sd=t.Sd||[],t.Sd.push((function(){t.RuntimeEffect.Make=function(e,n){return t.RuntimeEffect._Make(e,{onError:n||function(t){console.log("RuntimeEffect error",t)}})},t.RuntimeEffect.prototype.makeShader=function(t,e){var n=!t._ck,i=h(t,"HEAPF32");return e=d(e),this._makeShader(i,4*t.length,n,e)},t.RuntimeEffect.prototype.makeShaderWithChildren=function(t,e,n){var i=!t._ck,r=h(t,"HEAPF32");n=d(n);for(var o=[],a=0;a<e.length;a++)o.push(e[a].Md.Vd);return e=h(o,"HEAPU32"),this._makeShaderWithChildren(r,4*t.length,i,e,o.length,n)}})),function(){function e(t){for(var e=0;e<t.length;e++)if(void 0!==t[e]&&!Number.isFinite(t[e]))return!1;return!0}function n(e){var n=t.getColorComponents(e);e=n[0];var i=n[1],r=n[2];return 1===(n=n[3])?(e=e.toString(16).toLowerCase(),i=i.toString(16).toLowerCase(),r=r.toString(16).toLowerCase(),"#"+(e=1===e.length?"0"+e:e)+(i=1===i.length?"0"+i:i)+(r=1===r.length?"0"+r:r)):"rgba("+e+", "+i+", "+r+", "+(n=0===n||1===n?n:n.toFixed(8))+")"}function i(e){return t.parseColorString(e,b)}function o(t){if(!(t=w.exec(t)))return null;var e=parseFloat(t[4]),n=16;switch(t[5]){case"em":case"rem":case"pc":n=16*e;break;case"pt":n=4*e/3;break;case"px":n=e;break;case"in":n=96*e;break;case"cm":n=96*e/2.54;break;case"mm":n=96/25.4*e;break;case"q":n=96/25.4/4*e;break;case"%":n=16/75*e}return{style:t[1],variant:t[2],weight:t[3],sizePx:n,family:t[6].trim()}}function a(a){this.Od=a,this.Rd=new t.Paint,this.Rd.setAntiAlias(!0),this.Rd.setStrokeMiter(10),this.Rd.setStrokeCap(t.StrokeCap.Butt),this.Rd.setStrokeJoin(t.StrokeJoin.Miter),this.Re="10px monospace",this.oe=new t.Font(null,10),this.oe.setSubpixel(!0),this.ce=this.ie=t.BLACK,this.xe=0,this.Ke=t.TRANSPARENT,this.ze=this.ye=0,this.Le=this.le=1,this.Je=0,this.we=[],this.Qd=t.BlendMode.SrcOver,this.Rd.setStrokeWidth(this.Le),this.Rd.setBlendMode(this.Qd),this.Ud=new t.Path,this.Wd=t.Matrix.identity(),this.nf=[],this.De=[],this.ne=function(){this.Ud.delete(),this.Rd.delete(),this.oe.delete(),this.De.forEach((function(t){t.ne()}))},Object.defineProperty(this,"currentTransform",{enumerable:!0,get:function(){return{a:this.Wd[0],c:this.Wd[1],e:this.Wd[2],b:this.Wd[3],d:this.Wd[4],f:this.Wd[5]}},set:function(t){t.a&&this.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}}),Object.defineProperty(this,"fillStyle",{enumerable:!0,get:function(){return r(this.ce)?n(this.ce):this.ce},set:function(t){"string"==typeof t?this.ce=i(t):t.ve&&(this.ce=t)}}),Object.defineProperty(this,"font",{enumerable:!0,get:function(){return this.Re},set:function(t){var e=o(t),n=e.family;e.typeface=S[n]?S[n][(e.style||"normal")+"|"+(e.variant||"normal")+"|"+(e.weight||"normal")]||S[n]["*"]:null,e&&(this.oe.setSize(e.sizePx),this.oe.setTypeface(e.typeface),this.Re=t)}}),Object.defineProperty(this,"globalAlpha",{enumerable:!0,get:function(){return this.le},set:function(t){!isFinite(t)||0>t||1<t||(this.le=t)}}),Object.defineProperty(this,"globalCompositeOperation",{enumerable:!0,get:function(){switch(this.Qd){case t.BlendMode.SrcOver:return"source-over";case t.BlendMode.DstOver:return"destination-over";case t.BlendMode.Src:return"copy";case t.BlendMode.Dst:return"destination";case t.BlendMode.Clear:return"clear";case t.BlendMode.SrcIn:return"source-in";case t.BlendMode.DstIn:return"destination-in";case t.BlendMode.SrcOut:return"source-out";case t.BlendMode.DstOut:return"destination-out";case t.BlendMode.SrcATop:return"source-atop";case t.BlendMode.DstATop:return"destination-atop";case t.BlendMode.Xor:return"xor";case t.BlendMode.Plus:return"lighter";case t.BlendMode.Multiply:return"multiply";case t.BlendMode.Screen:return"screen";case t.BlendMode.Overlay:return"overlay";case t.BlendMode.Darken:return"darken";case t.BlendMode.Lighten:return"lighten";case t.BlendMode.ColorDodge:return"color-dodge";case t.BlendMode.ColorBurn:return"color-burn";case t.BlendMode.HardLight:return"hard-light";case t.BlendMode.SoftLight:return"soft-light";case t.BlendMode.Difference:return"difference";case t.BlendMode.Exclusion:return"exclusion";case t.BlendMode.Hue:return"hue";case t.BlendMode.Saturation:return"saturation";case t.BlendMode.Color:return"color";case t.BlendMode.Luminosity:return"luminosity"}},set:function(e){switch(e){case"source-over":this.Qd=t.BlendMode.SrcOver;break;case"destination-over":this.Qd=t.BlendMode.DstOver;break;case"copy":this.Qd=t.BlendMode.Src;break;case"destination":this.Qd=t.BlendMode.Dst;break;case"clear":this.Qd=t.BlendMode.Clear;break;case"source-in":this.Qd=t.BlendMode.SrcIn;break;case"destination-in":this.Qd=t.BlendMode.DstIn;break;case"source-out":this.Qd=t.BlendMode.SrcOut;break;case"destination-out":this.Qd=t.BlendMode.DstOut;break;case"source-atop":this.Qd=t.BlendMode.SrcATop;break;case"destination-atop":this.Qd=t.BlendMode.DstATop;break;case"xor":this.Qd=t.BlendMode.Xor;break;case"lighter":case"plus-lighter":this.Qd=t.BlendMode.Plus;break;case"plus-darker":throw"plus-darker is not supported";case"multiply":this.Qd=t.BlendMode.Multiply;break;case"screen":this.Qd=t.BlendMode.Screen;break;case"overlay":this.Qd=t.BlendMode.Overlay;break;case"darken":this.Qd=t.BlendMode.Darken;break;case"lighten":this.Qd=t.BlendMode.Lighten;break;case"color-dodge":this.Qd=t.BlendMode.ColorDodge;break;case"color-burn":this.Qd=t.BlendMode.ColorBurn;break;case"hard-light":this.Qd=t.BlendMode.HardLight;break;case"soft-light":this.Qd=t.BlendMode.SoftLight;break;case"difference":this.Qd=t.BlendMode.Difference;break;case"exclusion":this.Qd=t.BlendMode.Exclusion;break;case"hue":this.Qd=t.BlendMode.Hue;break;case"saturation":this.Qd=t.BlendMode.Saturation;break;case"color":this.Qd=t.BlendMode.Color;break;case"luminosity":this.Qd=t.BlendMode.Luminosity;break;default:return}this.Rd.setBlendMode(this.Qd)}}),Object.defineProperty(this,"imageSmoothingEnabled",{enumerable:!0,get:function(){return!0},set:function(){}}),Object.defineProperty(this,"imageSmoothingQuality",{enumerable:!0,get:function(){return"high"},set:function(){}}),Object.defineProperty(this,"lineCap",{enumerable:!0,get:function(){switch(this.Rd.getStrokeCap()){case t.StrokeCap.Butt:return"butt";case t.StrokeCap.Round:return"round";case t.StrokeCap.Square:return"square"}},set:function(e){switch(e){case"butt":this.Rd.setStrokeCap(t.StrokeCap.Butt);break;case"round":this.Rd.setStrokeCap(t.StrokeCap.Round);break;case"square":this.Rd.setStrokeCap(t.StrokeCap.Square)}}}),Object.defineProperty(this,"lineDashOffset",{enumerable:!0,get:function(){return this.Je},set:function(t){isFinite(t)&&(this.Je=t)}}),Object.defineProperty(this,"lineJoin",{enumerable:!0,get:function(){switch(this.Rd.getStrokeJoin()){case t.StrokeJoin.Miter:return"miter";case t.StrokeJoin.Round:return"round";case t.StrokeJoin.Bevel:return"bevel"}},set:function(e){switch(e){case"miter":this.Rd.setStrokeJoin(t.StrokeJoin.Miter);break;case"round":this.Rd.setStrokeJoin(t.StrokeJoin.Round);break;case"bevel":this.Rd.setStrokeJoin(t.StrokeJoin.Bevel)}}}),Object.defineProperty(this,"lineWidth",{enumerable:!0,get:function(){return this.Rd.getStrokeWidth()},set:function(t){0>=t||!t||(this.Le=t,this.Rd.setStrokeWidth(t))}}),Object.defineProperty(this,"miterLimit",{enumerable:!0,get:function(){return this.Rd.getStrokeMiter()},set:function(t){0>=t||!t||this.Rd.setStrokeMiter(t)}}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,get:function(){return this.xe},set:function(t){0>t||!isFinite(t)||(this.xe=t)}}),Object.defineProperty(this,"shadowColor",{enumerable:!0,get:function(){return n(this.Ke)},set:function(t){this.Ke=i(t)}}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,get:function(){return this.ye},set:function(t){isFinite(t)&&(this.ye=t)}}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,get:function(){return this.ze},set:function(t){isFinite(t)&&(this.ze=t)}}),Object.defineProperty(this,"strokeStyle",{enumerable:!0,get:function(){return n(this.ie)},set:function(t){"string"==typeof t?this.ie=i(t):t.ve&&(this.ie=t)}}),this.arc=function(t,e,n,i,r,o){p(this.Ud,t,e,n,n,0,i,r,o)},this.arcTo=function(t,e,n,i,r){u(this.Ud,t,e,n,i,r)},this.beginPath=function(){this.Ud.delete(),this.Ud=new t.Path},this.bezierCurveTo=function(t,n,i,r,o,a){var s=this.Ud;e([t,n,i,r,o,a])&&(s.isEmpty()&&s.moveTo(t,n),s.cubicTo(t,n,i,r,o,a))},this.clearRect=function(e,n,i,r){this.Rd.setStyle(t.PaintStyle.Fill),this.Rd.setBlendMode(t.BlendMode.Clear),this.Od.drawRect(t.XYWHRect(e,n,i,r),this.Rd),this.Rd.setBlendMode(this.Qd)},this.clip=function(e,n){"string"==typeof e?(n=e,e=this.Ud):e&&e.$e&&(e=e.Xd),e||(e=this.Ud),e=e.copy(),n&&"evenodd"===n.toLowerCase()?e.setFillType(t.FillType.EvenOdd):e.setFillType(t.FillType.Winding),this.Od.clipPath(e,t.ClipOp.Intersect,!0),e.delete()},this.closePath=function(){d(this.Ud)},this.createImageData=function(){if(1===arguments.length){var t=arguments[0];return new c(new Uint8ClampedArray(4*t.width*t.height),t.width,t.height)}if(2===arguments.length){t=arguments[0];var e=arguments[1];return new c(new Uint8ClampedArray(4*t*e),t,e)}throw"createImageData expects 1 or 2 arguments, got "+arguments.length},this.createLinearGradient=function(t,n,i,r){if(e(arguments)){var o=new h(t,n,i,r);return this.De.push(o),o}},this.createPattern=function(t,e){return t=new y(t,e),this.De.push(t),t},this.createRadialGradient=function(t,n,i,r,o,a){if(e(arguments)){var s=new v(t,n,i,r,o,a);return this.De.push(s),s}},this.drawImage=function(e){e instanceof l&&(e=e.uf());var n=this.Qe();if(3===arguments.length||5===arguments.length)var i=t.XYWHRect(arguments[1],arguments[2],arguments[3]||e.width(),arguments[4]||e.height()),r=t.XYWHRect(0,0,e.width(),e.height());else{if(9!==arguments.length)throw"invalid number of args for drawImage, need 3, 5, or 9; got "+arguments.length;i=t.XYWHRect(arguments[5],arguments[6],arguments[7],arguments[8]),r=t.XYWHRect(arguments[1],arguments[2],arguments[3],arguments[4])}this.Od.drawImageRect(e,r,i,n,!1),n.dispose()},this.ellipse=function(t,e,n,i,r,o,a,s){p(this.Ud,t,e,n,i,r,o,a,s)},this.Qe=function(){var e=this.Rd.copy();if(e.setStyle(t.PaintStyle.Fill),r(this.ce)){var n=t.multiplyByAlpha(this.ce,this.le);e.setColor(n)}else n=this.ce.ve(this.Wd),e.setColor(t.Color(0,0,0,this.le)),e.setShader(n);return e.dispose=function(){this.delete()},e},this.fill=function(e,n){if("string"==typeof e?(n=e,e=this.Ud):e&&e.$e&&(e=e.Xd),"evenodd"===n)this.Ud.setFillType(t.FillType.EvenOdd);else{if("nonzero"!==n&&n)throw"invalid fill rule";this.Ud.setFillType(t.FillType.Winding)}e||(e=this.Ud),n=this.Qe();var i=this.Ae(n);i&&(this.Od.save(),this.te(),this.Od.drawPath(e,i),this.Od.restore(),i.dispose()),this.Od.drawPath(e,n),n.dispose()},this.fillRect=function(e,n,i,r){var o=this.Qe(),a=this.Ae(o);a&&(this.Od.save(),this.te(),this.Od.drawRect(t.XYWHRect(e,n,i,r),a),this.Od.restore(),a.dispose()),this.Od.drawRect(t.XYWHRect(e,n,i,r),o),o.dispose()},this.fillText=function(e,n,i){var r=this.Qe();e=t.TextBlob.MakeFromText(e,this.oe);var o=this.Ae(r);o&&(this.Od.save(),this.te(),this.Od.drawTextBlob(e,n,i,o),this.Od.restore(),o.dispose()),this.Od.drawTextBlob(e,n,i,r),e.delete(),r.dispose()},this.getImageData=function(e,n,i,r){return(e=this.Od.readPixels(e,n,{width:i,height:r,colorType:t.ColorType.RGBA_8888,alphaType:t.AlphaType.Unpremul,colorSpace:t.ColorSpace.SRGB}))?new c(new Uint8ClampedArray(e.buffer),i,r):null},this.getLineDash=function(){return this.we.slice()},this.pf=function(e){var n=t.Matrix.invert(this.Wd);return t.Matrix.mapPoints(n,e),e},this.isPointInPath=function(e,n,i){var r=arguments;if(3===r.length)var o=this.Ud;else{if(4!==r.length)throw"invalid arg count, need 3 or 4, got "+r.length;o=r[0],e=r[1],n=r[2],i=r[3]}return!(!isFinite(e)||!isFinite(n))&&("nonzero"===(i=i||"nonzero")||"evenodd"===i)&&(e=(r=this.pf([e,n]))[0],n=r[1],o.setFillType("nonzero"===i?t.FillType.Winding:t.FillType.EvenOdd),o.contains(e,n))},this.isPointInStroke=function(e,n){var i=arguments;if(2===i.length)var r=this.Ud;else{if(3!==i.length)throw"invalid arg count, need 2 or 3, got "+i.length;r=i[0],e=i[1],n=i[2]}return!(!isFinite(e)||!isFinite(n))&&(e=(i=this.pf([e,n]))[0],n=i[1],(r=r.copy()).setFillType(t.FillType.Winding),r.stroke({width:this.lineWidth,miter_limit:this.miterLimit,cap:this.Rd.getStrokeCap(),join:this.Rd.getStrokeJoin(),precision:.3}),i=r.contains(e,n),r.delete(),i)},this.lineTo=function(t,e){m(this.Ud,t,e)},this.measureText=function(t){t=this.oe.getGlyphIDs(t),t=this.oe.getGlyphWidths(t);let e=0;for(const n of t)e+=n;return{width:e}},this.moveTo=function(t,n){var i=this.Ud;e([t,n])&&i.moveTo(t,n)},this.putImageData=function(n,i,r,o,a,s,l){if(e([i,r,o,a,s,l]))if(void 0===o)this.Od.writePixels(n.data,n.width,n.height,i,r);else if(o=o||0,a=a||0,s=s||n.width,l=l||n.height,0>s&&(o+=s,s=Math.abs(s)),0>l&&(a+=l,l=Math.abs(l)),0>o&&(s+=o,o=0),0>a&&(l+=a,a=0),!(0>=s||0>=l)){n=t.MakeImage({width:n.width,height:n.height,alphaType:t.AlphaType.Unpremul,colorType:t.ColorType.RGBA_8888,colorSpace:t.ColorSpace.SRGB},n.data,4*n.width);var c=t.XYWHRect(o,a,s,l);i=t.XYWHRect(i+o,r+a,s,l),r=t.Matrix.invert(this.Wd),this.Od.save(),this.Od.concat(r),this.Od.drawImageRect(n,c,i,null,!1),this.Od.restore(),n.delete()}},this.quadraticCurveTo=function(t,n,i,r){var o=this.Ud;e([t,n,i,r])&&(o.isEmpty()&&o.moveTo(t,n),o.quadTo(t,n,i,r))},this.rect=function(n,i,r,o){var a=this.Ud;e(n=t.XYWHRect(n,i,r,o))&&a.addRect(n)},this.resetTransform=function(){this.Ud.transform(this.Wd);var e=t.Matrix.invert(this.Wd);this.Od.concat(e),this.Wd=this.Od.getTotalMatrix()},this.restore=function(){var e=this.nf.pop();if(e){var n=t.Matrix.multiply(this.Wd,t.Matrix.invert(e.Hf));this.Ud.transform(n),this.Rd.delete(),this.Rd=e.ag,this.we=e.Zf,this.Le=e.ng,this.ie=e.mg,this.ce=e.fs,this.ye=e.kg,this.ze=e.lg,this.xe=e.eg,this.Ke=e.jg,this.le=e.Of,this.Qd=e.Pf,this.Je=e.$f,this.Re=e.Nf,this.Od.restore(),this.Wd=this.Od.getTotalMatrix()}},this.rotate=function(e){if(isFinite(e)){var n=t.Matrix.rotated(-e);this.Ud.transform(n),this.Od.rotate(e/Math.PI*180,0,0),this.Wd=this.Od.getTotalMatrix()}},this.save=function(){if(this.ce.ue){var t=this.ce.ue();this.De.push(t)}else t=this.ce;if(this.ie.ue){var e=this.ie.ue();this.De.push(e)}else e=this.ie;this.nf.push({Hf:this.Wd.slice(),Zf:this.we.slice(),ng:this.Le,mg:e,fs:t,kg:this.ye,lg:this.ze,eg:this.xe,jg:this.Ke,Of:this.le,$f:this.Je,Pf:this.Qd,ag:this.Rd.copy(),Nf:this.Re}),this.Od.save()},this.scale=function(n,i){if(e(arguments)){var r=t.Matrix.scaled(1/n,1/i);this.Ud.transform(r),this.Od.scale(n,i),this.Wd=this.Od.getTotalMatrix()}},this.setLineDash=function(t){for(var e=0;e<t.length;e++)if(!isFinite(t[e])||0>t[e])return;1==t.length%2&&Array.prototype.push.apply(t,t),this.we=t},this.setTransform=function(t,n,i,r,o,a){e(arguments)&&(this.resetTransform(),this.transform(t,n,i,r,o,a))},this.te=function(){var e=t.Matrix.invert(this.Wd);this.Od.concat(e),this.Od.concat(t.Matrix.translated(this.ye,this.ze)),this.Od.concat(this.Wd)},this.Ae=function(e){var n=t.multiplyByAlpha(this.Ke,this.le);if(!t.getColorComponents(n)[3]||!(this.xe||this.ze||this.ye))return null;(e=e.copy()).setColor(n);var i=t.MaskFilter.MakeBlur(t.BlurStyle.Normal,this.xe/2,!1);return e.setMaskFilter(i),e.dispose=function(){i.delete(),this.delete()},e},this.bf=function(){var e=this.Rd.copy();if(e.setStyle(t.PaintStyle.Stroke),r(this.ie)){var n=t.multiplyByAlpha(this.ie,this.le);e.setColor(n)}else n=this.ie.ve(this.Wd),e.setColor(t.Color(0,0,0,this.le)),e.setShader(n);if(e.setStrokeWidth(this.Le),this.we.length){var i=t.PathEffect.MakeDash(this.we,this.Je);e.setPathEffect(i)}return e.dispose=function(){i&&i.delete(),this.delete()},e},this.stroke=function(t){t=t?t.Xd:this.Ud;var e=this.bf(),n=this.Ae(e);n&&(this.Od.save(),this.te(),this.Od.drawPath(t,n),this.Od.restore(),n.dispose()),this.Od.drawPath(t,e),e.dispose()},this.strokeRect=function(e,n,i,r){var o=this.bf(),a=this.Ae(o);a&&(this.Od.save(),this.te(),this.Od.drawRect(t.XYWHRect(e,n,i,r),a),this.Od.restore(),a.dispose()),this.Od.drawRect(t.XYWHRect(e,n,i,r),o),o.dispose()},this.strokeText=function(e,n,i){var r=this.bf();e=t.TextBlob.MakeFromText(e,this.oe);var o=this.Ae(r);o&&(this.Od.save(),this.te(),this.Od.drawTextBlob(e,n,i,o),this.Od.restore(),o.dispose()),this.Od.drawTextBlob(e,n,i,r),e.delete(),r.dispose()},this.translate=function(n,i){if(e(arguments)){var r=t.Matrix.translated(-n,-i);this.Ud.transform(r),this.Od.translate(n,i),this.Wd=this.Od.getTotalMatrix()}},this.transform=function(e,n,i,r,o,a){e=[e,i,o,n,r,a,0,0,1],n=t.Matrix.invert(e),this.Ud.transform(n),this.Od.concat(e),this.Wd=this.Od.getTotalMatrix()},this.addHitRegion=function(){},this.clearHitRegions=function(){},this.drawFocusIfNeeded=function(){},this.removeHitRegion=function(){},this.scrollPathIntoView=function(){},Object.defineProperty(this,"canvas",{value:null,writable:!1})}function s(e){this.cf=e,this.Nd=new a(e.getCanvas()),this.Se=[],this.decodeImage=function(e){if(!(e=t.MakeImageFromEncoded(e)))throw"Invalid input";return this.Se.push(e),new l(e)},this.loadFont=function(e,n){if(!(e=t.Typeface.MakeFreeTypeFaceFromData(e)))return null;this.Se.push(e);var i=(n.style||"normal")+"|"+(n.variant||"normal")+"|"+(n.weight||"normal");n=n.family,S[n]||(S[n]={"*":e}),S[n][i]=e},this.makePath2D=function(t){return t=new g(t),this.Se.push(t.Xd),t},this.getContext=function(t){return"2d"===t?this.Nd:null},this.toDataURL=function(e,n){this.cf.flush();var i=this.cf.makeImageSnapshot();if(i){e=e||"image/png";var r=t.ImageFormat.PNG;if("image/jpeg"===e&&(r=t.ImageFormat.JPEG),n=i.encodeToBytes(r,n||.92)){if(i.delete(),e="data:"+e+";base64,","undefined"!=typeof Buffer)n=Buffer.from(n).toString("base64");else{i=0,r=n.length;for(var o,a="";i<r;)o=n.slice(i,Math.min(i+32768,r)),a+=String.fromCharCode.apply(null,o),i+=32768;n=btoa(a)}return e+n}}},this.dispose=function(){this.Nd.ne(),this.Se.forEach((function(t){t.delete()})),this.cf.dispose()}}function l(t){this.width=t.width(),this.height=t.height(),this.naturalWidth=this.width,this.naturalHeight=this.height,this.uf=function(){return t}}function c(t,e,n){if(!e||0===n)throw"invalid dimensions, width and height must be non-zero";if(t.length%4)throw"arr must be a multiple of 4";n=n||t.length/(4*e),Object.defineProperty(this,"data",{value:t,writable:!1}),Object.defineProperty(this,"height",{value:n,writable:!1}),Object.defineProperty(this,"width",{value:e,writable:!1})}function h(e,n,r,o){this.Zd=null,this.ee=[],this.be=[],this.addColorStop=function(t,e){if(0>t||1<t||!isFinite(t))throw"offset must be between 0 and 1 inclusively";e=i(e);var n=this.be.indexOf(t);if(-1!==n)this.ee[n]=e;else{for(n=0;n<this.be.length&&!(this.be[n]>t);n++);this.be.splice(n,0,t),this.ee.splice(n,0,e)}},this.ue=function(){var t=new h(e,n,r,o);return t.ee=this.ee.slice(),t.be=this.be.slice(),t},this.ne=function(){this.Zd&&(this.Zd.delete(),this.Zd=null)},this.ve=function(i){var a=[e,n,r,o];t.Matrix.mapPoints(i,a),i=a[0];var s=a[1],l=a[2];return a=a[3],this.ne(),this.Zd=t.Shader.MakeLinearGradient([i,s],[l,a],this.ee,this.be,t.TileMode.Clamp)}}function u(t,n,i,r,o,a){if(e([n,i,r,o,a])){if(0>a)throw"radii cannot be negative";t.isEmpty()&&t.moveTo(n,i),t.arcToTangent(n,i,r,o,a)}}function d(t){if(!t.isEmpty()){var e=t.getBounds();(e[3]-e[1]||e[2]-e[0])&&t.close()}}function f(e,n,i,r,o,a,s){s=(s-a)/Math.PI*180,a=a/Math.PI*180,n=t.LTRBRect(n-r,i-o,n+r,i+o),1e-5>Math.abs(Math.abs(s)-360)?(i=s/2,e.arcToOval(n,a,i,!1),e.arcToOval(n,a+i,i,!1)):e.arcToOval(n,a,s,!1)}function p(n,i,r,o,a,s,l,c,h){if(e([i,r,o,a,s,l,c])){if(0>o||0>a)throw"radii cannot be negative";var u=2*Math.PI,d=l%u;0>d&&(d+=u);var p=d-l;l=d,c+=p,!h&&c-l>=u?c=l+u:h&&l-c>=u?c=l-u:!h&&l>c?c=l+(u-(l-c)%u):h&&l<c&&(c=l-(u-(c-l)%u)),s?(h=t.Matrix.rotated(s,i,r),s=t.Matrix.rotated(-s,i,r),n.transform(s),f(n,i,r,o,a,l,c),n.transform(h)):f(n,i,r,o,a,l,c)}}function m(t,n,i){e([n,i])&&(t.isEmpty()&&t.moveTo(n,i),t.lineTo(n,i))}function g(n){this.Xd=null,this.Xd="string"==typeof n?t.Path.MakeFromSVGString(n):n&&n.$e?n.Xd.copy():new t.Path,this.$e=function(){return this.Xd},this.addPath=function(t,e){e||(e={a:1,c:0,e:0,b:0,d:1,f:0}),this.Xd.addPath(t.Xd,[e.a,e.c,e.e,e.b,e.d,e.f])},this.arc=function(t,e,n,i,r,o){p(this.Xd,t,e,n,n,0,i,r,o)},this.arcTo=function(t,e,n,i,r){u(this.Xd,t,e,n,i,r)},this.bezierCurveTo=function(t,n,i,r,o,a){var s=this.Xd;e([t,n,i,r,o,a])&&(s.isEmpty()&&s.moveTo(t,n),s.cubicTo(t,n,i,r,o,a))},this.closePath=function(){d(this.Xd)},this.ellipse=function(t,e,n,i,r,o,a,s){p(this.Xd,t,e,n,i,r,o,a,s)},this.lineTo=function(t,e){m(this.Xd,t,e)},this.moveTo=function(t,n){var i=this.Xd;e([t,n])&&i.moveTo(t,n)},this.quadraticCurveTo=function(t,n,i,r){var o=this.Xd;e([t,n,i,r])&&(o.isEmpty()&&o.moveTo(t,n),o.quadTo(t,n,i,r))},this.rect=function(n,i,r,o){var a=this.Xd;e(n=t.XYWHRect(n,i,r,o))&&a.addRect(n)}}function y(n,i){switch(this.Zd=null,n instanceof l&&(n=n.uf()),this.Cf=n,this._transform=t.Matrix.identity(),""===i&&(i="repeat"),i){case"repeat-x":this.Be=t.TileMode.Repeat,this.Ce=t.TileMode.Decal;break;case"repeat-y":this.Be=t.TileMode.Decal,this.Ce=t.TileMode.Repeat;break;case"repeat":this.Ce=this.Be=t.TileMode.Repeat;break;case"no-repeat":this.Ce=this.Be=t.TileMode.Decal;break;default:throw"invalid repetition mode "+i}this.setTransform=function(t){e(t=[t.a,t.c,t.e,t.b,t.d,t.f,0,0,1])&&(this._transform=t)},this.ue=function(){var t=new y;return t.Be=this.Be,t.Ce=this.Ce,t},this.ne=function(){this.Zd&&(this.Zd.delete(),this.Zd=null)},this.ve=function(){return this.ne(),this.Zd=this.Cf.makeShaderCubic(this.Be,this.Ce,1/3,1/3,this._transform)}}function v(e,n,r,o,a,s){this.Zd=null,this.ee=[],this.be=[],this.addColorStop=function(t,e){if(0>t||1<t||!isFinite(t))throw"offset must be between 0 and 1 inclusively";e=i(e);var n=this.be.indexOf(t);if(-1!==n)this.ee[n]=e;else{for(n=0;n<this.be.length&&!(this.be[n]>t);n++);this.be.splice(n,0,t),this.ee.splice(n,0,e)}},this.ue=function(){var t=new v(e,n,r,o,a,s);return t.ee=this.ee.slice(),t.be=this.be.slice(),t},this.ne=function(){this.Zd&&(this.Zd.delete(),this.Zd=null)},this.ve=function(i){var l=[e,n,o,a];t.Matrix.mapPoints(i,l);var c=l[0],h=l[1],u=l[2];l=l[3];var d=(Math.abs(i[0])+Math.abs(i[4]))/2;return i=r*d,d*=s,this.ne(),this.Zd=t.Shader.MakeTwoPointConicalGradient([c,h],i,[u,l],d,this.ee,this.be,t.TileMode.Clamp)}}t._testing={};var b={aliceblue:Float32Array.of(.941,.973,1,1),antiquewhite:Float32Array.of(.98,.922,.843,1),aqua:Float32Array.of(0,1,1,1),aquamarine:Float32Array.of(.498,1,.831,1),azure:Float32Array.of(.941,1,1,1),beige:Float32Array.of(.961,.961,.863,1),bisque:Float32Array.of(1,.894,.769,1),black:Float32Array.of(0,0,0,1),blanchedalmond:Float32Array.of(1,.922,.804,1),blue:Float32Array.of(0,0,1,1),blueviolet:Float32Array.of(.541,.169,.886,1),brown:Float32Array.of(.647,.165,.165,1),burlywood:Float32Array.of(.871,.722,.529,1),cadetblue:Float32Array.of(.373,.62,.627,1),chartreuse:Float32Array.of(.498,1,0,1),chocolate:Float32Array.of(.824,.412,.118,1),coral:Float32Array.of(1,.498,.314,1),cornflowerblue:Float32Array.of(.392,.584,.929,1),cornsilk:Float32Array.of(1,.973,.863,1),crimson:Float32Array.of(.863,.078,.235,1),cyan:Float32Array.of(0,1,1,1),darkblue:Float32Array.of(0,0,.545,1),darkcyan:Float32Array.of(0,.545,.545,1),darkgoldenrod:Float32Array.of(.722,.525,.043,1),darkgray:Float32Array.of(.663,.663,.663,1),darkgreen:Float32Array.of(0,.392,0,1),darkgrey:Float32Array.of(.663,.663,.663,1),darkkhaki:Float32Array.of(.741,.718,.42,1),darkmagenta:Float32Array.of(.545,0,.545,1),darkolivegreen:Float32Array.of(.333,.42,.184,1),darkorange:Float32Array.of(1,.549,0,1),darkorchid:Float32Array.of(.6,.196,.8,1),darkred:Float32Array.of(.545,0,0,1),darksalmon:Float32Array.of(.914,.588,.478,1),darkseagreen:Float32Array.of(.561,.737,.561,1),darkslateblue:Float32Array.of(.282,.239,.545,1),darkslategray:Float32Array.of(.184,.31,.31,1),darkslategrey:Float32Array.of(.184,.31,.31,1),darkturquoise:Float32Array.of(0,.808,.82,1),darkviolet:Float32Array.of(.58,0,.827,1),deeppink:Float32Array.of(1,.078,.576,1),deepskyblue:Float32Array.of(0,.749,1,1),dimgray:Float32Array.of(.412,.412,.412,1),dimgrey:Float32Array.of(.412,.412,.412,1),dodgerblue:Float32Array.of(.118,.565,1,1),firebrick:Float32Array.of(.698,.133,.133,1),floralwhite:Float32Array.of(1,.98,.941,1),forestgreen:Float32Array.of(.133,.545,.133,1),fuchsia:Float32Array.of(1,0,1,1),gainsboro:Float32Array.of(.863,.863,.863,1),ghostwhite:Float32Array.of(.973,.973,1,1),gold:Float32Array.of(1,.843,0,1),goldenrod:Float32Array.of(.855,.647,.125,1),gray:Float32Array.of(.502,.502,.502,1),green:Float32Array.of(0,.502,0,1),greenyellow:Float32Array.of(.678,1,.184,1),grey:Float32Array.of(.502,.502,.502,1),honeydew:Float32Array.of(.941,1,.941,1),hotpink:Float32Array.of(1,.412,.706,1),indianred:Float32Array.of(.804,.361,.361,1),indigo:Float32Array.of(.294,0,.51,1),ivory:Float32Array.of(1,1,.941,1),khaki:Float32Array.of(.941,.902,.549,1),lavender:Float32Array.of(.902,.902,.98,1),lavenderblush:Float32Array.of(1,.941,.961,1),lawngreen:Float32Array.of(.486,.988,0,1),lemonchiffon:Float32Array.of(1,.98,.804,1),lightblue:Float32Array.of(.678,.847,.902,1),lightcoral:Float32Array.of(.941,.502,.502,1),lightcyan:Float32Array.of(.878,1,1,1),lightgoldenrodyellow:Float32Array.of(.98,.98,.824,1),lightgray:Float32Array.of(.827,.827,.827,1),lightgreen:Float32Array.of(.565,.933,.565,1),lightgrey:Float32Array.of(.827,.827,.827,1),lightpink:Float32Array.of(1,.714,.757,1),lightsalmon:Float32Array.of(1,.627,.478,1),lightseagreen:Float32Array.of(.125,.698,.667,1),lightskyblue:Float32Array.of(.529,.808,.98,1),lightslategray:Float32Array.of(.467,.533,.6,1),lightslategrey:Float32Array.of(.467,.533,.6,1),lightsteelblue:Float32Array.of(.69,.769,.871,1),lightyellow:Float32Array.of(1,1,.878,1),lime:Float32Array.of(0,1,0,1),limegreen:Float32Array.of(.196,.804,.196,1),linen:Float32Array.of(.98,.941,.902,1),magenta:Float32Array.of(1,0,1,1),maroon:Float32Array.of(.502,0,0,1),mediumaquamarine:Float32Array.of(.4,.804,.667,1),mediumblue:Float32Array.of(0,0,.804,1),mediumorchid:Float32Array.of(.729,.333,.827,1),mediumpurple:Float32Array.of(.576,.439,.859,1),mediumseagreen:Float32Array.of(.235,.702,.443,1),mediumslateblue:Float32Array.of(.482,.408,.933,1),mediumspringgreen:Float32Array.of(0,.98,.604,1),mediumturquoise:Float32Array.of(.282,.82,.8,1),mediumvioletred:Float32Array.of(.78,.082,.522,1),midnightblue:Float32Array.of(.098,.098,.439,1),mintcream:Float32Array.of(.961,1,.98,1),mistyrose:Float32Array.of(1,.894,.882,1),moccasin:Float32Array.of(1,.894,.71,1),navajowhite:Float32Array.of(1,.871,.678,1),navy:Float32Array.of(0,0,.502,1),oldlace:Float32Array.of(.992,.961,.902,1),olive:Float32Array.of(.502,.502,0,1),olivedrab:Float32Array.of(.42,.557,.137,1),orange:Float32Array.of(1,.647,0,1),orangered:Float32Array.of(1,.271,0,1),orchid:Float32Array.of(.855,.439,.839,1),palegoldenrod:Float32Array.of(.933,.91,.667,1),palegreen:Float32Array.of(.596,.984,.596,1),paleturquoise:Float32Array.of(.686,.933,.933,1),palevioletred:Float32Array.of(.859,.439,.576,1),papayawhip:Float32Array.of(1,.937,.835,1),peachpuff:Float32Array.of(1,.855,.725,1),peru:Float32Array.of(.804,.522,.247,1),pink:Float32Array.of(1,.753,.796,1),plum:Float32Array.of(.867,.627,.867,1),powderblue:Float32Array.of(.69,.878,.902,1),purple:Float32Array.of(.502,0,.502,1),rebeccapurple:Float32Array.of(.4,.2,.6,1),red:Float32Array.of(1,0,0,1),rosybrown:Float32Array.of(.737,.561,.561,1),royalblue:Float32Array.of(.255,.412,.882,1),saddlebrown:Float32Array.of(.545,.271,.075,1),salmon:Float32Array.of(.98,.502,.447,1),sandybrown:Float32Array.of(.957,.643,.376,1),seagreen:Float32Array.of(.18,.545,.341,1),seashell:Float32Array.of(1,.961,.933,1),sienna:Float32Array.of(.627,.322,.176,1),silver:Float32Array.of(.753,.753,.753,1),skyblue:Float32Array.of(.529,.808,.922,1),slateblue:Float32Array.of(.416,.353,.804,1),slategray:Float32Array.of(.439,.502,.565,1),slategrey:Float32Array.of(.439,.502,.565,1),snow:Float32Array.of(1,.98,.98,1),springgreen:Float32Array.of(0,1,.498,1),steelblue:Float32Array.of(.275,.51,.706,1),tan:Float32Array.of(.824,.706,.549,1),teal:Float32Array.of(0,.502,.502,1),thistle:Float32Array.of(.847,.749,.847,1),tomato:Float32Array.of(1,.388,.278,1),transparent:Float32Array.of(0,0,0,0),turquoise:Float32Array.of(.251,.878,.816,1),violet:Float32Array.of(.933,.51,.933,1),wheat:Float32Array.of(.961,.871,.702,1),white:Float32Array.of(1,1,1,1),whitesmoke:Float32Array.of(.961,.961,.961,1),yellow:Float32Array.of(1,1,0,1),yellowgreen:Float32Array.of(.604,.804,.196,1)};t._testing.parseColor=i,t._testing.colorToString=n;var w=RegExp("(italic|oblique|normal|)\\s*(small-caps|normal|)\\s*(bold|bolder|lighter|[1-9]00|normal|)\\s*([\\d\\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q)(.+)"),S={"Noto Mono":{"*":null},monospace:{"*":null}};t._testing.parseFontString=o,t.MakeCanvas=function(e,n){return(e=t.MakeSurface(e,n))?new s(e):null},t.ImageData=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new c(new Uint8ClampedArray(4*t*e),t,e)}if(3===arguments.length){var n=arguments[0];if(n.prototype.constructor!==Uint8ClampedArray)throw"bytes must be given as a Uint8ClampedArray";if(n%4)throw"bytes must be given in a multiple of 4";if(n%(t=arguments[1]))throw"bytes must divide evenly by width";if((e=arguments[2])&&e!==n/(4*t))throw"invalid height given";return new c(n,t,n/(4*t))}throw"invalid number of arguments - takes 2 or 3, saw "+arguments.length}}()}(e);var a,s,l,c,h,u,d=Object.assign({},e),f="./this.program",m=(t,e)=>{throw e},g="object"==typeof window,y="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b="";v?(b=y?_.dirname(b)+"/":__dirname+"/",u=()=>{h||(c=C,h=_)},a=function(t,e){return u(),t=h.normalize(t),c.readFileSync(t,e?void 0:"utf8")},l=t=>((t=a(t,!0)).buffer||(t=new Uint8Array(t)),t),s=(t,e,n)=>{u(),t=h.normalize(t),c.readFile(t,(function(t,i){t?n(t):e(i.buffer)}))},1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("unhandledRejection",(function(t){throw t})),m=(t,e)=>{if(P)throw process.exitCode=t,e;e instanceof yn||S("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(g||y)&&(y?b=self.location.href:"undefined"!=typeof document&&document.currentScript&&(b=document.currentScript.src),n&&(b=n),b=0!==b.indexOf("blob:")?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",a=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),s=(t,e,n)=>{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?e(i.response):n()},i.onerror=n,i.send(null)});var w=e.print||console.log.bind(console),S=e.printErr||console.warn.bind(console);Object.assign(e,d),d=null,e.thisProgram&&(f=e.thisProgram),e.quit&&(m=e.quit);var T,A=0;e.wasmBinary&&(T=e.wasmBinary);var P=e.noExitRuntime||!0;"object"!=typeof WebAssembly&&ot("no native wasm support detected");var E,k=!1,M="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function x(t,e,n){var i=e+n;for(n=e;t[n]&&!(n>=i);)++n;if(16<n-e&&t.buffer&&M)return M.decode(t.subarray(e,n));for(i="";e<n;){var r=t[e++];if(128&r){var o=63&t[e++];if(192==(224&r))i+=String.fromCharCode((31&r)<<6|o);else{var a=63&t[e++];65536>(r=224==(240&r)?(15&r)<<12|o<<6|a:(7&r)<<18|o<<12|a<<6|63&t[e++])?i+=String.fromCharCode(r):(r-=65536,i+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else i+=String.fromCharCode(r)}return i}function F(t,e){return t?x(B,t,e):""}function O(t,e,n,i){if(!(0<i))return 0;var r=n;i=n+i-1;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),127>=a){if(n>=i)break;e[n++]=a}else{if(2047>=a){if(n+1>=i)break;e[n++]=192|a>>6}else{if(65535>=a){if(n+2>=i)break;e[n++]=224|a>>12}else{if(n+3>=i)break;e[n++]=240|a>>18,e[n++]=128|a>>12&63}e[n++]=128|a>>6&63}e[n++]=128|63&a}}return e[n]=0,n-r}function R(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),127>=i?++e:e=2047>=i?e+2:65535>=i?e+3:e+4}return e}var I,D,B,L,G,N,U,W,z,j="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function H(t,e){for(var n=t>>1,i=n+e/2;!(n>=i)&&G[n];)++n;if(32<(n<<=1)-t&&j)return j.decode(B.subarray(t,n));for(n="",i=0;!(i>=e/2);++i){var r=L[t+2*i>>1];if(0==r)break;n+=String.fromCharCode(r)}return n}function $(t,e,n){if(void 0===n&&(n=2147483647),2>n)return 0;var i=e;n=(n-=2)<2*t.length?n/2:t.length;for(var r=0;r<n;++r)L[e>>1]=t.charCodeAt(r),e+=2;return L[e>>1]=0,e-i}function V(t){return 2*t.length}function q(t,e){for(var n=0,i="";!(n>=e/4);){var r=N[t+4*n>>2];if(0==r)break;++n,65536<=r?(r-=65536,i+=String.fromCharCode(55296|r>>10,56320|1023&r)):i+=String.fromCharCode(r)}return i}function Y(t,e,n){if(void 0===n&&(n=2147483647),4>n)return 0;var i=e;n=i+n-4;for(var r=0;r<t.length;++r){var o=t.charCodeAt(r);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++r)),N[e>>2]=o,(e+=4)+4>n)break}return N[e>>2]=0,e-i}function X(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);55296<=i&&57343>=i&&++n,e+=4}return e}function K(){var t=E.buffer;I=t,e.HEAP8=D=new Int8Array(t),e.HEAP16=L=new Int16Array(t),e.HEAP32=N=new Int32Array(t),e.HEAPU8=B=new Uint8Array(t),e.HEAPU16=G=new Uint16Array(t),e.HEAPU32=U=new Uint32Array(t),e.HEAPF32=W=new Float32Array(t),e.HEAPF64=z=new Float64Array(t)}var Q,J=[],Z=[],tt=[];function et(){var t=e.preRun.shift();J.unshift(t)}var nt,it=0,rt=null;function ot(t){throw e.onAbort&&e.onAbort(t),S(t="Aborted("+t+")"),k=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),r(t),t}function at(){return nt.startsWith("data:application/octet-stream;base64,")}if(nt="canvaskit.wasm",!at()){var st=nt;nt=e.locateFile?e.locateFile(st,b):b+st}function lt(){var t=nt;try{if(t==nt&&T)return new Uint8Array(T);if(l)return l(t);throw"both async and sync fetching of the wasm failed"}catch(t){ot(t)}}function ct(t){for(;0<t.length;)t.shift()(e)}function ht(t){return Q.get(t)}var ut={};function dt(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function ft(t){return this.fromWireType(N[t>>2])}var pt={},mt={},gt={};function yt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?"_"+t:t}function vt(t,e){return t=yt(t),function(){return e.apply(this,arguments)}}function bt(t){var e=Error,n=vt(t,(function(e){this.name=t,this.message=e,void 0!==(e=Error(e).stack)&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var wt=void 0;function St(t){throw new wt(t)}function _t(t,e,n){function i(e){(e=n(e)).length!==t.length&&St("Mismatched type converter count");for(var i=0;i<t.length;++i)kt(t[i],e[i])}t.forEach((function(t){gt[t]=e}));var r=Array(e.length),o=[],a=0;e.forEach(((t,e)=>{mt.hasOwnProperty(t)?r[e]=mt[t]:(o.push(t),pt.hasOwnProperty(t)||(pt[t]=[]),pt[t].push((()=>{r[e]=mt[t],++a===o.length&&i(r)})))})),0===o.length&&i(r)}function Ct(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var Tt=void 0;function At(t){for(var e="";B[t];)e+=Tt[B[t++]];return e}var Pt=void 0;function Et(t){throw new Pt(t)}function kt(t,e,n={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=e.name;if(t||Et('type "'+i+'" must have a positive integer typeid pointer'),mt.hasOwnProperty(t)){if(n.Wf)return;Et("Cannot register type '"+i+"' twice")}mt[t]=e,delete gt[t],pt.hasOwnProperty(t)&&(e=pt[t],delete pt[t],e.forEach((t=>t())))}function Mt(t){Et(t.Md.Yd.Td.name+" instance already deleted")}var xt=!1;function Ft(){}function Ot(t){--t.count.value,0===t.count.value&&(t.ae?t.ge.me(t.ae):t.Yd.Td.me(t.Vd))}function Rt(t,e,n){return e===n?t:void 0===n.je||null===(t=Rt(t,e,n.je))?null:n.Kf(t)}var It={},Dt=[];function Bt(){for(;Dt.length;){var t=Dt.pop();t.Md.Ge=!1,t.delete()}}var Lt=void 0,Gt={};function Nt(t,e){return e.Yd&&e.Vd||St("makeClassHandle requires ptr and ptrType"),!!e.ge!=!!e.ae&&St("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Ut(Object.create(t,{Md:{value:e}}))}function Ut(t){return"undefined"==typeof FinalizationRegistry?(Ut=t=>t,t):(xt=new FinalizationRegistry((t=>{Ot(t.Md)})),Ft=t=>{xt.unregister(t)},(Ut=t=>{var e=t.Md;return e.ae&&xt.register(t,{Md:e},t),t})(t))}function Wt(){}function zt(t,e,n){if(void 0===t[e].$d){var i=t[e];t[e]=function(){return t[e].$d.hasOwnProperty(arguments.length)||Et("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].$d+")!"),t[e].$d[arguments.length].apply(this,arguments)},t[e].$d=[],t[e].$d[i.Ee]=i}}function jt(t,n,i){e.hasOwnProperty(t)?((void 0===i||void 0!==e[t].$d&&void 0!==e[t].$d[i])&&Et("Cannot register public name '"+t+"' twice"),zt(e,t,t),e.hasOwnProperty(i)&&Et("Cannot register multiple overloads of a function with the same number of arguments ("+i+")!"),e[t].$d[i]=n):(e[t]=n,void 0!==i&&(e[t].ug=i))}function Ht(t,e,n,i,r,o,a,s){this.name=t,this.constructor=e,this.He=n,this.me=i,this.je=r,this.Qf=o,this.Pe=a,this.Kf=s,this.cg=[]}function $t(t,e,n){for(;e!==n;)e.Pe||Et("Expected null or instance of "+n.name+", got an instance of "+e.name),t=e.Pe(t),e=e.je;return t}function Vt(t,e){return null===e?(this.gf&&Et("null is not a valid "+this.name),0):(e.Md||Et('Cannot pass "'+he(e)+'" as a '+this.name),e.Md.Vd||Et("Cannot pass deleted object as a pointer of type "+this.name),$t(e.Md.Vd,e.Md.Yd.Td,this.Td))}function qt(t,e){if(null===e){if(this.gf&&Et("null is not a valid "+this.name),this.Ue){var n=this.hf();return null!==t&&t.push(this.me,n),n}return 0}if(e.Md||Et('Cannot pass "'+he(e)+'" as a '+this.name),e.Md.Vd||Et("Cannot pass deleted object as a pointer of type "+this.name),!this.Te&&e.Md.Yd.Te&&Et("Cannot convert argument of type "+(e.Md.ge?e.Md.ge.name:e.Md.Yd.name)+" to parameter type "+this.name),n=$t(e.Md.Vd,e.Md.Yd.Td,this.Td),this.Ue)switch(void 0===e.Md.ae&&Et("Passing raw pointer to smart pointer is illegal"),this.ig){case 0:e.Md.ge===this?n=e.Md.ae:Et("Cannot convert argument of type "+(e.Md.ge?e.Md.ge.name:e.Md.Yd.name)+" to parameter type "+this.name);break;case 1:n=e.Md.ae;break;case 2:if(e.Md.ge===this)n=e.Md.ae;else{var i=e.clone();n=this.dg(n,se((function(){i.delete()}))),null!==t&&t.push(this.me,n)}break;default:Et("Unsupporting sharing policy")}return n}function Yt(t,e){return null===e?(this.gf&&Et("null is not a valid "+this.name),0):(e.Md||Et('Cannot pass "'+he(e)+'" as a '+this.name),e.Md.Vd||Et("Cannot pass deleted object as a pointer of type "+this.name),e.Md.Yd.Te&&Et("Cannot convert argument of type "+e.Md.Yd.name+" to parameter type "+this.name),$t(e.Md.Vd,e.Md.Yd.Td,this.Td))}function Xt(t,e,n,i,r,o,a,s,l,c,h){this.name=t,this.Td=e,this.gf=n,this.Te=i,this.Ue=r,this.bg=o,this.ig=a,this.wf=s,this.hf=l,this.dg=c,this.me=h,r||void 0!==e.je?this.toWireType=qt:(this.toWireType=i?Vt:Yt,this.fe=null)}function Kt(t,n,i){e.hasOwnProperty(t)||St("Replacing nonexistant public symbol"),void 0!==e[t].$d&&void 0!==i?e[t].$d[i]=n:(e[t]=n,e[t].Ee=i)}function Qt(t,n){var i=(t=At(t)).includes("j")?function(t,n){var i=[];return function(){if(i.length=0,Object.assign(i,arguments),t.includes("j")){var r=e["dynCall_"+t];r=i&&i.length?r.apply(null,[n].concat(i)):r.call(null,n)}else r=ht(n).apply(null,i);return r}}(t,n):ht(n);return"function"!=typeof i&&Et("unknown function pointer with signature "+t+": "+n),i}var Jt=void 0;function Zt(t){var e=At(t=dn(t));return un(t),e}function te(t,e){var n=[],i={};throw e.forEach((function t(e){i[e]||mt[e]||(gt[e]?gt[e].forEach(t):(n.push(e),i[e]=!0))})),new Jt(t+": "+n.map(Zt).join([", "]))}function ee(t,e,n,i,r){var o=e.length;2>o&&Et("argTypes array size mismatch! Must at least get return value and 'this' types!");var a=null!==e[1]&&null!==n,s=!1;for(n=1;n<e.length;++n)if(null!==e[n]&&void 0===e[n].fe){s=!0;break}var l="void"!==e[0].name,c=o-2,h=Array(c),u=[],d=[];return function(){if(arguments.length!==c&&Et("function "+t+" called with "+arguments.length+" arguments, expected "+c+" args!"),d.length=0,u.length=a?2:1,u[0]=r,a){var n=e[1].toWireType(d,this);u[1]=n}for(var o=0;o<c;++o)h[o]=e[o+2].toWireType(d,arguments[o]),u.push(h[o]);if(o=i.apply(null,u),s)dt(d);else for(var f=a?1:2;f<e.length;f++){var p=1===f?n:h[f-2];null!==e[f].fe&&e[f].fe(p)}return l?e[0].fromWireType(o):void 0}}function ne(t,e){for(var n=[],i=0;i<t;i++)n.push(U[e+4*i>>2]);return n}var ie=[],re=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function oe(t){4<t&&0==--re[t].jf&&(re[t]=void 0,ie.push(t))}var ae=t=>(t||Et("Cannot use deleted val. handle = "+t),re[t].value),se=t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=ie.length?ie.pop():re.length;return re[e]={jf:1,value:t},e}};function le(t,e,n){switch(e){case 0:return function(t){return this.fromWireType((n?D:B)[t])};case 1:return function(t){return this.fromWireType((n?L:G)[t>>1])};case 2:return function(t){return this.fromWireType((n?N:U)[t>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function ce(t,e){var n=mt[t];return void 0===n&&Et(e+" has unknown type "+Zt(t)),n}function he(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function ue(t,e){switch(e){case 2:return function(t){return this.fromWireType(W[t>>2])};case 3:return function(t){return this.fromWireType(z[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}function de(t,e,n){switch(e){case 0:return n?function(t){return D[t]}:function(t){return B[t]};case 1:return n?function(t){return L[t>>1]}:function(t){return G[t>>1]};case 2:return n?function(t){return N[t>>2]}:function(t){return U[t>>2]};default:throw new TypeError("Unknown integer type: "+t)}}var fe={};function pe(t){var e=fe[t];return void 0===e?At(t):e}var me=[];function ge(){function t(t){t.$$$embind_global$$$=t;var e="object"==typeof $$$embind_global$$$&&t.$$$embind_global$$$==t;return e||delete t.$$$embind_global$$$,e}if("object"==typeof globalThis)return globalThis;if("object"==typeof $$$embind_global$$$)return $$$embind_global$$$;if("object"==typeof p&&t(p)?$$$embind_global$$$=p:"object"==typeof self&&t(self)&&($$$embind_global$$$=self),"object"==typeof $$$embind_global$$$)return $$$embind_global$$$;throw Error("unable to get global object.")}var ye,ve=[],be={};ye=v?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now();var we=1,Se=[],_e=[],Ce=[],Te=[],Ae=[],Pe=[],Ee=[],ke=[],Me=[],xe=[],Fe={},Oe={},Re=4;function Ie(t){Ge||(Ge=t)}function De(t){for(var e=we++,n=t.length;n<e;n++)t[n]=null;return e}function Be(t){return Le=ke[t],e.sg=on=Le&&Le.he,!(t&&!on)}var Le,Ge,Ne=[];function Ue(t,e,n,i){for(var r=0;r<t;r++){var o=on[n](),a=o&&De(i);o?(o.name=a,i[a]=o):Ie(1282),N[e+4*r>>2]=a}}function We(t,e,n){if(e){var i=void 0;switch(t){case 36346:i=1;break;case 36344:return void(0!=n&&1!=n&&Ie(1280));case 34814:case 36345:i=0;break;case 34466:var r=on.getParameter(34467);i=r?r.length:0;break;case 33309:if(2>Le.version)return void Ie(1282);i=2*(on.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(2>Le.version)return void Ie(1280);i=33307==t?3:0}if(void 0===i)switch(r=on.getParameter(t),typeof r){case"number":i=r;break;case"boolean":i=r?1:0;break;case"string":return void Ie(1280);case"object":if(null===r)switch(t){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:i=0;break;default:return void Ie(1280)}else{if(r instanceof Float32Array||r instanceof Uint32Array||r instanceof Int32Array||r instanceof Array){for(t=0;t<r.length;++t)switch(n){case 0:N[e+4*t>>2]=r[t];break;case 2:W[e+4*t>>2]=r[t];break;case 4:D[e+t>>0]=r[t]?1:0}return}try{i=0|r.name}catch(e){return Ie(1280),void S("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+t+")! (error: "+e+")")}}break;default:return Ie(1280),void S("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+t+") and it returns "+r+" of type "+typeof r+"!")}switch(n){case 1:n=i,U[e>>2]=n,U[e+4>>2]=(n-U[e>>2])/4294967296;break;case 0:N[e>>2]=i;break;case 2:W[e>>2]=i;break;case 4:D[e>>0]=i?1:0}}else Ie(1281)}function ze(t){var e=R(t)+1,n=hn(e);return O(t,B,n,e),n}function je(t){return"]"==t.slice(-1)&&t.lastIndexOf("[")}function He(t){return 0==(t-=5120)?D:1==t?B:2==t?L:4==t?N:6==t?W:5==t||28922==t||28520==t||30779==t||30782==t?U:G}function $e(t,e,n,i,r){t=He(t);var o=31-Math.clz32(t.BYTES_PER_ELEMENT),a=Re;return t.subarray(r>>o,r+i*(n*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[e-6402]||1)*(1<<o)+a-1&-a)>>o)}function Ve(t){var e=on.If;if(e){var n=e.Oe[t];return"number"==typeof n&&(e.Oe[t]=n=on.getUniformLocation(e,e.xf[t]+(0<n?"["+n+"]":""))),n}Ie(1282)}var qe=[],Ye=[],Xe={};function Ke(){if(!Qe){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"};for(t in Xe)void 0===Xe[t]?delete e[t]:e[t]=Xe[t];var n=[];for(t in e)n.push(t+"="+e[t]);Qe=n}return Qe}var Qe,Je=[null,[],[]];function Ze(t){return 0==t%4&&(0!=t%100||0==t%400)}var tn=[31,29,31,30,31,30,31,31,30,31,30,31],en=[31,28,31,30,31,30,31,31,30,31,30,31];wt=e.InternalError=bt("InternalError");for(var nn=Array(256),rn=0;256>rn;++rn)nn[rn]=String.fromCharCode(rn);Tt=nn,Pt=e.BindingError=bt("BindingError"),Wt.prototype.isAliasOf=function(t){if(!(this instanceof Wt&&t instanceof Wt))return!1;var e=this.Md.Yd.Td,n=this.Md.Vd,i=t.Md.Yd.Td;for(t=t.Md.Vd;e.je;)n=e.Pe(n),e=e.je;for(;i.je;)t=i.Pe(t),i=i.je;return e===i&&n===t},Wt.prototype.clone=function(){if(this.Md.Vd||Mt(this),this.Md.Ne)return this.Md.count.value+=1,this;var t=Ut,e=Object,n=e.create,i=Object.getPrototypeOf(this),r=this.Md;return(t=t(n.call(e,i,{Md:{value:{count:r.count,Ge:r.Ge,Ne:r.Ne,Vd:r.Vd,Yd:r.Yd,ae:r.ae,ge:r.ge}}}))).Md.count.value+=1,t.Md.Ge=!1,t},Wt.prototype.delete=function(){this.Md.Vd||Mt(this),this.Md.Ge&&!this.Md.Ne&&Et("Object already scheduled for deletion"),Ft(this),Ot(this.Md),this.Md.Ne||(this.Md.ae=void 0,this.Md.Vd=void 0)},Wt.prototype.isDeleted=function(){return!this.Md.Vd},Wt.prototype.deleteLater=function(){return this.Md.Vd||Mt(this),this.Md.Ge&&!this.Md.Ne&&Et("Object already scheduled for deletion"),Dt.push(this),1===Dt.length&&Lt&&Lt(Bt),this.Md.Ge=!0,this},e.getInheritedInstanceCount=function(){return Object.keys(Gt).length},e.getLiveInheritedInstances=function(){var t,e=[];for(t in Gt)Gt.hasOwnProperty(t)&&e.push(Gt[t]);return e},e.flushPendingDeletes=Bt,e.setDelayFunction=function(t){Lt=t,Dt.length&&Lt&&Lt(Bt)},Xt.prototype.Rf=function(t){return this.wf&&(t=this.wf(t)),t},Xt.prototype.qf=function(t){this.me&&this.me(t)},Xt.prototype.argPackAdvance=8,Xt.prototype.readValueFromPointer=ft,Xt.prototype.deleteObject=function(t){null!==t&&t.delete()},Xt.prototype.fromWireType=function(t){function e(){return this.Ue?Nt(this.Td.He,{Yd:this.bg,Vd:n,ge:this,ae:t}):Nt(this.Td.He,{Yd:this,Vd:t})}var n=this.Rf(t);if(!n)return this.qf(t),null;var i=function(t,e){for(void 0===e&&Et("ptr should not be undefined");t.je;)e=t.Pe(e),t=t.je;return Gt[e]}(this.Td,n);if(void 0!==i)return 0===i.Md.count.value?(i.Md.Vd=n,i.Md.ae=t,i.clone()):(i=i.clone(),this.qf(t),i);if(i=this.Td.Qf(n),!(i=It[i]))return e.call(this);i=this.Te?i.Gf:i.pointerType;var r=Rt(n,this.Td,i.Td);return null===r?e.call(this):this.Ue?Nt(i.Td.He,{Yd:i,Vd:r,ge:this,ae:t}):Nt(i.Td.He,{Yd:i,Vd:r})},Jt=e.UnboundTypeError=bt("UnboundTypeError"),e.count_emval_handles=function(){for(var t=0,e=5;e<re.length;++e)void 0!==re[e]&&++t;return t},e.get_first_emval=function(){for(var t=5;t<re.length;++t)if(void 0!==re[t])return re[t];return null};for(var on,an=0;32>an;++an)Ne.push(Array(an));var sn=new Float32Array(288);for(an=0;288>an;++an)qe[an]=sn.subarray(0,an+1);var ln=new Int32Array(288);for(an=0;288>an;++an)Ye[an]=ln.subarray(0,an+1);var cn={V:function(){return 0},Bb:function(){},Db:function(){return 0},yb:function(){},zb:function(){},W:function(){},Ab:function(){},D:function(t){var e=ut[t];delete ut[t];var n=e.hf,i=e.me,r=e.tf;_t([t],r.map((t=>t.Uf)).concat(r.map((t=>t.gg))),(t=>{var o={};return r.forEach(((e,n)=>{var i=t[n],a=e.Sf,s=e.Tf,l=t[n+r.length],c=e.fg,h=e.hg;o[e.Mf]={read:t=>i.fromWireType(a(s,t)),write:(t,e)=>{var n=[];c(h,t,l.toWireType(n,e)),dt(n)}}})),[{name:e.name,fromWireType:function(t){var e,n={};for(e in o)n[e]=o[e].read(t);return i(t),n},toWireType:function(t,e){for(var r in o)if(!(r in e))throw new TypeError('Missing field:  "'+r+'"');var a=n();for(r in o)o[r].write(a,e[r]);return null!==t&&t.push(i,a),a},argPackAdvance:8,readValueFromPointer:ft,fe:i}]}))},qb:function(){},Hb:function(t,e,n,i,r){var o=Ct(n);kt(t,{name:e=At(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?i:r},argPackAdvance:8,readValueFromPointer:function(t){if(1===n)var i=D;else if(2===n)i=L;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);i=N}return this.fromWireType(i[t>>o])},fe:null})},p:function(t,e,n,i,r,o,a,s,l,c,h,u,d){h=At(h),o=Qt(r,o),s&&(s=Qt(a,s)),c&&(c=Qt(l,c)),d=Qt(u,d);var f=yt(h);jt(f,(function(){te("Cannot construct "+h+" due to unbound types",[i])})),_t([t,e,n],i?[i]:[],(function(e){if(e=e[0],i)var n=e.Td,r=n.He;else r=Wt.prototype;e=vt(f,(function(){if(Object.getPrototypeOf(this)!==a)throw new Pt("Use 'new' to construct "+h);if(void 0===l.pe)throw new Pt(h+" has no accessible constructor");var t=l.pe[arguments.length];if(void 0===t)throw new Pt("Tried to invoke ctor of "+h+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(l.pe).toString()+") parameters instead!");return t.apply(this,arguments)}));var a=Object.create(r,{constructor:{value:e}});e.prototype=a;var l=new Ht(h,e,a,d,n,o,s,c);n=new Xt(h,l,!0,!1,!1),r=new Xt(h+"*",l,!1,!1,!1);var u=new Xt(h+" const*",l,!1,!0,!1);return It[t]={pointerType:r,Gf:u},Kt(f,e),[n,r,u]}))},i:function(t,e,n,i,r,o,a){var s=ne(n,i);e=At(e),o=Qt(r,o),_t([],[t],(function(t){function i(){te("Cannot call "+r+" due to unbound types",s)}var r=(t=t[0]).name+"."+e;e.startsWith("@@")&&(e=Symbol[e.substring(2)]);var l=t.Td.constructor;return void 0===l[e]?(i.Ee=n-1,l[e]=i):(zt(l,e,r),l[e].$d[n-1]=i),_t([],s,(function(t){return t=[t[0],null].concat(t.slice(1)),t=ee(r,t,null,o,a),void 0===l[e].$d?(t.Ee=n-1,l[e]=t):l[e].$d[n-1]=t,[]})),[]}))},F:function(t,e,n,i,r,o){0<e||ot();var a=ne(e,n);r=Qt(i,r),_t([],[t],(function(t){var n="constructor "+(t=t[0]).name;if(void 0===t.Td.pe&&(t.Td.pe=[]),void 0!==t.Td.pe[e-1])throw new Pt("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.Td.pe[e-1]=()=>{te("Cannot construct "+t.name+" due to unbound types",a)},_t([],a,(function(i){return i.splice(1,0,null),t.Td.pe[e-1]=ee(n,i,null,r,o),[]})),[]}))},b:function(t,e,n,i,r,o,a,s){var l=ne(n,i);e=At(e),o=Qt(r,o),_t([],[t],(function(t){function i(){te("Cannot call "+r+" due to unbound types",l)}var r=(t=t[0]).name+"."+e;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),s&&t.Td.cg.push(e);var c=t.Td.He,h=c[e];return void 0===h||void 0===h.$d&&h.className!==t.name&&h.Ee===n-2?(i.Ee=n-2,i.className=t.name,c[e]=i):(zt(c,e,r),c[e].$d[n-2]=i),_t([],l,(function(i){return i=ee(r,i,t,o,a),void 0===c[e].$d?(i.Ee=n-2,c[e]=i):c[e].$d[n-2]=i,[]})),[]}))},u:function(t,n,i){t=At(t),_t([],[n],(function(n){return n=n[0],e[t]=n.fromWireType(i),[]}))},Gb:function(t,e){kt(t,{name:e=At(e),fromWireType:function(t){var e=ae(t);return oe(t),e},toWireType:function(t,e){return se(e)},argPackAdvance:8,readValueFromPointer:ft,fe:null})},o:function(t,e,n,i){function r(){}n=Ct(n),e=At(e),r.values={},kt(t,{name:e,constructor:r,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:le(e,n,i),fe:null}),jt(e,r)},f:function(t,e,n){var i=ce(t,"enum");e=At(e),t=i.constructor,i=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:vt(i.name+"_"+e,(function(){}))}}),t.values[n]=i,t[e]=i},Z:function(t,e,n){n=Ct(n),kt(t,{name:e=At(e),fromWireType:function(t){return t},toWireType:function(t,e){return e},argPackAdvance:8,readValueFromPointer:ue(e,n),fe:null})},y:function(t,e,n,i,r,o){var a=ne(e,n);t=At(t),r=Qt(i,r),jt(t,(function(){te("Cannot call "+t+" due to unbound types",a)}),e-1),_t([],a,(function(n){return n=[n[0],null].concat(n.slice(1)),Kt(t,ee(t,n,null,r,o),e-1),[]}))},H:function(t,e,n,i,r){e=At(e),-1===r&&(r=4294967295),r=Ct(n);var o=t=>t;if(0===i){var a=32-8*n;o=t=>t<<a>>>a}n=e.includes("unsigned")?function(t,e){return e>>>0}:function(t,e){return e},kt(t,{name:e,fromWireType:o,toWireType:n,argPackAdvance:8,readValueFromPointer:de(e,r,0!==i),fe:null})},x:function(t,e,n){function i(t){var e=U;return new r(I,e[1+(t>>=2)],e[t])}var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];kt(t,{name:n=At(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{Wf:!0})},t:function(t,e,n,i,r,o,a,s,l,c,h,u){n=At(n),o=Qt(r,o),s=Qt(a,s),c=Qt(l,c),u=Qt(h,u),_t([t],[e],(function(t){return t=t[0],[new Xt(n,t.Td,!1,!1,!0,t,i,o,s,c,u)]}))},Y:function(t,e){var n="std::string"===(e=At(e));kt(t,{name:e,fromWireType:function(t){var e=U[t>>2],i=t+4;if(n)for(var r=i,o=0;o<=e;++o){var a=i+o;if(o==e||0==B[a]){if(r=F(r,a-r),void 0===s)var s=r;else s+=String.fromCharCode(0),s+=r;r=a+1}}else{for(s=Array(e),o=0;o<e;++o)s[o]=String.fromCharCode(B[i+o]);s=s.join("")}return un(t),s},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var i="string"==typeof e;i||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||Et("Cannot pass non-string to std::string");var r=n&&i?R(e):e.length,o=hn(4+r+1),a=o+4;if(U[o>>2]=r,n&&i)O(e,B,a,r+1);else if(i)for(i=0;i<r;++i){var s=e.charCodeAt(i);255<s&&(un(a),Et("String has UTF-16 code units that do not fit in 8 bits")),B[a+i]=s}else for(i=0;i<r;++i)B[a+i]=e[i];return null!==t&&t.push(un,o),o},argPackAdvance:8,readValueFromPointer:ft,fe:function(t){un(t)}})},Q:function(t,e,n){if(n=At(n),2===e)var i=H,r=$,o=V,a=()=>G,s=1;else 4===e&&(i=q,r=Y,o=X,a=()=>U,s=2);kt(t,{name:n,fromWireType:function(t){for(var n,r=U[t>>2],o=a(),l=t+4,c=0;c<=r;++c){var h=t+4+c*e;c!=r&&0!=o[h>>s]||(l=i(l,h-l),void 0===n?n=l:(n+=String.fromCharCode(0),n+=l),l=h+e)}return un(t),n},toWireType:function(t,i){"string"!=typeof i&&Et("Cannot pass non-string to C++ string type "+n);var a=o(i),l=hn(4+a+e);return U[l>>2]=a>>s,r(i,l+4,a+e),null!==t&&t.push(un,l),l},argPackAdvance:8,readValueFromPointer:ft,fe:function(t){un(t)}})},E:function(t,e,n,i,r,o){ut[t]={name:At(e),hf:Qt(n,i),me:Qt(r,o),tf:[]}},g:function(t,e,n,i,r,o,a,s,l,c){ut[t].tf.push({Mf:At(e),Uf:n,Sf:Qt(i,r),Tf:o,gg:a,fg:Qt(s,l),hg:c})},Ib:function(t,e){kt(t,{Yf:!0,name:e=At(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},Fb:function(){return!0},sb:function(){throw 1/0},G:function(t,e,n){t=ae(t),e=ce(e,"emval::as");var i=[],r=se(i);return U[n>>2]=r,e.toWireType(i,t)},M:function(t,e,n,i,r){t=me[t],e=ae(e),n=pe(n);var o=[];return U[i>>2]=se(o),t(e,n,o,r)},z:function(t,e,n,i){(t=me[t])(e=ae(e),n=pe(n),null,i)},e:oe,L:function(t){return 0===t?se(ge()):(t=pe(t),se(ge()[t]))},v:function(t,e){var n=function(t,e){for(var n=Array(t),i=0;i<t;++i)n[i]=ce(U[e+4*i>>2],"parameter "+i);return n}(t,e),i=n[0];e=i.name+"_$"+n.slice(1).map((function(t){return t.name})).join("_")+"$";var r=ve[e];if(void 0!==r)return r;var o=Array(t-1);return r=function(t){var e=me.length;return me.push(t),e}(((e,r,a,s)=>{for(var l=0,c=0;c<t-1;++c)o[c]=n[c+1].readValueFromPointer(s+l),l+=n[c+1].argPackAdvance;for(e=e[r].apply(e,o),c=0;c<t-1;++c)n[c+1].Jf&&n[c+1].Jf(o[c]);if(!i.Yf)return i.toWireType(a,e)})),ve[e]=r},I:function(t,e){return t=ae(t),e=ae(e),se(t[e])},r:function(t){4<t&&(re[t].jf+=1)},N:function(t,e,n,i){t=ae(t);var r=be[e];return r||(r=function(t){var e=Array(t+1);return function(n,i,r){e[0]=n;for(var o=0;o<t;++o){var a=ce(U[i+4*o>>2],"parameter "+o);e[o+1]=a.readValueFromPointer(r),r+=a.argPackAdvance}return n=new(n.bind.apply(n,e)),se(n)}}(e),be[e]=r),r(t,n,i)},J:function(){return se([])},h:function(t){return se(pe(t))},C:function(){return se({})},mb:function(t){return!(t=ae(t))},B:function(t){dt(ae(t)),oe(t)},k:function(t,e,n){t=ae(t),e=ae(e),n=ae(n),t[e]=n},j:function(t,e){return t=(t=ce(t,"_emval_take_value")).readValueFromPointer(e),se(t)},ub:function(){return-52},vb:function(){},a:function(){ot("")},Eb:ye,bd:function(t){on.activeTexture(t)},cd:function(t,e){on.attachShader(_e[t],Pe[e])},ca:function(t,e,n){on.bindAttribLocation(_e[t],e,F(n))},da:function(t,e){35051==t?on.df=e:35052==t&&(on.Fe=e),on.bindBuffer(t,Se[e])},ba:function(t,e){on.bindFramebuffer(t,Ce[e])},fc:function(t,e){on.bindRenderbuffer(t,Te[e])},Rb:function(t,e){on.bindSampler(t,Me[e])},ea:function(t,e){on.bindTexture(t,Ae[e])},zc:function(t){on.bindVertexArray(Ee[t])},Cc:function(t){on.bindVertexArray(Ee[t])},fa:function(t,e,n,i){on.blendColor(t,e,n,i)},ga:function(t){on.blendEquation(t)},ha:function(t,e){on.blendFunc(t,e)},$b:function(t,e,n,i,r,o,a,s,l,c){on.blitFramebuffer(t,e,n,i,r,o,a,s,l,c)},ia:function(t,e,n,i){2<=Le.version?n&&e?on.bufferData(t,B,i,n,e):on.bufferData(t,e,i):on.bufferData(t,n?B.subarray(n,n+e):e,i)},ja:function(t,e,n,i){2<=Le.version?n&&on.bufferSubData(t,e,B,i,n):on.bufferSubData(t,e,B.subarray(i,i+n))},gc:function(t){return on.checkFramebufferStatus(t)},T:function(t){on.clear(t)},aa:function(t,e,n,i){on.clearColor(t,e,n,i)},X:function(t){on.clearStencil(t)},kb:function(t,e,n,i){return on.clientWaitSync(xe[t],e,(n>>>0)+4294967296*i)},ka:function(t,e,n,i){on.colorMask(!!t,!!e,!!n,!!i)},la:function(t){on.compileShader(Pe[t])},ma:function(t,e,n,i,r,o,a,s){2<=Le.version?on.Fe||!a?on.compressedTexImage2D(t,e,n,i,r,o,a,s):on.compressedTexImage2D(t,e,n,i,r,o,B,s,a):on.compressedTexImage2D(t,e,n,i,r,o,s?B.subarray(s,s+a):null)},na:function(t,e,n,i,r,o,a,s,l){2<=Le.version?on.Fe||!s?on.compressedTexSubImage2D(t,e,n,i,r,o,a,s,l):on.compressedTexSubImage2D(t,e,n,i,r,o,a,B,l,s):on.compressedTexSubImage2D(t,e,n,i,r,o,a,l?B.subarray(l,l+s):null)},Zb:function(t,e,n,i,r){on.copyBufferSubData(t,e,n,i,r)},oa:function(t,e,n,i,r,o,a,s){on.copyTexSubImage2D(t,e,n,i,r,o,a,s)},pa:function(){var t=De(_e),e=on.createProgram();return e.name=t,e.Xe=e.Ve=e.We=0,e.lf=1,_e[t]=e,t},qa:function(t){var e=De(Pe);return Pe[e]=on.createShader(t),e},ra:function(t){on.cullFace(t)},sa:function(t,e){for(var n=0;n<t;n++){var i=N[e+4*n>>2],r=Se[i];r&&(on.deleteBuffer(r),r.name=0,Se[i]=null,i==on.df&&(on.df=0),i==on.Fe&&(on.Fe=0))}},hc:function(t,e){for(var n=0;n<t;++n){var i=N[e+4*n>>2],r=Ce[i];r&&(on.deleteFramebuffer(r),r.name=0,Ce[i]=null)}},ta:function(t){if(t){var e=_e[t];e?(on.deleteProgram(e),e.name=0,_e[t]=null):Ie(1281)}},ic:function(t,e){for(var n=0;n<t;n++){var i=N[e+4*n>>2],r=Te[i];r&&(on.deleteRenderbuffer(r),r.name=0,Te[i]=null)}},Sb:function(t,e){for(var n=0;n<t;n++){var i=N[e+4*n>>2],r=Me[i];r&&(on.deleteSampler(r),r.name=0,Me[i]=null)}},ua:function(t){if(t){var e=Pe[t];e?(on.deleteShader(e),Pe[t]=null):Ie(1281)}},_b:function(t){if(t){var e=xe[t];e?(on.deleteSync(e),e.name=0,xe[t]=null):Ie(1281)}},va:function(t,e){for(var n=0;n<t;n++){var i=N[e+4*n>>2],r=Ae[i];r&&(on.deleteTexture(r),r.name=0,Ae[i]=null)}},Ac:function(t,e){for(var n=0;n<t;n++){var i=N[e+4*n>>2];on.deleteVertexArray(Ee[i]),Ee[i]=null}},Dc:function(t,e){for(var n=0;n<t;n++){var i=N[e+4*n>>2];on.deleteVertexArray(Ee[i]),Ee[i]=null}},wa:function(t){on.depthMask(!!t)},xa:function(t){on.disable(t)},ya:function(t){on.disableVertexAttribArray(t)},za:function(t,e,n){on.drawArrays(t,e,n)},xc:function(t,e,n,i){on.drawArraysInstanced(t,e,n,i)},vc:function(t,e,n,i,r){on.rf.drawArraysInstancedBaseInstanceWEBGL(t,e,n,i,r)},tc:function(t,e){for(var n=Ne[t],i=0;i<t;i++)n[i]=N[e+4*i>>2];on.drawBuffers(n)},Aa:function(t,e,n,i){on.drawElements(t,e,n,i)},yc:function(t,e,n,i,r){on.drawElementsInstanced(t,e,n,i,r)},wc:function(t,e,n,i,r,o,a){on.rf.drawElementsInstancedBaseVertexBaseInstanceWEBGL(t,e,n,i,r,o,a)},nc:function(t,e,n,i,r,o){on.drawElements(t,i,r,o)},Ba:function(t){on.enable(t)},Ca:function(t){on.enableVertexAttribArray(t)},Xb:function(t,e){return(t=on.fenceSync(t,e))?(e=De(xe),t.name=e,xe[e]=t,e):0},Da:function(){on.finish()},Ea:function(){on.flush()},jc:function(t,e,n,i){on.framebufferRenderbuffer(t,e,n,Te[i])},kc:function(t,e,n,i,r){on.framebufferTexture2D(t,e,n,Ae[i],r)},Fa:function(t){on.frontFace(t)},Ga:function(t,e){Ue(t,e,"createBuffer",Se)},lc:function(t,e){Ue(t,e,"createFramebuffer",Ce)},mc:function(t,e){Ue(t,e,"createRenderbuffer",Te)},Tb:function(t,e){Ue(t,e,"createSampler",Me)},Ha:function(t,e){Ue(t,e,"createTexture",Ae)},Bc:function(t,e){Ue(t,e,"createVertexArray",Ee)},Ec:function(t,e){Ue(t,e,"createVertexArray",Ee)},bc:function(t){on.generateMipmap(t)},Ia:function(t,e,n){n?N[n>>2]=on.getBufferParameter(t,e):Ie(1281)},Ja:function(){var t=on.getError()||Ge;return Ge=0,t},Ka:function(t,e){We(t,e,2)},cc:function(t,e,n,i){((t=on.getFramebufferAttachmentParameter(t,e,n))instanceof WebGLRenderbuffer||t instanceof WebGLTexture)&&(t=0|t.name),N[i>>2]=t},O:function(t,e){We(t,e,0)},La:function(t,e,n,i){null===(t=on.getProgramInfoLog(_e[t]))&&(t="(unknown error)"),e=0<e&&i?O(t,B,i,e):0,n&&(N[n>>2]=e)},Ma:function(t,e,n){if(n)if(t>=we)Ie(1281);else if(t=_e[t],35716==e)null===(t=on.getProgramInfoLog(t))&&(t="(unknown error)"),N[n>>2]=t.length+1;else if(35719==e){if(!t.Xe)for(e=0;e<on.getProgramParameter(t,35718);++e)t.Xe=Math.max(t.Xe,on.getActiveUniform(t,e).name.length+1);N[n>>2]=t.Xe}else if(35722==e){if(!t.Ve)for(e=0;e<on.getProgramParameter(t,35721);++e)t.Ve=Math.max(t.Ve,on.getActiveAttrib(t,e).name.length+1);N[n>>2]=t.Ve}else if(35381==e){if(!t.We)for(e=0;e<on.getProgramParameter(t,35382);++e)t.We=Math.max(t.We,on.getActiveUniformBlockName(t,e).length+1);N[n>>2]=t.We}else N[n>>2]=on.getProgramParameter(t,e);else Ie(1281)},dc:function(t,e,n){n?N[n>>2]=on.getRenderbufferParameter(t,e):Ie(1281)},Na:function(t,e,n,i){null===(t=on.getShaderInfoLog(Pe[t]))&&(t="(unknown error)"),e=0<e&&i?O(t,B,i,e):0,n&&(N[n>>2]=e)},Ob:function(t,e,n,i){t=on.getShaderPrecisionFormat(t,e),N[n>>2]=t.rangeMin,N[n+4>>2]=t.rangeMax,N[i>>2]=t.precision},Oa:function(t,e,n){n?35716==e?(null===(t=on.getShaderInfoLog(Pe[t]))&&(t="(unknown error)"),N[n>>2]=t?t.length+1:0):35720==e?(t=on.getShaderSource(Pe[t]),N[n>>2]=t?t.length+1:0):N[n>>2]=on.getShaderParameter(Pe[t],e):Ie(1281)},S:function(t){var e=Fe[t];if(!e){switch(t){case 7939:e=ze((e=(e=on.getSupportedExtensions()||[]).concat(e.map((function(t){return"GL_"+t})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:(e=on.getParameter(t))||Ie(1280),e=e&&ze(e);break;case 7938:e=on.getParameter(7938),e=ze(e=2<=Le.version?"OpenGL ES 3.0 ("+e+")":"OpenGL ES 2.0 ("+e+")");break;case 35724:var n=(e=on.getParameter(35724)).match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==n&&(3==n[1].length&&(n[1]+="0"),e="OpenGL ES GLSL ES "+n[1]+" ("+e+")"),e=ze(e);break;default:Ie(1280)}Fe[t]=e}return e},jb:function(t,e){if(2>Le.version)return Ie(1282),0;var n=Oe[t];return n?0>e||e>=n.length?(Ie(1281),0):n[e]:7939===t?(n=(n=(n=on.getSupportedExtensions()||[]).concat(n.map((function(t){return"GL_"+t})))).map((function(t){return ze(t)})),n=Oe[t]=n,0>e||e>=n.length?(Ie(1281),0):n[e]):(Ie(1280),0)},Pa:function(t,e){if(e=F(e),t=_e[t]){var n,i=t,r=i.Oe,o=i.yf;if(!r)for(i.Oe=r={},i.xf={},n=0;n<on.getProgramParameter(i,35718);++n){var a=on.getActiveUniform(i,n),s=a.name;a=a.size;var l=je(s);l=0<l?s.slice(0,l):s;var c=i.lf;for(i.lf+=a,o[l]=[a,c],s=0;s<a;++s)r[c]=s,i.xf[c++]=l}if(i=t.Oe,r=0,o=e,0<(n=je(e))&&(r=parseInt(e.slice(n+1))>>>0,o=e.slice(0,n)),(o=t.yf[o])&&r<o[0]&&(i[r+=o[1]]=i[r]||on.getUniformLocation(t,e)))return r}else Ie(1281);return-1},Pb:function(t,e,n){for(var i=Ne[e],r=0;r<e;r++)i[r]=N[n+4*r>>2];on.invalidateFramebuffer(t,i)},Qb:function(t,e,n,i,r,o,a){for(var s=Ne[e],l=0;l<e;l++)s[l]=N[n+4*l>>2];on.invalidateSubFramebuffer(t,s,i,r,o,a)},Yb:function(t){return on.isSync(xe[t])},Qa:function(t){return(t=Ae[t])?on.isTexture(t):0},Ra:function(t){on.lineWidth(t)},Sa:function(t){t=_e[t],on.linkProgram(t),t.Oe=0,t.yf={}},rc:function(t,e,n,i,r,o){on.vf.multiDrawArraysInstancedBaseInstanceWEBGL(t,N,e>>2,N,n>>2,N,i>>2,U,r>>2,o)},sc:function(t,e,n,i,r,o,a,s){on.vf.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL(t,N,e>>2,n,N,i>>2,N,r>>2,N,o>>2,U,a>>2,s)},Ta:function(t,e){3317==t&&(Re=e),on.pixelStorei(t,e)},uc:function(t){on.readBuffer(t)},Ua:function(t,e,n,i,r,o,a){if(2<=Le.version)if(on.df)on.readPixels(t,e,n,i,r,o,a);else{var s=He(o);on.readPixels(t,e,n,i,r,o,s,a>>31-Math.clz32(s.BYTES_PER_ELEMENT))}else(a=$e(o,r,n,i,a))?on.readPixels(t,e,n,i,r,o,a):Ie(1280)},ec:function(t,e,n,i){on.renderbufferStorage(t,e,n,i)},ac:function(t,e,n,i,r){on.renderbufferStorageMultisample(t,e,n,i,r)},Ub:function(t,e,n){on.samplerParameterf(Me[t],e,n)},Vb:function(t,e,n){on.samplerParameteri(Me[t],e,n)},Wb:function(t,e,n){on.samplerParameteri(Me[t],e,N[n>>2])},Va:function(t,e,n,i){on.scissor(t,e,n,i)},Wa:function(t,e,n,i){for(var r="",o=0;o<e;++o){var a=i?N[i+4*o>>2]:-1;r+=F(N[n+4*o>>2],0>a?void 0:a)}on.shaderSource(Pe[t],r)},Xa:function(t,e,n){on.stencilFunc(t,e,n)},Ya:function(t,e,n,i){on.stencilFuncSeparate(t,e,n,i)},Za:function(t){on.stencilMask(t)},_a:function(t,e){on.stencilMaskSeparate(t,e)},$a:function(t,e,n){on.stencilOp(t,e,n)},ab:function(t,e,n,i){on.stencilOpSeparate(t,e,n,i)},bb:function(t,e,n,i,r,o,a,s,l){if(2<=Le.version)if(on.Fe)on.texImage2D(t,e,n,i,r,o,a,s,l);else if(l){var c=He(s);on.texImage2D(t,e,n,i,r,o,a,s,c,l>>31-Math.clz32(c.BYTES_PER_ELEMENT))}else on.texImage2D(t,e,n,i,r,o,a,s,null);else on.texImage2D(t,e,n,i,r,o,a,s,l?$e(s,a,i,r,l):null)},cb:function(t,e,n){on.texParameterf(t,e,n)},db:function(t,e,n){on.texParameterf(t,e,W[n>>2])},eb:function(t,e,n){on.texParameteri(t,e,n)},fb:function(t,e,n){on.texParameteri(t,e,N[n>>2])},oc:function(t,e,n,i,r){on.texStorage2D(t,e,n,i,r)},gb:function(t,e,n,i,r,o,a,s,l){if(2<=Le.version)if(on.Fe)on.texSubImage2D(t,e,n,i,r,o,a,s,l);else if(l){var c=He(s);on.texSubImage2D(t,e,n,i,r,o,a,s,c,l>>31-Math.clz32(c.BYTES_PER_ELEMENT))}else on.texSubImage2D(t,e,n,i,r,o,a,s,null);else c=null,l&&(c=$e(s,a,r,o,l)),on.texSubImage2D(t,e,n,i,r,o,a,s,c)},hb:function(t,e){on.uniform1f(Ve(t),e)},ib:function(t,e,n){if(2<=Le.version)e&&on.uniform1fv(Ve(t),W,n>>2,e);else{if(288>=e)for(var i=qe[e-1],r=0;r<e;++r)i[r]=W[n+4*r>>2];else i=W.subarray(n>>2,n+4*e>>2);on.uniform1fv(Ve(t),i)}},Zc:function(t,e){on.uniform1i(Ve(t),e)},_c:function(t,e,n){if(2<=Le.version)e&&on.uniform1iv(Ve(t),N,n>>2,e);else{if(288>=e)for(var i=Ye[e-1],r=0;r<e;++r)i[r]=N[n+4*r>>2];else i=N.subarray(n>>2,n+4*e>>2);on.uniform1iv(Ve(t),i)}},$c:function(t,e,n){on.uniform2f(Ve(t),e,n)},ad:function(t,e,n){if(2<=Le.version)e&&on.uniform2fv(Ve(t),W,n>>2,2*e);else{if(144>=e)for(var i=qe[2*e-1],r=0;r<2*e;r+=2)i[r]=W[n+4*r>>2],i[r+1]=W[n+(4*r+4)>>2];else i=W.subarray(n>>2,n+8*e>>2);on.uniform2fv(Ve(t),i)}},Yc:function(t,e,n){on.uniform2i(Ve(t),e,n)},Xc:function(t,e,n){if(2<=Le.version)e&&on.uniform2iv(Ve(t),N,n>>2,2*e);else{if(144>=e)for(var i=Ye[2*e-1],r=0;r<2*e;r+=2)i[r]=N[n+4*r>>2],i[r+1]=N[n+(4*r+4)>>2];else i=N.subarray(n>>2,n+8*e>>2);on.uniform2iv(Ve(t),i)}},Wc:function(t,e,n,i){on.uniform3f(Ve(t),e,n,i)},Vc:function(t,e,n){if(2<=Le.version)e&&on.uniform3fv(Ve(t),W,n>>2,3*e);else{if(96>=e)for(var i=qe[3*e-1],r=0;r<3*e;r+=3)i[r]=W[n+4*r>>2],i[r+1]=W[n+(4*r+4)>>2],i[r+2]=W[n+(4*r+8)>>2];else i=W.subarray(n>>2,n+12*e>>2);on.uniform3fv(Ve(t),i)}},Uc:function(t,e,n,i){on.uniform3i(Ve(t),e,n,i)},Tc:function(t,e,n){if(2<=Le.version)e&&on.uniform3iv(Ve(t),N,n>>2,3*e);else{if(96>=e)for(var i=Ye[3*e-1],r=0;r<3*e;r+=3)i[r]=N[n+4*r>>2],i[r+1]=N[n+(4*r+4)>>2],i[r+2]=N[n+(4*r+8)>>2];else i=N.subarray(n>>2,n+12*e>>2);on.uniform3iv(Ve(t),i)}},Sc:function(t,e,n,i,r){on.uniform4f(Ve(t),e,n,i,r)},Rc:function(t,e,n){if(2<=Le.version)e&&on.uniform4fv(Ve(t),W,n>>2,4*e);else{if(72>=e){var i=qe[4*e-1],r=W;n>>=2;for(var o=0;o<4*e;o+=4){var a=n+o;i[o]=r[a],i[o+1]=r[a+1],i[o+2]=r[a+2],i[o+3]=r[a+3]}}else i=W.subarray(n>>2,n+16*e>>2);on.uniform4fv(Ve(t),i)}},Fc:function(t,e,n,i,r){on.uniform4i(Ve(t),e,n,i,r)},Gc:function(t,e,n){if(2<=Le.version)e&&on.uniform4iv(Ve(t),N,n>>2,4*e);else{if(72>=e)for(var i=Ye[4*e-1],r=0;r<4*e;r+=4)i[r]=N[n+4*r>>2],i[r+1]=N[n+(4*r+4)>>2],i[r+2]=N[n+(4*r+8)>>2],i[r+3]=N[n+(4*r+12)>>2];else i=N.subarray(n>>2,n+16*e>>2);on.uniform4iv(Ve(t),i)}},Hc:function(t,e,n,i){if(2<=Le.version)e&&on.uniformMatrix2fv(Ve(t),!!n,W,i>>2,4*e);else{if(72>=e)for(var r=qe[4*e-1],o=0;o<4*e;o+=4)r[o]=W[i+4*o>>2],r[o+1]=W[i+(4*o+4)>>2],r[o+2]=W[i+(4*o+8)>>2],r[o+3]=W[i+(4*o+12)>>2];else r=W.subarray(i>>2,i+16*e>>2);on.uniformMatrix2fv(Ve(t),!!n,r)}},Ic:function(t,e,n,i){if(2<=Le.version)e&&on.uniformMatrix3fv(Ve(t),!!n,W,i>>2,9*e);else{if(32>=e)for(var r=qe[9*e-1],o=0;o<9*e;o+=9)r[o]=W[i+4*o>>2],r[o+1]=W[i+(4*o+4)>>2],r[o+2]=W[i+(4*o+8)>>2],r[o+3]=W[i+(4*o+12)>>2],r[o+4]=W[i+(4*o+16)>>2],r[o+5]=W[i+(4*o+20)>>2],r[o+6]=W[i+(4*o+24)>>2],r[o+7]=W[i+(4*o+28)>>2],r[o+8]=W[i+(4*o+32)>>2];else r=W.subarray(i>>2,i+36*e>>2);on.uniformMatrix3fv(Ve(t),!!n,r)}},Jc:function(t,e,n,i){if(2<=Le.version)e&&on.uniformMatrix4fv(Ve(t),!!n,W,i>>2,16*e);else{if(18>=e){var r=qe[16*e-1],o=W;i>>=2;for(var a=0;a<16*e;a+=16){var s=i+a;r[a]=o[s],r[a+1]=o[s+1],r[a+2]=o[s+2],r[a+3]=o[s+3],r[a+4]=o[s+4],r[a+5]=o[s+5],r[a+6]=o[s+6],r[a+7]=o[s+7],r[a+8]=o[s+8],r[a+9]=o[s+9],r[a+10]=o[s+10],r[a+11]=o[s+11],r[a+12]=o[s+12],r[a+13]=o[s+13],r[a+14]=o[s+14],r[a+15]=o[s+15]}}else r=W.subarray(i>>2,i+64*e>>2);on.uniformMatrix4fv(Ve(t),!!n,r)}},Kc:function(t){t=_e[t],on.useProgram(t),on.If=t},Lc:function(t,e){on.vertexAttrib1f(t,e)},Mc:function(t,e){on.vertexAttrib2f(t,W[e>>2],W[e+4>>2])},Nc:function(t,e){on.vertexAttrib3f(t,W[e>>2],W[e+4>>2],W[e+8>>2])},Oc:function(t,e){on.vertexAttrib4f(t,W[e>>2],W[e+4>>2],W[e+8>>2],W[e+12>>2])},pc:function(t,e){on.vertexAttribDivisor(t,e)},qc:function(t,e,n,i,r){on.vertexAttribIPointer(t,e,n,i,r)},Pc:function(t,e,n,i,r,o){on.vertexAttribPointer(t,e,n,!!i,r,o)},Qc:function(t,e,n,i){on.viewport(t,e,n,i)},lb:function(t,e,n,i){on.waitSync(xe[t],e,(n>>>0)+4294967296*i)},tb:function(t){var e=B.length;if(2147483648<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var i=e*(1+.2/n);i=Math.min(i,t+100663296);var r=Math;i=Math.max(t,i),r=r.min.call(r,2147483648,i+(65536-i%65536)%65536);t:{try{E.grow(r-I.byteLength+65535>>>16),K();var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},nb:function(){return Le?Le.Vf:0},wb:function(t,e){var n=0;return Ke().forEach((function(i,r){var o=e+n;for(r=U[t+4*r>>2]=o,o=0;o<i.length;++o)D[r++>>0]=i.charCodeAt(o);D[r>>0]=0,n+=i.length+1})),0},xb:function(t,e){var n=Ke();U[t>>2]=n.length;var i=0;return n.forEach((function(t){i+=t.length+1})),U[e>>2]=i,0},Jb:function(t){P||(e.onExit&&e.onExit(t),k=!0),m(t,new yn(t))},P:function(){return 52},ob:function(){return 52},Cb:function(){return 52},pb:function(){return 70},U:function(t,e,n,i){for(var r=0,o=0;o<n;o++){var a=U[e>>2],s=U[e+4>>2];e+=8;for(var l=0;l<s;l++){var c=B[a+l],h=Je[t];0===c||10===c?((1===t?w:S)(x(h,0)),h.length=0):h.push(c)}r+=s}return U[i>>2]=r,0},c:function(){return A},l:function(t,e){var n=mn();try{return ht(t)(e)}catch(t){if(gn(n),t!==t+0)throw t;pn(1,0)}},s:function(t,e,n){var i=mn();try{return ht(t)(e,n)}catch(t){if(gn(i),t!==t+0)throw t;pn(1,0)}},m:function(t,e,n,i){var r=mn();try{return ht(t)(e,n,i)}catch(t){if(gn(r),t!==t+0)throw t;pn(1,0)}},K:function(t,e,n,i,r){var o=mn();try{return ht(t)(e,n,i,r)}catch(t){if(gn(o),t!==t+0)throw t;pn(1,0)}},Nb:function(t,e,n,i,r,o){var a=mn();try{return ht(t)(e,n,i,r,o)}catch(t){if(gn(a),t!==t+0)throw t;pn(1,0)}},$:function(t,e,n,i,r,o,a){var s=mn();try{return ht(t)(e,n,i,r,o,a)}catch(t){if(gn(s),t!==t+0)throw t;pn(1,0)}},_:function(t,e,n,i,r,o,a,s,l,c){var h=mn();try{return ht(t)(e,n,i,r,o,a,s,l,c)}catch(t){if(gn(h),t!==t+0)throw t;pn(1,0)}},R:function(t){var e=mn();try{ht(t)()}catch(t){if(gn(e),t!==t+0)throw t;pn(1,0)}},q:function(t,e){var n=mn();try{ht(t)(e)}catch(t){if(gn(n),t!==t+0)throw t;pn(1,0)}},A:function(t,e,n){var i=mn();try{ht(t)(e,n)}catch(t){if(gn(i),t!==t+0)throw t;pn(1,0)}},n:function(t,e,n,i){var r=mn();try{ht(t)(e,n,i)}catch(t){if(gn(r),t!==t+0)throw t;pn(1,0)}},w:function(t,e,n,i,r){var o=mn();try{ht(t)(e,n,i,r)}catch(t){if(gn(o),t!==t+0)throw t;pn(1,0)}},Mb:function(t,e,n,i,r,o){var a=mn();try{ht(t)(e,n,i,r,o)}catch(t){if(gn(a),t!==t+0)throw t;pn(1,0)}},Kb:function(t,e,n,i,r,o,a){var s=mn();try{ht(t)(e,n,i,r,o,a)}catch(t){if(gn(s),t!==t+0)throw t;pn(1,0)}},Lb:function(t,e,n,i,r,o,a,s,l,c){var h=mn();try{ht(t)(e,n,i,r,o,a,s,l,c)}catch(t){if(gn(h),t!==t+0)throw t;pn(1,0)}},d:function(t){A=t},rb:function(t,e,n,i){return function(t,e,n,i){function r(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function o(t,e){return r(t,e,"0")}function a(t,e){function n(t){return 0>t?-1:0<t?1:0}var i;return 0===(i=n(t.getFullYear()-e.getFullYear()))&&0===(i=n(t.getMonth()-e.getMonth()))&&(i=n(t.getDate()-e.getDate())),i}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.qe;for(t=new Date(new Date(t.re+1900,0,1).getTime());0<e;){var n=t.getMonth(),i=(Ze(t.getFullYear())?tn:en)[n];if(!(e>i-t.getDate())){t.setDate(t.getDate()+e);break}e-=i-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=a(e,t)?0>=a(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=N[i+40>>2];for(var h in i={qg:N[i>>2],pg:N[i+4>>2],Ye:N[i+8>>2],kf:N[i+12>>2],Ze:N[i+16>>2],re:N[i+20>>2],ke:N[i+24>>2],qe:N[i+28>>2],wg:N[i+32>>2],og:N[i+36>>2],rg:c?F(c):""},n=F(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(h,"g"),c[h]);var u="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(h in c={"%a":function(t){return u[t.ke].substring(0,3)},"%A":function(t){return u[t.ke]},"%b":function(t){return d[t.Ze].substring(0,3)},"%B":function(t){return d[t.Ze]},"%C":function(t){return o((t.re+1900)/100|0,2)},"%d":function(t){return o(t.kf,2)},"%e":function(t){return r(t.kf,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return o(t.Ye,2)},"%I":function(t){return 0==(t=t.Ye)?t=12:12<t&&(t-=12),o(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Ze-1;e+=(Ze(t.re+1900)?tn:en)[n++]);return o(t.kf+e,3)},"%m":function(t){return o(t.Ze+1,2)},"%M":function(t){return o(t.pg,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.Ye&&12>t.Ye?"AM":"PM"},"%S":function(t){return o(t.qg,2)},"%t":function(){return"\t"},"%u":function(t){return t.ke||7},"%U":function(t){return o(Math.floor((t.qe+7-t.ke)/7),2)},"%V":function(t){var e=Math.floor((t.qe+7-(t.ke+6)%7)/7);if(2>=(t.ke+371-t.qe-2)%7&&e++,e)53==e&&(4==(n=(t.ke+371-t.qe)%7)||3==n&&Ze(t.re)||(e=1));else{e=52;var n=(t.ke+7-t.qe-1)%7;(4==n||5==n&&Ze(t.re%400-1))&&e++}return o(e,2)},"%w":function(t){return t.ke},"%W":function(t){return o(Math.floor((t.qe+7-(t.ke+6)%7)/7),2)},"%y":function(t){return(t.re+1900).toString().substring(2)},"%Y":function(t){return t.re+1900},"%z":function(t){var e=0<=(t=t.og);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.rg},"%%":function(){return"%"}},n=n.replace(/%%/g,"\0\0"),c)n.includes(h)&&(n=n.replace(new RegExp(h,"g"),c[h](i)));return h=function(t){var e=Array(R(t)+1);return O(t,e,0,e.length),e}(n=n.replace(/\0\0/g,"%")),h.length>e?0:(D.set(h,t),h.length-1)}(t,e,n,i)}};!function(){function t(t){e.asm=t.exports,E=e.asm.dd,K(),Q=e.asm.gd,Z.unshift(e.asm.ed),it--,e.monitorRunDependencies&&e.monitorRunDependencies(it),0==it&&rt&&(t=rt,rt=null,t())}function n(e){t(e.instance)}function i(t){return function(){if(!T&&(g||y)){if("function"==typeof fetch&&!nt.startsWith("file://"))return fetch(nt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+nt+"'";return t.arrayBuffer()})).catch((function(){return lt()}));if(s)return new Promise((function(t,e){s(nt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return lt()}))}().then((function(t){return WebAssembly.instantiate(t,o)})).then((function(t){return t})).then(t,(function(t){S("failed to asynchronously prepare wasm: "+t),ot(t)}))}var o={a:cn};if(it++,e.monitorRunDependencies&&e.monitorRunDependencies(it),e.instantiateWasm)try{return e.instantiateWasm(o,t)}catch(t){return S("Module.instantiateWasm callback failed with error: "+t),!1}(T||"function"!=typeof WebAssembly.instantiateStreaming||at()||nt.startsWith("file://")||v||"function"!=typeof fetch?i(n):fetch(nt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,o).then(n,(function(t){return S("wasm streaming compile failed: "+t),S("falling back to ArrayBuffer instantiation"),i(n)}))}))).catch(r)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.ed).apply(null,arguments)};var hn=e._malloc=function(){return(hn=e._malloc=e.asm.fd).apply(null,arguments)},un=e._free=function(){return(un=e._free=e.asm.hd).apply(null,arguments)},dn=e.___getTypeName=function(){return(dn=e.___getTypeName=e.asm.id).apply(null,arguments)};e.___embind_register_native_and_builtin_types=function(){return(e.___embind_register_native_and_builtin_types=e.asm.jd).apply(null,arguments)};var fn,pn=e._setThrew=function(){return(pn=e._setThrew=e.asm.kd).apply(null,arguments)},mn=e.stackSave=function(){return(mn=e.stackSave=e.asm.ld).apply(null,arguments)},gn=e.stackRestore=function(){return(gn=e.stackRestore=e.asm.md).apply(null,arguments)};function yn(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function vn(){function t(){if(!fn&&(fn=!0,e.calledRun=!0,!k)){if(ct(Z),i(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();tt.unshift(t)}ct(tt)}}if(!(0<it)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)et();ct(J),0<it||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.dynCall_viji=function(){return(e.dynCall_viji=e.asm.nd).apply(null,arguments)},e.dynCall_vijiii=function(){return(e.dynCall_vijiii=e.asm.od).apply(null,arguments)},e.dynCall_viiiiij=function(){return(e.dynCall_viiiiij=e.asm.pd).apply(null,arguments)},e.dynCall_jiiiijiiiii=function(){return(e.dynCall_jiiiijiiiii=e.asm.qd).apply(null,arguments)},e.dynCall_viiij=function(){return(e.dynCall_viiij=e.asm.rd).apply(null,arguments)},e.dynCall_jii=function(){return(e.dynCall_jii=e.asm.sd).apply(null,arguments)},e.dynCall_vij=function(){return(e.dynCall_vij=e.asm.td).apply(null,arguments)},e.dynCall_iiij=function(){return(e.dynCall_iiij=e.asm.ud).apply(null,arguments)},e.dynCall_iiiij=function(){return(e.dynCall_iiiij=e.asm.vd).apply(null,arguments)},e.dynCall_viij=function(){return(e.dynCall_viij=e.asm.wd).apply(null,arguments)},e.dynCall_ji=function(){return(e.dynCall_ji=e.asm.xd).apply(null,arguments)},e.dynCall_iij=function(){return(e.dynCall_iij=e.asm.yd).apply(null,arguments)},e.dynCall_jiiiii=function(){return(e.dynCall_jiiiii=e.asm.zd).apply(null,arguments)},e.dynCall_jiiiiii=function(){return(e.dynCall_jiiiiii=e.asm.Ad).apply(null,arguments)},e.dynCall_jiiiiji=function(){return(e.dynCall_jiiiiji=e.asm.Bd).apply(null,arguments)},e.dynCall_iijj=function(){return(e.dynCall_iijj=e.asm.Cd).apply(null,arguments)},e.dynCall_iiiji=function(){return(e.dynCall_iiiji=e.asm.Dd).apply(null,arguments)},e.dynCall_iiji=function(){return(e.dynCall_iiji=e.asm.Ed).apply(null,arguments)},e.dynCall_iijjiii=function(){return(e.dynCall_iijjiii=e.asm.Fd).apply(null,arguments)},e.dynCall_vijjjii=function(){return(e.dynCall_vijjjii=e.asm.Gd).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.Hd).apply(null,arguments)},e.dynCall_viijii=function(){return(e.dynCall_viijii=e.asm.Id).apply(null,arguments)},e.dynCall_iiiiij=function(){return(e.dynCall_iiiiij=e.asm.Jd).apply(null,arguments)},e.dynCall_iiiiijj=function(){return(e.dynCall_iiiiijj=e.asm.Kd).apply(null,arguments)},e.dynCall_iiiiiijj=function(){return(e.dynCall_iiiiiijj=e.asm.Ld).apply(null,arguments)},rt=function t(){fn||vn(),fn||(rt=t)},e.run=vn,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return vn(),t.ready});t.exports=i}(S);class T{constructor(t){this.startTime=NaN,this.stopTime=NaN,this.stopped=!0,this.cumulativeElapsed=NaN,this.name=t}static now(){return window.performance.now()}static start(t){let e=this._timers.filter((e=>e.name===t)).find(Boolean);if(void 0===e)e=new T(t),e.cumulativeElapsed=0,this._timers.push(e);else if(0==e.stopped)throw new Error(`can't start timer. timer with name ${t} is already started`);e.startTime=window.performance.now(),e.stopped=!1}static stop(t){const e=this._timers.filter((e=>e.name===t)).find(Boolean);if(void 0===e)throw new Error(`can't stop timer. timer with name ${t} does not exist`);if(!0===e.stopped)throw new Error(`can't stop timer. timer with name ${t} is already stopped`);e.stopTime=window.performance.now(),e.cumulativeElapsed=e.cumulativeElapsed+e.stopTime-e.startTime,e.stopped=!0}static restart(t){const e=this._timers.filter((e=>e.name===t)).find(Boolean);if(void 0===e)throw new Error(`can't restart timer. timer with name ${t} does not exist`);e.startTime=window.performance.now(),e.cumulativeElapsed=0,e.stopped=!1}static elapsed(t){const e=this._timers.filter((e=>e.name===t)).find(Boolean);if(void 0===e)throw new Error(`can't get elapsed time. timer with name ${t} does not exist`);return e.stopped?e.cumulativeElapsed:e.cumulativeElapsed+window.performance.now()-e.startTime}static remove(t){if(void 0===this._timers.filter((e=>e.name===t)).find(Boolean))throw new Error(`can't remove timer. timer with name ${t} does not exist`);this._timers=this._timers.filter((e=>e.name!=t))}static removeAll(){this._timers=new Array}static exists(t){return this._timers.some((e=>e.name===t))}}T._timers=new Array;class A{static generate(){try{return crypto.randomUUID()}catch(t){let e;try{e=()=>crypto.getRandomValues(new Uint8Array(1))[0]}catch(t){e=()=>Math.floor(256*Math.random())}return(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(Number(t)^e()&15>>Number(t)/4).toString(16)))}}}!function(t){t.topToTopOf="topToTopOf",t.topToBottomOf="topToBottomOf",t.bottomToTopOf="bottomToTopOf",t.bottomToBottomOf="bottomToBottomOf",t.startToStartOf="startToStartOf",t.startToEndOf="startToEndOf",t.endToEndOf="endToEndOf",t.endToStartOf="endToStartOf"}(g||(g={}));class P{constructor(t,e){this.verticalConstraint=!1,this.focalEntityMinimum=!1,this.alterEntityMinimum=!1,this.verticalTypes=[g.topToTopOf,g.topToBottomOf,g.bottomToTopOf,g.bottomToBottomOf],this.focalEntityMinimumTypes=[g.topToTopOf,g.topToBottomOf,g.startToStartOf,g.startToEndOf],this.alterEntityMinimumTypes=[g.topToTopOf,g.bottomToTopOf,g.startToStartOf,g.endToStartOf],this.type=t,this.alterEntity=e,this.verticalTypes.includes(t)?(this.verticalConstraint=!0,this.focalEntityMinimumTypes.includes(t)?this.focalEntityMinimum=!0:this.focalEntityMinimum=!1,this.alterEntityMinimumTypes.includes(t)?this.alterEntityMinimum=!0:this.alterEntityMinimum=!1):(this.verticalConstraint=!1,this.focalEntityMinimumTypes.includes(t)?this.focalEntityMinimum=!0:this.focalEntityMinimum=!1,this.alterEntityMinimumTypes.includes(t)?this.alterEntityMinimum=!0:this.alterEntityMinimum=!1)}}function E(t,e){t.isDrawable&&function(t,e){e.anchorPoint&&(t.anchorPoint=e.anchorPoint),e.zPosition&&(t.zPosition=e.zPosition)}(t,e),t.isText&&function(t,e){e.text&&(t.text=e.text),e.fontName&&(t.fontName=e.fontName),e.fontColor&&(t.fontColor=e.fontColor),e.fontSize&&(t.fontSize=e.fontSize)}(t,e)}!function(t){t.Entity="Entity",t.Scene="Scene",t.Sprite="Sprite",t.Label="Label",t.TextLine="TextLine",t.Shape="Shape",t.Composite="Composite"}(y||(y={}));class k{constructor(t={}){this.type=y.Entity,this.isDrawable=!1,this.isShape=!1,this.isText=!1,this.position={x:0,y:0},this.scale=1,this.isUserInteractionEnabled=!1,this.hidden=!1,this.layout={},this.children=new Array,this.absolutePosition={x:0,y:0},this.size={width:0,height:0},this.absoluteScale=1,this.actions=new Array,this.originalActions=new Array,this.eventListeners=new Array,this.uuid=A.generate(),this.needsInitialization=!0,this.userData={},this.loopMessages=new Set,this.pressed=!1,this.pressedInHitArea=!1,this.toString=()=>this.name!==this.uuid?`"${this.name}" (${this.type}, ${this.uuid})`:`"${this.type} (${this.uuid})`,void 0===t.name?this.name=this.uuid:this.name=t.name,t.position&&(this.position=t.position),t.scale&&(this.scale=t.scale),t.isUserInteractionEnabled&&(this.isUserInteractionEnabled=t.isUserInteractionEnabled),t.hidden&&(this.hidden=t.hidden),t.layout&&(this.layout=t.layout)}initialize(){throw new Error("initialize() called in abstract base class Entity.")}get game(){const t=e=>{if(e.parent)return e.parent.type===y.Scene?e.parent:t(e.parent);throw new Error(`Entity ${this} has not been added to a scene.`)};return t(this).game}addChild(t){if(t.type==y.Scene)throw new Error("A scene cannot be the child of an entity. A scene can only be added to a game object");if(t.parent=this,this.children.map((t=>t.name)).includes(t.name))throw new Error(`Cannot add child entity ${t.toString()} to parent entity ${this.toString()}. A child with name "${t.name}" already exists on parent.`);this.children.push(t)}removeAllChildren(){for(;this.children.length;)this.children.pop()}removeChild(t){if(!this.children.includes(t))throw new Error(`cannot remove entity ${t} from parent ${this} because the entity is not currently a child of the parent`);this.children=this.children.filter((e=>e!==t))}removeChildren(t){t.forEach((t=>{if(!this.children.includes(t))throw new Error(`cannot remove entity ${t} from parent ${this} because the entity is not currently a child of the parent`)})),this.children=this.children.filter((e=>!t.includes(e)))}descendant(t){const e=this.descendants.filter((e=>e.name===t)).find(Boolean);if(void 0===e)throw new Error(`descendant with name ${t} not found on parent ${this.toString()}`);return e}get descendants(){function t(e,n){n.push(e),e.children.forEach((e=>t(e,n)))}const e=new Array;return this.children.forEach((n=>t(n,e))),e}onTapDown(t,e=!0){this.addEventListener(n.TapDown,t,e)}onTapUp(t,e=!0){this.addEventListener(n.TapUp,t,e)}onTapUpAny(t,e=!0){this.addEventListener(n.TapUpAny,t,e)}onTapLeave(t,e=!0){this.addEventListener(n.TapLeave,t,e)}onPointerDown(t,e=!0){this.addEventListener(n.PointerDown,t,e)}onPointerUp(t,e=!0){this.addEventListener(n.PointerUp,t,e)}onPointerMove(t,e=!0){this.addEventListener(n.PointerMove,t,e)}addEventListener(t,e,n){const i={type:t,entityUuid:this.uuid,callback:e};n&&(this.eventListeners=this.eventListeners.filter((t=>!(t.entityUuid===i.entityUuid&&t.type===i.type)))),this.eventListeners.push(i)}parseLayoutConstraints(t,e){const n=new Array;return Object.values(g).forEach((i=>{if(void 0!==t[i]){let r,o="";if(t[i]instanceof k)r=t[i];else{const n=t[i];r=e.filter((t=>t.name===n)).find(Boolean),o=`. sibling entity named "${n}" has not been added to the game object`}if(void 0===r)throw new Error("could not find sibling entity for constraint"+o);const a=new P(i,r);n.push(a)}})),n}calculateYFromConstraint(t,e,n,i){let r=t.alterEntity.absolutePosition.y;return t.alterEntityMinimum?t.alterEntity.type!==y.Scene&&(r-=.5*t.alterEntity.size.height*i):t.alterEntity.type!==y.Scene?r+=.5*t.alterEntity.size.height*i:r+=t.alterEntity.size.height*i,t.focalEntityMinimum?(r+=.5*this.size.height*i,r+=e*i):(r-=.5*this.size.height*i,r-=n*i),r}calculateXFromConstraint(t,e,n,i){let r=t.alterEntity.absolutePosition.x;return t.alterEntityMinimum?t.alterEntity.type!==y.Scene&&(r-=.5*t.alterEntity.size.width*i):t.alterEntity.type!==y.Scene?r+=.5*t.alterEntity.size.width*i:r+=t.alterEntity.size.width*i,t.focalEntityMinimum?(r+=.5*this.size.width*i,r+=e*i):(r-=.5*this.size.width*i,r-=n*i),r}update(){var t,e,n,i,o,a,s,l,c,h,u,d,f,p,m,v;if(this.needsInitialization&&(this.initialize(),this.needsInitialization=!1),void 0===this.parent)this.absolutePosition.x=this.position.x*this.scale,this.absolutePosition.y=this.position.y*this.scale,this.absoluteScale=this.scale;else if(this.absoluteScale=this.parent.absoluteScale*this.scale,void 0===(null===(t=this.layout)||void 0===t?void 0:t.constraints))this.absolutePosition.x=this.parent.absolutePosition.x+this.position.x*this.parent.absoluteScale,this.absolutePosition.y=this.parent.absolutePosition.y+this.position.y*this.parent.absoluteScale;else{const t=null!==(i=null===(n=null===(e=this.layout)||void 0===e?void 0:e.constraints)||void 0===n?void 0:n.horizontalBias)&&void 0!==i?i:.5,r=null!==(s=null===(a=null===(o=this.layout)||void 0===o?void 0:o.constraints)||void 0===a?void 0:a.verticalBias)&&void 0!==s?s:.5,g=null!==(c=null===(l=this.layout)||void 0===l?void 0:l.marginTop)&&void 0!==c?c:0,y=null!==(u=null===(h=this.layout)||void 0===h?void 0:h.marginBottom)&&void 0!==u?u:0,b=null!==(f=null===(d=this.layout)||void 0===d?void 0:d.marginStart)&&void 0!==f?f:0,w=null!==(m=null===(p=this.layout)||void 0===p?void 0:p.marginEnd)&&void 0!==m?m:0,S=this.parseLayoutConstraints(null===(v=this.layout)||void 0===v?void 0:v.constraints,this.parentSceneAsEntity.descendants),_=this.parent.absoluteScale,C=S.filter((t=>t.verticalConstraint)).map((t=>this.calculateYFromConstraint(t,g,y,_)));0===C.length||(1===C.length?this.absolutePosition.y=C[0]:2===C.length&&(this.absolutePosition.y=Math.min(C[0],C[1])+r*Math.abs(C[0]-C[1])));const T=S.filter((t=>!t.verticalConstraint)).map((t=>this.calculateXFromConstraint(t,b,w,_)));0===T.length||(1===T.length?this.absolutePosition.x=T[0]:2===T.length&&(this.absolutePosition.x=Math.min(T[0],T[1])+t*Math.abs(T[0]-T[1])))}const b=this.actions.filter((t=>t.runDuringTransition&&!t.completed)),w=this.actions.filter((t=>!t.runDuringTransition&&!t.completed));b.length>0?(b.forEach((t=>{-1===t.runStartTime&&(t.runStartTime=Globals.now)})),b.forEach((t=>r.evaluateAction(t,this,Globals.now,Globals.deltaTime)))):w.length>0&&(w.forEach((t=>{-1===t.runStartTime&&(t.runStartTime=Globals.now)})),w.forEach((t=>r.evaluateAction(t,this,Globals.now,Globals.deltaTime))));const S=new Map;this.children.forEach((t=>{var e;S.set(t.uuid,function(t,e){const n=new Array;return void 0===e||Object.values(g).forEach((i=>{if(void 0!==e[i]){let r,o="";if(e[i]instanceof k)r=e[i];else{const n=e[i];let a;a=t.type===y.Scene?t.descendants:t.parentSceneAsEntity.descendants,r=a.filter((t=>t.name===n)).find(Boolean),void 0===r&&(o=`. sibling entity named "${n}" has not been added to the game object`)}if(void 0===r)throw new Error("error getting uuid of sibling contraint"+o);r!==t&&n.push(r.uuid)}})),n}(this,null===(e=t.layout)||void 0===e?void 0:e.constraints))}));const _=this.findTopologicalSort(S);if(_.length>0){const t=_.reverse(),e=new Array;t.forEach((t=>{const n=this.children.filter((e=>e.uuid===t)).find(Boolean);if(void 0===n)throw new Error("error in dag topological sort");e.push(n)})),e.forEach((t=>t.update()))}else this.children.forEach((t=>t.update()))}drawChildren(t){this.children.filter((t=>!t.hidden&&t.isDrawable)).map((t=>t)).sort(((t,e)=>t.zPosition-e.zPosition)).forEach((e=>e.draw(t)))}run(t,e){this.actions.push(...t.initialize(this,e)),this.originalActions=this.actions.filter((t=>!1===t.runDuringTransition)).map((t=>r.cloneAction(t,e)))}removeAction(t){this.actions=this.actions.filter((e=>e.key!==t))}removeAllActions(){for(;this.actions.length;)this.actions.pop()}getEntityOptions(){return{name:this.name,position:this.position,scale:this.scale,isUserInteractionEnabled:this.isUserInteractionEnabled,hidden:this.hidden}}getDrawableOptions(){if(!this.isDrawable)throw new Error("getDrawableOptions() called object that is not IDrawable");return{anchorPoint:this.anchorPoint,zPosition:this.zPosition}}getTextOptions(){if(!this.isText)throw new Error("getTextOptions() called object that is not IText");return{text:this.text,fontName:this.fontName,fontColor:this.fontColor,fontSize:this.fontSize}}get canvasKit(){let t;return t=this.type===y.Scene?this:this.parentSceneAsEntity,t.game.canvasKit}get parentSceneAsEntity(){if(this.type===y.Scene)throw new Error(`Entity ${this} is a scene and cannot have a parent scene`);if(this.parent&&this.parent.type===y.Scene)return this.parent;if(this.parent)return this.parent.parentSceneAsEntity;throw new Error(`Entity ${this} has not been added to a scene`)}findTopologicalSort(t){var e;const n=[],i=new Map;t.forEach(((t,e)=>{i.has(e)||i.set(e,0),t.forEach((t=>{i.has(t)?i.set(t,i.get(t)+1):i.set(t,1)}))}));const r=[];for(i.forEach(((t,e)=>{0==t&&r.push(e)}));r.length>0;){const o=r.shift();if(void 0===o)throw"bad";n.push(o),t.has(o)&&(null===(e=t.get(o))||void 0===e||e.forEach((t=>{if(i.has(t)&&i.get(t)>0){const e=i.get(t)-1;i.set(t,e),0==e&&r.push(t)}})))}return n}}class M extends k{constructor(t={}){super(t),this.type=y.Composite,this.compositeType="<compositeType>",this.isDrawable=!0,this.anchorPoint={x:.5,y:.5},this.zPosition=0,E(this,t)}initialize(){}dispose(){}update(){super.update()}draw(t){super.drawChildren(t)}}class x{}x.Transparent=[0,0,0,0],x.MediumVioletRed=[199,21,133,1],x.DeepPink=[255,20,147,1],x.PaleVioletRed=[219,112,147,1],x.HotPink=[255,105,180,1],x.LightPink=[255,182,193,1],x.Pink=[255,192,203,1],x.DarkRed=[139,0,0,1],x.Red=[255,0,0,1],x.Firebrick=[178,34,34,1],x.Crimson=[220,20,60,1],x.IndianRed=[205,92,92,1],x.LightCoral=[240,128,128,1],x.Salmon=[250,128,114,1],x.DarkSalmon=[233,150,122,1],x.LightSalmon=[255,160,122,1],x.OrangeRed=[255,69,0,1],x.Tomato=[255,99,71,1],x.DarkOrange=[255,140,0,1],x.Coral=[255,127,80,1],x.Orange=[255,165,0,1],x.DarkKhaki=[189,183,107,1],x.Gold=[255,215,0,1],x.Khaki=[240,230,140,1],x.PeachPuff=[255,218,185,1],x.Yellow=[255,255,0,1],x.PaleGoldenrod=[238,232,170,1],x.Moccasin=[255,228,181,1],x.PapayaWhip=[255,239,213,1],x.LightGoldenrodYellow=[250,250,210,1],x.LemonChiffon=[255,250,205,1],x.LightYellow=[255,255,224,1],x.Maroon=[128,0,0,1],x.Brown=[165,42,42,1],x.SaddleBrown=[139,69,19,1],x.Sienna=[160,82,45,1],x.Chocolate=[210,105,30,1],x.DarkGoldenrod=[184,134,11,1],x.Peru=[205,133,63,1],x.RosyBrown=[188,143,143,1],x.Goldenrod=[218,165,32,1],x.SandyBrown=[244,164,96,1],x.Tan=[210,180,140,1],x.Burlywood=[222,184,135,1],x.Wheat=[245,222,179,1],x.NavajoWhite=[255,222,173,1],x.Bisque=[255,228,196,1],x.BlanchedAlmond=[255,235,205,1],x.Cornsilk=[255,248,220,1],x.DarkGreen=[0,100,0,1],x.Green=[0,128,0,1],x.DarkOliveGreen=[85,107,47,1],x.ForestGreen=[34,139,34,1],x.SeaGreen=[46,139,87,1],x.Olive=[128,128,0,1],x.OliveDrab=[107,142,35,1],x.MediumSeaGreen=[60,179,113,1],x.LimeGreen=[50,205,50,1],x.Lime=[0,255,0,1],x.SpringGreen=[0,255,127,1],x.MediumSpringGreen=[0,250,154,1],x.DarkSeaGreen=[143,188,143,1],x.MediumAquamarine=[102,205,170,1],x.YellowGreen=[154,205,50,1],x.LawnGreen=[124,252,0,1],x.Chartreuse=[127,255,0,1],x.LightGreen=[144,238,144,1],x.GreenYellow=[173,255,47,1],x.PaleGreen=[152,251,152,1],x.Teal=[0,128,128,1],x.DarkCyan=[0,139,139,1],x.LightSeaGreen=[32,178,170,1],x.CadetBlue=[95,158,160,1],x.DarkTurquoise=[0,206,209,1],x.MediumTurquoise=[72,209,204,1],x.Turquoise=[64,224,208,1],x.Aqua=[0,255,255,1],x.Cyan=[0,255,255,1],x.Aquamarine=[127,255,212,1],x.PaleTurquoise=[175,238,238,1],x.LightCyan=[224,255,255,1],x.Navy=[0,0,128,1],x.DarkBlue=[0,0,139,1],x.MediumBlue=[0,0,205,1],x.Blue=[0,0,255,1],x.MidnightBlue=[25,25,112,1],x.RoyalBlue=[65,105,225,1],x.SteelBlue=[70,130,180,1],x.DodgerBlue=[30,144,255,1],x.DeepSkyBlue=[0,191,255,1],x.CornflowerBlue=[100,149,237,1],x.SkyBlue=[135,206,235,1],x.LightSkyBlue=[135,206,250,1],x.LightSteelBlue=[176,196,222,1],x.LightBlue=[173,216,230,1],x.PowderBlue=[176,224,230,1],x.Indigo=[75,0,130,1],x.Purple=[128,0,128,1],x.DarkMagenta=[139,0,139,1],x.DarkViolet=[148,0,211,1],x.DarkSlateBlue=[72,61,139,1],x.BlueViolet=[138,43,226,1],x.DarkOrchid=[153,50,204,1],x.Fuchsia=[255,0,255,1],x.Magenta=[255,0,255,1],x.SlateBlue=[106,90,205,1],x.MediumSlateBlue=[123,104,238,1],x.MediumOrchid=[186,85,211,1],x.MediumPurple=[147,112,219,1],x.Orchid=[218,112,214,1],x.Violet=[238,130,238,1],x.Plum=[221,160,221,1],x.Thistle=[216,191,216,1],x.Lavender=[230,230,250,1],x.MistyRose=[255,228,225,1],x.AntiqueWhite=[250,235,215,1],x.Linen=[250,240,230,1],x.Beige=[245,245,220,1],x.WhiteSmoke=[245,245,245,1],x.LavenderBlush=[255,240,245,1],x.OldLace=[253,245,230,1],x.AliceBlue=[240,248,255,1],x.Seashell=[255,245,238,1],x.GhostWhite=[248,248,255,1],x.Honeydew=[240,255,240,1],x.FloralWhite=[255,250,240,1],x.Azure=[240,255,255,1],x.MintCream=[245,255,250,1],x.Snow=[255,250,250,1],x.Ivory=[255,255,240,1],x.White=[255,255,255,1],x.Black=[0,0,0,1],x.DarkSlateGray=[47,79,79,1],x.DimGray=[105,105,105,1],x.SlateGray=[112,128,144,1],x.Gray=[128,128,128,1],x.LightSlateGray=[119,136,153,1],x.DarkGray=[169,169,169,1],x.Silver=[192,192,192,1],x.LightGray=[211,211,211,1],x.Gainsboro=[220,220,220,1],x.RebeccaPurple=[102,51,153,1];class F{}F.FPS_DISPLAY_TEXT_FONT_SIZE=12,F.FPS_DISPLAY_TEXT_COLOR=[0,0,0,.5],F.FPS_DISPLAY_UPDATE_INTERVAL=1e3,F.MAXIMUM_RECORDED_ACTIVITY_METRICS=32,F.FPS_METRIC_REPORT_THRESHOLD=59,F.DEFAULT_SCENE_BACKGROUND_COLOR=x.White,F.DEFAULT_SHAPE_FILL_COLOR=x.Red,F.DEFAULT_PATH_STROKE_COLOR=x.Red,F.DEFAULT_PATH_LINE_WIDTH=2,F.DEFAULT_FONT_COLOR=x.Black,F.DEFAULT_FONT_SIZE=16,F.LIMITED_FPS_RATE=5,F.FREE_ENTITIES_SCENE_NAME="__freeEntitiesScene",F.OUTGOING_SCENE_NAME="__outgoingScene",F.OUTGOING_SCENE_SPRITE_NAME="__outgoingSceneSprite",F.OUTGOING_SCENE_IMAGE_NAME="__outgoingSceneSnapshot",function(t){t[t.MatchConstraint=0]="MatchConstraint"}(v||(v={}));class O extends k{constructor(t={}){super(t),this.type=y.Sprite,this.isDrawable=!0,this.anchorPoint={x:.5,y:.5},this.zPosition=0,this._imageName="",E(this,t),t.imageName&&(this.imageName=t.imageName)}initialize(){const t=this.parentSceneAsEntity.game.session;if(!t)throw new Error("activity is undefined");const e=t.imageManager,n=this.parentSceneAsEntity.game.uuid;if(this.loadedImage=e.getLoadedImage(n,this._imageName),!this.loadedImage)throw new Error(`could not create sprite. the image named ${this._imageName} has not been loaded`);this.size.width=this.loadedImage.width,this.size.height=this.loadedImage.height,this.needsInitialization=!1}dispose(){var t;d.Dispose([null===(t=this.loadedImage)||void 0===t?void 0:t.image])}set imageName(t){this._imageName=t,this.needsInitialization=!0}get imageName(){return this._imageName}duplicate(t){const e=new O(Object.assign(Object.assign(Object.assign({},this.getEntityOptions()),this.getDrawableOptions()),{imageName:this.imageName,name:t}));return this.children.length>0&&(e.children=this.children.map((t=>{const n=t.duplicate();return n.parent=e,n}))),e}update(){super.update()}draw(t){if(!this.hidden){if(this.loadedImage){t.save();const e=Globals.canvasScale/this.absoluteScale;t.scale(1/e,1/e);const n=(this.absolutePosition.x-this.size.width*this.anchorPoint.x*this.absoluteScale)*e,i=(this.absolutePosition.y-this.size.height*this.anchorPoint.y*this.absoluteScale)*e;t.drawImage(this.loadedImage.image,n,i),t.restore()}super.drawChildren(t)}}warmup(t){if(this.initialize(),!this.loadedImage)throw new Error(`warmup Sprite entity ${this.toString()}: image not loaded.`);t.drawImage(this.loadedImage.image,0,0),this.children.forEach((e=>{e.isDrawable&&e.warmup(t)}))}}class R extends k{constructor(t={}){super(t),this.type=y.Scene,this.isDrawable=!0,this.anchorPoint={x:0,y:0},this.zPosition=0,this._backgroundColor=F.DEFAULT_SCENE_BACKGROUND_COLOR,this._active=!1,this._transitioning=!1,E(this,t),t.backgroundColor&&(this.backgroundColor=t.backgroundColor)}initialize(){this.scale=Globals.rootScale,this.size.width=this.game.canvasCssWidth,this.size.height=this.game.canvasCssHeight,this.backgroundPaint=new this.canvasKit.Paint,this.backgroundPaint.setColor(this.canvasKit.Color(this.backgroundColor[0],this.backgroundColor[1],this.backgroundColor[2],this.backgroundColor[3])),this.backgroundPaint.setStyle(this.canvasKit.PaintStyle.Fill),this.needsInitialization=!1}dispose(){d.Dispose([this.backgroundPaint])}set game(t){this._game=t}get game(){if(void 0===this._game)throw new Error(`Scene ${this} has not been added to a game.`);return this._game}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t,this.needsInitialization=!0}duplicate(t){const e=new R(Object.assign(Object.assign(Object.assign({},this.getEntityOptions()),this.getDrawableOptions()),{backgroundColor:this.backgroundColor,name:t}));return e.game=this.game,this.children.length>0&&(e.children=this.children.map((t=>{const n=t.duplicate();return n.parent=e,n}))),e}onSetup(t){this._setupCallback=t}onAppear(t){this._appearCallback=t}draw(t){t.save();const e=Globals.canvasScale/this.absoluteScale;t.scale(1/e,1/e);const n=this.canvasKit.RRectXY(this.canvasKit.LTRBRect(this.position.x*e*Globals.rootScale,this.position.y*e*Globals.rootScale,(this.position.x+this.size.width)*e*Globals.rootScale,(this.position.y+this.size.height)*e*Globals.rootScale),0,0);if(!this.backgroundPaint)throw new Error(`in Scene ${this}, background paint is undefined.`);t.drawRRect(n,this.backgroundPaint),t.restore(),super.drawChildren(t)}warmup(t){this.initialize(),this.children.forEach((e=>{e.isDrawable&&e.warmup(t)}))}}class I{static slide(t){var e;return new B(t.direction,t.duration,null!==(e=t.easing)&&void 0!==e?e:i.linear)}static none(){return new D}}class D extends I{constructor(){super(),this.type=b.None,this.duration=NaN,this.easing=i.none}}class B extends I{constructor(t,e,n){super(),this.type=b.Slide,this.direction=t,this.duration=e,this.easing=n}}!function(t){t.Slide="Slide",t.None="None"}(b||(b={})),function(t){t.Up="Up",t.Down="Down",t.Right="Right",t.Left="Left"}(w||(w={}));class L{constructor(t,e){this.scene=t,this.transition=e}}const G={type:"object",description:"Information about the user's device.",properties:{userAgent:{type:"string",description:"The user agent string returned by navigator.userAgent."},devicePixelRatio:{type:"number",description:"Ratio of physical pixels to CSS pixels."},screen:{type:"object",description:"Screen information returned by window.screen.",properties:{availHeight:{type:"number",description:"Height of screen, in pixels, excluding UI features."},availWidth:{type:"number",description:"Width of screen, in pixels, excluding UI features."},colorDepth:{type:"number",description:"Color depth of screen."},height:{type:"number",description:"Height of screen, in pixels"},width:{type:"number",description:"Width of screen, in pixels."},orientation:{type:"object",description:"Information about the device's orientation.",properties:{type:{type:"string",description:"The orientation type (ScreenOrientation.type)."},angle:{type:"number",description:"The orientation angle (ScreenOrientation.angle)."}}},pixelDepth:{type:"number",description:"Pixel depth of screen."}}},webGlRenderer:{type:"string",description:"WebGL driver vendor and renderer. Taken from WEBGL_debug_renderer_info."}}};class N{static getRendererString(){const t=document.createElement("canvas");t.id="webgl-renderer-info-canvas",t.height=0,t.width=0,t.hidden=!0,document.body.appendChild(t);const e=t.getContext("webgl");let n="no webgl context";if(!e)return n;const i=e.getExtension("WEBGL_debug_renderer_info");return n=null!=i?String(e.getParameter(i.UNMASKED_VENDOR_WEBGL))+", "+String(e.getParameter(i.UNMASKED_RENDERER_WEBGL)):"no debug renderer info",t.remove(),n}static dispose(){const t=document.getElementById("webgl-renderer-info-canvas");t&&t.remove()}}class U{constructor(t){var e;this.locale="",this.fallbackLocale="en",this.environmentLocale=this.getEnvironmentLocale(),this.options=t,this._translations=null!==(e=this.mergeAdditionalTranslations(t.translations,t.additionalTranslations))&&void 0!==e?e:{},"auto"===t.locale.toLowerCase()?(this.locale=this.environmentLocale,this.locale||(t.fallbackLocale?(this.fallbackLocale=t.fallbackLocale,console.warn(`auto locale requested, but environment cannot provide locale. Using fallback locale ${t.fallbackLocale}`)):console.warn('auto locale requested, but environment cannot provide locale. Defaulting to "en".'))):(this.locale=t.locale,t.fallbackLocale&&(this.fallbackLocale=t.fallbackLocale))}static makeLocalizationParameters(){return JSON.parse(JSON.stringify({locale:{type:["string","null"],default:null,description:'Locale to use for localization, or "auto" to request from the environment.'},fallback_locale:{type:["string","null"],default:null,description:'Locale to use if requested locale translation is not availble, or if "auto" locale was requested and environment cannot provide a locale.'},missing_translation_font_color:{type:["array","null"],default:null,description:"Font color for strings that are missing translation and use the fallback locale or untranslated string, [r,g,b,a].",items:{type:"number"}},translations:{type:["object","null"],default:null,description:"Additional translations for localization."}}))}t(t,e=!1){var n,i;return e?null===(n=this._translations[this.fallbackLocale])||void 0===n?void 0:n[t]:null===(i=this._translations[this.locale])||void 0===i?void 0:i[t]}get translations(){return this._translations}set translations(t){this._translations=t}getEnvironmentLocale(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language}mergeAdditionalTranslations(t,e){if(!t&&!e)return;if(!e)return t;if(!t)return e;const n={},i=new Array;for(const r in t)i.push(r),n[r]=Object.assign(Object.assign({},t[r]),e[r]);for(const t in e)i.includes(t)||(n[t]=e[t]);return n}}var W,z,j;!function(t){t[t.Center=0]="Center",t[t.Left=1]="Left",t[t.Right=2]="Right"}(W||(W={}));class H extends k{constructor(t={}){super(t),this.type=y.Label,this.isDrawable=!0,this.isText=!0,this.anchorPoint={x:.5,y:.5},this.zPosition=0,this._text="",this._fontColor=F.DEFAULT_FONT_COLOR,this._fontSize=F.DEFAULT_FONT_SIZE,this._horizontalAlignmentMode=W.Center,this._translatedText="",E(this,t),t.horizontalAlignmentMode&&(this.horizontalAlignmentMode=t.horizontalAlignmentMode),void 0!==t.preferredMaxLayoutWidth&&(this.preferredMaxLayoutWidth=t.preferredMaxLayoutWidth),t.backgroundColor&&(this.backgroundColor=t.backgroundColor)}initialize(){var t,e,n;let i=this.canvasKit.TextAlign.Center;switch(this.horizontalAlignmentMode){case W.Center:i=this.canvasKit.TextAlign.Center;break;case W.Left:i=this.canvasKit.TextAlign.Left;break;case W.Right:i=this.canvasKit.TextAlign.Right;break;default:throw new Error("unknown horizontalAlignmentMode")}this.text||(this.text="");let r,o=this.canvasKit.Color(this.fontColor[0],this.fontColor[1],this.fontColor[2],this.fontColor[3]);const a=this.parentSceneAsEntity.game.i18n;if(a){let t=a.t(this.text);if(void 0===t){const e=a.t(this.text,!0);t=void 0===e?this.text:e,a.options.missingTranslationFontColor&&(o=this.canvasKit.Color(a.options.missingTranslationFontColor[0],a.options.missingTranslationFontColor[1],a.options.missingTranslationFontColor[2],a.options.missingTranslationFontColor[3]))}this._translatedText=t,r=this._translatedText,""===this._translatedText&&console.warn(`warning: empty translated text in label "${this.name}"`)}else r=this.text,this._translatedText="",""===this.text&&console.warn(`warning: empty text in label "${this.name}"`);this.paraStyle=new this.canvasKit.ParagraphStyle({textStyle:{color:o,backgroundColor:this.backgroundColor?this.canvasKit.Color(this.backgroundColor[0],this.backgroundColor[1],this.backgroundColor[2],this.backgroundColor[3]):void 0,fontFamilies:this.fontName?[this.fontName]:void 0,fontSize:this.fontSize*Globals.canvasScale},textAlign:i});const s=this.parentSceneAsEntity.game.session;if(!s)throw new Error("session is undefined");const l=s.fontManager;if(void 0===l.fontMgr)throw new Error("no fonts loaded");this.builder=this.canvasKit.ParagraphBuilder.Make(this.paraStyle,l.fontMgr),this.builder.addText(r),this.paragraph=this.builder.build();const c=null!==(t=this.preferredMaxLayoutWidth)&&void 0!==t?t:Globals.canvasCssWidth;let h=c;if(0===c||0===this.layout.width){if(void 0===this.parent)throw new Error("width is set to match parent, but entity has no parent");const t=null!==(e=this.layout.marginStart)&&void 0!==e?e:0,i=null!==(n=this.layout.marginEnd)&&void 0!==n?n:0;h=this.parent.size.width-(t+i)}this.paragraph.layout(h*Globals.canvasScale),0===c||0===this.layout.width?this.size.width=h:(this.paragraph.layout(Math.ceil(this.paragraph.getLongestLine())),this.size.width=this.paragraph.getMaxWidth()/Globals.canvasScale),this.size.height=this.paragraph.getHeight()/Globals.canvasScale,this.needsInitialization=!1}dispose(){d.Dispose([this.paragraph,this.builder])}get text(){return this._text}set text(t){this._text=t,this.needsInitialization=!0}get translatedText(){return this._translatedText}get fontName(){return this._fontName}set fontName(t){this._fontName=t,this.needsInitialization=!0}get fontColor(){return this._fontColor}set fontColor(t){this._fontColor=t,this.needsInitialization=!0}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t,this.needsInitialization=!0}get horizontalAlignmentMode(){return this._horizontalAlignmentMode}set horizontalAlignmentMode(t){this._horizontalAlignmentMode=t,this.needsInitialization=!0}get preferredMaxLayoutWidth(){return this._preferredMaxLayoutWidth}set preferredMaxLayoutWidth(t){this._preferredMaxLayoutWidth=t,this.needsInitialization=!0}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t,this.needsInitialization=!0}duplicate(t){const e=new H(Object.assign(Object.assign(Object.assign(Object.assign({},this.getEntityOptions()),this.getDrawableOptions()),this.getTextOptions()),{horizontalAlignmentMode:this.horizontalAlignmentMode,preferredMaxLayoutWidth:this.preferredMaxLayoutWidth,backgroundColor:this.backgroundColor,name:t}));return this.children.length>0&&(e.children=this.children.map((t=>{const n=t.duplicate();return n.parent=e,n}))),e}update(){super.update()}draw(t){if(this.parent&&""!==this.text){t.save();const e=Globals.canvasScale/this.absoluteScale;t.scale(1/e,1/e);const n=(this.absolutePosition.x-this.size.width*this.anchorPoint.x*this.absoluteScale)*e,i=(this.absolutePosition.y-this.size.height*this.anchorPoint.y*this.absoluteScale)*e;if(void 0===this.paragraph)throw new Error("no paragraph");t.drawParagraph(this.paragraph,n,i),t.restore()}super.drawChildren(t)}warmup(t){if(0===Object.keys(this.layout).length){if(this.initialize(),!this.paragraph)throw new Error(`warmup Label entity ${this.toString()}: paragraph is undefined`);t.drawParagraph(this.paragraph,0,0)}}}class ${static SingleFromRange(t,e){return Math.floor(Math.random()*(e-t+1))+t}static FromRangeWithoutReplacement(t,e,n){if(t>n-e+1)throw new Error(`number of requested draws (n = ${t}) is greater than number of integers in range [ ${e}, ${n}]`);const i=new Array;for(let r=0;r<t;r++){const r=$.SingleFromRange(e,n);i.includes(r)?t++:i.push(r)}return i}static FromGridWithoutReplacement(t,e,n,i){const r=new Array,o=e*n-1,a=this.FromRangeWithoutReplacement(t,0,o);let s=0,l=NaN;for(;s<t;){const t=a[s]%n,e=(a[s]-t)/n;if(void 0===i||i(e,t))r.push({row:e,column:t}),s++;else{do{l=this.FromRangeWithoutReplacement(1,0,o)[0]}while(a.includes(l));a[s]=l}}return r}}!function(t){t.Undefined="Undefined",t.Rectangle="Rectangle",t.Circle="Circle",t.Path="Path"}(z||(z={}));class V extends k{constructor(t={}){if(super(t),this.type=y.Shape,this.isDrawable=!0,this.isShape=!0,this.anchorPoint={x:.5,y:.5},this.zPosition=0,this.shapeType=z.Undefined,this.cornerRadius=0,this._fillColor=F.DEFAULT_SHAPE_FILL_COLOR,E(this,t),void 0!==t.path&&(this.path=t.path,this.size.width=t.path.size.width,this.size.height=t.path.size.height,this.strokeColor||(this.strokeColor=F.DEFAULT_PATH_STROKE_COLOR),this.lineWidth||(this.lineWidth=F.DEFAULT_PATH_LINE_WIDTH),this.shapeType=z.Path,t.circleOfRadius||t.rect))throw new Error("Shape must specify only one of: path, circleOfRadius, or rect");if(void 0!==t.circleOfRadius&&(this.circleOfRadius=t.circleOfRadius,this.shapeType=z.Circle,t.path||t.rect))throw new Error("Shape must specify only one of: path, circleOfRadius, or rect");t.rect&&(this.rect=t.rect,t.rect.size?(this.size.width=t.rect.size.width,this.size.height=t.rect.size.height):void 0!==t.rect.width&&void 0!==t.rect.height&&(this.size.width=t.rect.width,this.size.height=t.rect.height),t.rect.origin?this.position=t.rect.origin:void 0!==t.rect.x&&void 0!==t.rect.y&&(this.position={x:t.rect.x,y:t.rect.y}),this.shapeType=z.Rectangle),t.cornerRadius&&(this.cornerRadius=t.cornerRadius),t.fillColor&&(this.fillColor=t.fillColor),t.strokeColor&&(this.strokeColor=t.strokeColor),t.lineWidth&&(this.lineWidth=t.lineWidth),t.strokeColor&&void 0===t.lineWidth&&console.warn(`warning: for entity ${this}, strokeColor = ${t.strokeColor} but lineWidth is undefined. In normal usage, both would be set or both would be undefined.`),void 0===t.strokeColor&&t.lineWidth&&console.warn(`warning: for entity ${this}, lineWidth = ${t.lineWidth} but strokeColor is undefined. In normal usage, both would be set or both would be undefined.`)}initialize(){if(this.fillColor){const t=this.canvasKit;this.fillColorPaint=new t.Paint,this.fillColorPaint.setColor(t.Color(this.fillColor[0],this.fillColor[1],this.fillColor[2],this.fillColor[3])),this.fillColorPaint.setStyle(t.PaintStyle.Fill),this.fillColorPaint.setAntiAlias(!0)}if(this.strokeColor){const t=this.canvasKit;this.strokeColorPaint=new t.Paint,this.strokeColorPaint.setColor(t.Color(this.strokeColor[0],this.strokeColor[1],this.strokeColor[2],this.strokeColor[3])),this.strokeColorPaint.setStyle(t.PaintStyle.Stroke),this.strokeColorPaint.setAntiAlias(!0)}this.needsInitialization=!1}dispose(){d.Dispose([this.strokeColorPaint,this.fillColorPaint])}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.needsInitialization=!0}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.needsInitialization=!0}duplicate(t){const e=new V(Object.assign(Object.assign(Object.assign({},this.getEntityOptions()),this.getDrawableOptions()),{shapeType:this.shapeType,circleOfRadius:this.circleOfRadius,rect:this.rect,cornerRadius:this.cornerRadius,fillColor:this.fillColor,strokeColor:this.strokeColor,lineWidth:this.lineWidth,name:t}));return this.children.length>0&&(e.children=this.children.map((t=>{const n=t.duplicate();return n.parent=e,n}))),e}update(){super.update()}draw(t){t.save();const e=Globals.canvasScale/this.absoluteScale;if(t.scale(1/e,1/e),this.shapeType===z.Path&&this.path){const n=(this.absolutePosition.x-this.anchorPoint.x*this.size.width*this.absoluteScale)*e,i=(this.absolutePosition.y-this.anchorPoint.y*this.size.height*this.absoluteScale)*e;if(this.strokeColor&&this.strokeColorPaint&&this.lineWidth){this.strokeColorPaint.setStrokeWidth(this.lineWidth*e);for(const r of this.path.subpaths){const o=r.flat();for(let r=0;r<o.length-1;r++)t.drawLine(n+o[r].x*e,i+o[r].y*e,n+o[r+1].x*e,i+o[r+1].y*e,this.strokeColorPaint)}}}if(this.shapeType===z.Circle&&void 0!==this.circleOfRadius){const n=this.absolutePosition.x*e,i=this.absolutePosition.y*e,r=this.circleOfRadius*this.absoluteScale*e;this.fillColor&&this.fillColorPaint&&t.drawCircle(n,i,r,this.fillColorPaint),this.strokeColor&&this.strokeColorPaint&&this.lineWidth&&(this.strokeColorPaint.setStrokeWidth(this.lineWidth*e),t.drawCircle(n,i,r,this.strokeColorPaint))}if(this.shapeType===z.Rectangle){const n=this.canvasKit.RRectXY(this.canvasKit.LTRBRect((this.absolutePosition.x-this.anchorPoint.x*this.size.width*this.absoluteScale)*e,(this.absolutePosition.y-this.anchorPoint.y*this.size.height*this.absoluteScale)*e,(this.absolutePosition.x+this.size.width*this.absoluteScale-this.anchorPoint.x*this.size.width*this.absoluteScale)*e,(this.absolutePosition.y+this.size.height*this.absoluteScale-this.anchorPoint.y*this.size.height*this.absoluteScale)*e),this.cornerRadius*e,this.cornerRadius*e);this.fillColor&&this.fillColorPaint&&t.drawRRect(n,this.fillColorPaint),this.strokeColor&&this.strokeColorPaint&&this.lineWidth&&(this.strokeColorPaint.setStrokeWidth(this.lineWidth*e),t.drawRRect(n,this.strokeColorPaint))}t.restore(),super.drawChildren(t)}warmup(t){this.initialize(),this.children.forEach((e=>{e.isDrawable&&e.warmup(t)}))}}class q extends M{constructor(t){if(super(t),this.compositeType="grid",this.rows=0,this.columns=0,this.gridBackgroundColor=[0,0,233,.25],this.gridLineColor=x.Red,this.gridLineWidth=1,this.gridChildren=new Array,!t.size)throw new Error("grid size must be specified");if(this.size=t.size,!t.rows)throw new Error("rows must be specified");if(!(t.rows>=1))throw new Error("rows must be at least 1");if(this.rows=t.rows,!t.columns)throw new Error("columns must be specified");if(!(t.columns>=1))throw new Error("columns must be at least 1");this.columns=t.columns,t.backgroundColor&&(this.gridBackgroundColor=t.backgroundColor),t.gridLineColor&&(this.gridLineColor=t.gridLineColor),t.gridLineWidth&&(this.gridLineWidth=t.gridLineWidth),this.cellWidth=this.size.width/this.columns,this.cellHeight=this.size.height/this.rows}initialize(){super.removeAllChildren(),this.gridBackground=new V({name:"_"+this.name+"-gridBackground",rect:{size:this.size},fillColor:this.gridBackgroundColor,strokeColor:this.gridLineColor,lineWidth:this.gridLineWidth,isUserInteractionEnabled:this.isUserInteractionEnabled}),this.addChild(this.gridBackground),this.gridBackground.isUserInteractionEnabled=this.isUserInteractionEnabled;for(let t=1;t<this.columns;t++){const e=new V({name:"_"+this.name+"-gridVerticalLine-"+t,rect:{size:{width:this.gridLineWidth,height:this.size.height},origin:{x:-this.size.width/2+this.cellWidth*t,y:0}},fillColor:this.gridLineColor});this.gridBackground.addChild(e)}for(let t=1;t<this.rows;t++){const e=new V({name:"_"+this.name+"-gridHorizontalLine-"+t,rect:{size:{width:this.size.width,height:this.gridLineWidth},origin:{x:0,y:-this.size.height/2+this.cellHeight*t}},fillColor:this.gridLineColor});this.gridBackground.addChild(e)}this.gridChildren&&this.gridChildren.forEach((t=>{if(!this.cellWidth||!this.cellHeight||!this.gridBackground)throw new Error("cellWidth, cellHeight, or gridBackground undefined or null");const e=-this.size.width/2+this.cellWidth/2+t.column*this.cellWidth,n=-this.size.height/2+this.cellHeight/2+t.row*this.cellHeight;t.entity.position={x:e,y:n},this.gridBackground.addChild(t.entity)})),this.needsInitialization=!1}dispose(){}duplicate(t){const e=new q(Object.assign(Object.assign(Object.assign({},this.getEntityOptions()),this.getDrawableOptions()),{rows:this.rows,columns:this.columns,size:this.size,backgroundColor:this.gridBackgroundColor,gridLineWidth:this.gridLineWidth,gridLineColor:this.gridLineColor,name:t}));return this.children.length>0&&(e.children=this.children.map((t=>{const n=t.duplicate();return n.parent=e,n}))),e}update(){super.update()}draw(t){super.drawChildren(t)}warmup(t){this.initialize(),this.children.filter((t=>t.isDrawable)).forEach((e=>{e.warmup(t)}))}removeAllChildren(){if(0!==this.gridChildren.length){for(;this.gridChildren.length;)this.gridChildren.pop();this.needsInitialization=!0}}addAtCell(t,e,n){(e<0||e>=this.rows||n<0||n>=this.columns)&&console.warn(`warning: addAtCell() requested to add entity at row ${e}, column ${n}. This is outside the bounds of grid ${this.name}, which is size ${this.rows}x${this.columns}. Note that addAtCell() uses zero-based indexing. AddAtCell() will proceed, but may draw entities outside the grid`),this.gridChildren.push({entity:t,row:e,column:n}),this.needsInitialization=!0}removeAllAtCell(t,e){this.gridChildren=this.gridChildren.filter((n=>n.row!=t&&n.column!=e)),this.needsInitialization=!0}removeChild(t){if(!this.gridBackground)throw new Error("gridBackground is null or undefined");this.gridBackground.removeChild(t),this.gridChildren=this.gridChildren.filter((e=>e.entity!=t)),this.needsInitialization=!0}}class Y extends M{constructor(t){super(t),this.compositeType="button",this._backgroundColor=x.Black,this.size={width:200,height:50},this.cornerRadius=9,this.fontSize=20,this.text="",this._fontColor=x.White,t.text&&(this.text=t.text),t.size&&(this.size=t.size),t.cornerRadius&&(this.cornerRadius=t.cornerRadius),t.fontSize&&(this.fontSize=t.fontSize),t.fontColor&&(this.fontColor=t.fontColor),t.backgroundColor&&(this.backgroundColor=t.backgroundColor)}initialize(){this.removeAllChildren(),this.backgroundPaint=new this.canvasKit.Paint,this.backgroundPaint.setColor(this.canvasKit.Color(this.backgroundColor[0],this.backgroundColor[1],this.backgroundColor[2],this.backgroundColor[3])),this.backgroundPaint.setStyle(this.canvasKit.PaintStyle.Fill);const t=new V({rect:{size:this.size},cornerRadius:this.cornerRadius,fillColor:this._backgroundColor});this.addChild(t);const e=new H({text:this.text,fontSize:this.fontSize,fontColor:this.fontColor});t.addChild(e),this.needsInitialization=!1}dispose(){d.Dispose([this.backgroundPaint])}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t,this.needsInitialization=!0}get fontColor(){return this._fontColor}set fontColor(t){this._fontColor=t,this.needsInitialization=!0}duplicate(t){const e=new Y(Object.assign(Object.assign(Object.assign(Object.assign({},this.getEntityOptions()),this.getDrawableOptions()),this.getTextOptions()),{size:this.size,cornerRadius:this.cornerRadius,backgroundColor:this.backgroundColor,fontColor:this.fontColor,name:t}));return this.children.length>0&&(e.children=this.children.map((t=>{const n=t.duplicate();return n.parent=e,n}))),e}update(){super.update()}draw(t){super.drawChildren(t)}warmup(t){this.initialize(),this.children.filter((t=>t.isDrawable)).forEach((e=>{e.warmup(t)}))}}!function(t){t.Dismiss="Dismiss",t.Positive="Positive",t.Negative="Negative"}(j||(j={}));const X=i.sinusoidalInOut;class K extends class{constructor(t){var n,i;this.type=e.Game,this.uuid=A.generate(),this.beginTimestamp=NaN,this.beginIso8601Timestamp="",this.gameMetrics=new Array,this.stepCount=0,this.steppingNow=0,this.data={trials:new Array},this.trialIndex=0,this.drawnFrames=0,this.lastFpsUpdate=0,this.nextFpsUpdate=0,this.fpsRate=0,this.animationFramesRequested=0,this.limitFps=!1,this.unitTesting=!1,this.gameStopRequested=!1,this.webGlRendererInfo="",this.canvasCssWidth=0,this.canvasCssHeight=0,this.scenes=new Array,this.freeEntitiesScene=new R({name:F.FREE_ENTITIES_SCENE_NAME,backgroundColor:[255,255,255,0]}),this.incomingSceneTransitions=new Array,this.automaticTrialSchema={session_uuid:{type:"string",format:"uuid",description:"Unique identifier for all activities in this administration of the session."},activity_uuid:{type:"string",format:"uuid",description:"Unique identifier for all trials in this administration of the activity."},activity_id:{type:"string",description:"Identifier of the activity."},activity_version:{type:"string",description:"Version of the activity."}},this.snapshots=new Array,this.options=t,this.name=t.name,this.id=t.id,this.freeEntitiesScene.game=this,this.freeEntitiesScene.needsInitialization=!0,this.fpsMetricReportThreshold=null!==(n=t.fpsMetricReportThreshold)&&void 0!==n?n:F.FPS_METRIC_REPORT_THRESHOLD,this.maximumRecordedActivityMetrics=null!==(i=t.maximumRecordedActivityMetrics)&&void 0!==i?i:F.MAXIMUM_RECORDED_ACTIVITY_METRICS,this.addLocalizationParametersToGameParameters()}addLocalizationParametersToGameParameters(){this.options.parameters=Object.assign(Object.assign({},this.options.parameters),U.makeLocalizationParameters())}init(){if(this.isLocalizationRequested()){const t=this.getLocalizationOptionsFromGameParameters();this.i18n=new U(t)}}getLocalizationOptionsFromGameParameters(){return{locale:this.getParameter("locale"),fallbackLocale:this.getParameterOrFallback("fallback_locale",void 0),missingTranslationFontColor:this.getParameterOrFallback("missing_translation_font_color",void 0),additionalTranslations:this.getParameterOrFallback("translations",void 0),translations:this.options.translations}}isLocalizationRequested(){const t=this.getParameterOrFallback("locale",void 0);if(""===t)throw new Error("Empty string in locale. Leave locale undefined or null to prevent localization.");return null!=t}setParameters(t){const{parameters:e}=this.options;Object.keys(t).forEach((n=>{e&&n in e?this.options.parameters&&this.options.parameters[n]&&(this.options.parameters[n].default=t[n]):console.warn(`game ${this.options.name} does not have a parameter named ${n}. attempt to set parameter ${n} to value ${t[n]} will be ignored`)}))}get canvasKit(){if(!this._canvasKit)throw new Error("canvaskit is undefined");return this._canvasKit}set canvasKit(t){this._canvasKit=t}get session(){if(!this._session)throw new Error("session is undefined");return this._session}set session(t){this._session=t}addFreeEntity(t){this.freeEntitiesScene.addChild(t)}removeFreeEntity(t){if("string"==typeof t){if(!this.freeEntitiesScene.children.map((t=>t.name)).includes(t))throw new Error(`cannot remove free entity named "${t}" because it is not currently part of the game's free entities. `);this.freeEntitiesScene.children=this.freeEntitiesScene.children.filter((e=>e.name!==t))}else{if(!this.freeEntitiesScene.children.includes(t))throw new Error(`cannot remove free entity "${t.toString()}" because it is not currently part of the game's free entities. `);this.freeEntitiesScene.children=this.freeEntitiesScene.children.filter((e=>e!==t))}}removeAllFreeEntities(){for(;this.freeEntitiesScene.children.length;)this.freeEntitiesScene.children.pop()}get freeEntities(){return this.freeEntitiesScene.children}addScene(t){t.game=this,t.needsInitialization=!0,this.scenes.push(t)}addScenes(t){t.forEach((t=>{this.addScene(t)}))}removeScene(t){if(t instanceof R){if(!this.scenes.includes(t))throw new Error(`cannot remove scene ${t} from game because the scene is not currently added to the game`);this.scenes=this.scenes.filter((e=>e!==t))}else{if(!this.scenes.map((t=>t.name)).includes(t))throw new Error(`cannot remove scene named "${t}" from game because the scene is not currently added to the game`);this.scenes=this.scenes.filter((e=>e.name!==t))}}presentScene(t,e=I.none()){let n;if("string"==typeof t){if(n=this.scenes.filter((e=>e.name===t)).find(Boolean),void 0===n)throw new Error(`scene ${t} not found`)}else{if(!this.scenes.some((e=>e===t)))throw new Error(`scene ${t} exists, but it has not been added to the game object`);n=t}n.initialize(),n.needsInitialization=!1;const i=new L(n,e);this.incomingSceneTransitions.push(i),void 0!==n.game.bodyBackgroundColor?document.body.style.backgroundColor=`rgb(${n.game.bodyBackgroundColor[0]},${n.game.bodyBackgroundColor[1]},${n.game.bodyBackgroundColor[2]},${n.game.bodyBackgroundColor[3]})`:document.body.style.backgroundColor=`rgb(${n.backgroundColor[0]},${n.backgroundColor[1]},${n.backgroundColor[2]},${n.backgroundColor[3]})`}getParameter(t){if(void 0!==this.options.parameters&&Object.keys(this.options.parameters).includes(t))return this.options.parameters[t].default;throw new Error(`game parameter ${t} not found`)}getParameterOrFallback(t,e){return void 0!==this.options.parameters&&Object.keys(this.options.parameters).includes(t)?this.options.parameters[t].default:e}hasParameter(t){return!(void 0===this.options.parameters||!Object.keys(this.options.parameters).includes(t))}start(t){var e,i,r;const o=this.options;let a;if(this.unitTesting=null!==(e=o._unitTesting)&&void 0!==e&&e,this.setupHtmlCanvases(o.canvasId,o.width,o.height,o.stretch),this.showFps=null!==(i=o.showFps)&&void 0!==i&&i,this.bodyBackgroundColor=o.bodyBackgroundColor,this.initData(),this.setupCanvasKitSurface(),this.setupFpsFont(),this.setupCanvasDomEventHandlers(),void 0!==t){if(t instanceof R){if(a=t,!this.scenes.includes(a))throw new Error(`cannot start game. scene named "${t}" has not been added to the game object`)}else if(a=this.scenes.filter((e=>e.name===t)).find(Boolean),void 0===a)throw new Error(`cannot start game. scene named "${t}" has not been added to the game object`)}else if(a=this.scenes.find(Boolean),void 0===a)throw new Error("cannot start game. no scenes have been added to the game object");if(this.presentScene(a),void 0===this.surface)throw new Error("CanvasKit surface is undefined");this.warmupShaders(this.surface),this.beginTimestamp=T.now(),this.beginIso8601Timestamp=(new Date).toISOString(),this.options.timeStepping?(this.addTimeSteppingControlsToDom(),this.updateTimeSteppingOutput()):this.removeTimeSteppingControlsFromDom(),this.surface.requestAnimationFrame(this.loop.bind(this)),(null===(r=this.session.options.activityCallbacks)||void 0===r?void 0:r.onActivityLifecycle)&&this.session.options.activityCallbacks.onActivityLifecycle({type:n.ActivityStart,target:this})}addTimeSteppingControlsToDom(){if(document.getElementById("m2c2kit-time-stepping-div"))return;const t=document.getElementsByTagName("body")[0];if(t){const e=document.createElement("div");e.id="m2c2kit-time-stepping-div",t.prepend(e);const n=document.createElement("button");n.id="1-step-advance",n.title="advance 1 step (16.667 ms)",n.innerText=">",n.style.marginRight="4px",e.appendChild(n),n.addEventListener("click",this.advanceStepsHandler.bind(this));const i=document.createElement("button");i.id="55-step-advance",i.title="advance 55 steps (916.667 ms)",i.innerText=">>",i.style.marginRight="4px",e.appendChild(i),i.addEventListener("click",this.advanceStepsHandler.bind(this));const r=document.createElement("input");r.id="time-stepping-steps-input",r.title="steps",r.style.width="40px",r.style.marginRight="4px",r.setAttribute("readonly","true"),e.appendChild(r);const o=document.createElement("input");o.id="time-stepping-now-input",o.title="milliseconds",o.style.width="80px",o.style.marginRight="4px",o.setAttribute("readonly","true"),e.appendChild(o)}}updateTimeSteppingOutput(){const t=document.getElementById("time-stepping-steps-input");t&&(t.value=this.stepCount.toString());const e=document.getElementById("time-stepping-now-input");e&&(e.value=this.steppingNow.toFixed(2))}advanceStepsHandler(t){var e,n;"1-step-advance"===(null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.id)?(this.steppingNow=this.steppingNow+16.66666666666667,this.stepCount=this.stepCount+1):"55-step-advance"===(null===(n=null==t?void 0:t.target)||void 0===n?void 0:n.id)&&(this.steppingNow=this.steppingNow+916.666666666667,this.stepCount=this.stepCount+55),this.updateTimeSteppingOutput()}removeTimeSteppingControlsFromDom(){const t=document.getElementById("m2c2kit-time-stepping-div");t&&t.remove()}warmupShaders(t){const e=t.getCanvas(),n=new this.canvasKit.Paint;n.setColor(this.canvasKit.Color(255,255,255,1)),[...this.scenes,this.freeEntitiesScene].forEach((t=>t.children.forEach((t=>{t.isDrawable&&t.warmup(e)}))));const i=this.entities.filter((t=>t.type===y.Sprite)).map((t=>t.imageName)),r=this.session.imageManager.loadedImages[this.uuid];r&&Object.keys(r).forEach((t=>{if(!i.includes(t)){const n=r[t].image;e.drawImage(n,0,0)}}));const o=this.canvasKit.RRectXY(this.canvasKit.LTRBRect(0,0,t.width(),t.height()),0,0);e.drawRRect(o,n)}stop(){this.currentScene&&(this.currentScene._active=!1),this.gameStopRequested=!0,this.dispose()}dispose(){this.entities.filter((t=>t.isDrawable)).forEach((t=>t.dispose()))}initData(){var t;this.trialIndex=0,this.data={trials:new Array};const e=null!==(t=this.options.trialSchema)&&void 0!==t?t:{},n=Object.entries(e);for(const[t,e]of n)if(void 0!==e.type&&!this.propertySchemaDataTypeIsValid(e.type))throw new Error(`invalid schema. variable ${t} is type ${e.type}. type must be number, string, boolean, object, or array`)}propertySchemaDataTypeIsValid(t){const e=["string","number","integer","object","array","boolean","null"];if("string"==typeof t)return e.includes(t);let n=!0;if(!Array.isArray(t))throw new Error(`Invalid data type: ${t}`);return t.forEach((t=>{e.includes(t)||(n=!1)})),n}getDeviceMetadata(){const t=window.screen;return t.orientation?{userAgent:navigator.userAgent,devicePixelRatio:window.devicePixelRatio,screen:{availHeight:t.availHeight,availWidth:t.availWidth,colorDepth:t.colorDepth,height:t.height,orientation:{type:t.orientation.type,angle:t.orientation.angle},pixelDepth:t.pixelDepth,width:t.width},webGlRenderer:this.webGlRendererInfo}:{userAgent:navigator.userAgent,devicePixelRatio:window.devicePixelRatio,screen:{availHeight:t.availHeight,availWidth:t.availWidth,colorDepth:t.colorDepth,height:t.height,pixelDepth:t.pixelDepth,width:t.width},webGlRenderer:this.webGlRendererInfo}}addTrialData(t,e){if(!this.options.trialSchema)throw new Error("no trial schema were provided in GameOptions. cannot add trial data");if(this.data.trials.length<this.trialIndex+1){const t={},e=Object.entries(this.options.trialSchema);for(const[n]of e)t[n]=null;this.data.trials.push(Object.assign(Object.assign({session_uuid:this.session.uuid,activity_uuid:this.uuid,activity_id:this.options.id,activity_version:this.options.version},t),{device_metadata:this.getDeviceMetadata()}))}if(!(t in this.options.trialSchema))throw new Error(`trial variable ${t} not defined in schema`);let n;n=Array.isArray(this.options.trialSchema[t].type)?this.options.trialSchema[t].type:[this.options.trialSchema[t].type];let i=typeof e;if("object"===i&&"[object Array]"===Object.prototype.toString.call(e)&&(i="array"),null==e&&(i="null"),!(n.includes(i)||"number"===i&&Number.isInteger(e)&&n.includes("integer")))throw new Error(`type for variable ${t} (value: ${e}) is "${i}". Based on schema for this variable, expected type was "${n}"`);this.data.trials[this.trialIndex][t]=e}trialComplete(){var t,e,i;this.trialIndex++,(null===(t=this.session.options.activityCallbacks)||void 0===t?void 0:t.onActivityResults)&&this.session.options.activityCallbacks.onActivityResults({type:n.ActivityData,target:this,newData:this.data.trials[this.trialIndex-1],newDataSchema:this.makeNewGameDataSchema(),data:this.data,dataSchema:this.makeGameDataSchema(),activityConfiguration:this.makeGameActivityConfiguration(null!==(e=this.options.parameters)&&void 0!==e?e:{}),activityConfigurationSchema:this.makeGameActivityConfigurationSchema(null!==(i=this.options.parameters)&&void 0!==i?i:{}),activityMetrics:this.gameMetrics})}makeNewGameDataSchema(){return{description:`A single trial and metadata from the assessment ${this.name}.`,$comment:`Activity identifier: ${this.options.id}, version: ${this.options.version}.`,$schema:"https://json-schema.org/draft/2019-09/schema",type:"object",properties:Object.assign(Object.assign(Object.assign({},this.automaticTrialSchema),this.options.trialSchema),{device_metadata:G})}}makeGameDataSchema(){return{description:`All trials and metadata from the assessment ${this.name}.`,$comment:`Activity identifier: ${this.options.id}, version: ${this.options.version}.`,$schema:"https://json-schema.org/draft/2019-09/schema",type:"object",required:["trials"],properties:{trials:{type:"array",items:{$ref:"#/$defs/trial"},description:"All trials from the assessment."}},$defs:{trial:{type:"object",properties:Object.assign(Object.assign(Object.assign({},this.automaticTrialSchema),this.options.trialSchema),{device_metadata:G})}}}}makeGameActivityConfiguration(t){const e=u(JSON.parse(JSON.stringify(t)),["locale","fallback_locale","missing_translation_font_color","translations"]);for(const t in e)for(const n in e[t])"default"==n&&(e[t]=e[t][n]);return e}makeGameActivityConfigurationSchema(t){const e=u(JSON.parse(JSON.stringify(t)),["locale","fallback_locale","missing_translation_font_color","translations"]);for(const t in e){if(!("type"in e[t])&&"value"in e[t]){const n=typeof e[t].default;"bigint"!==n&&"function"!==n&&"symbol"!==n&&"undefined"!==n&&(e[t].type=n)}for(const n in e[t])"default"==n&&delete e[t][n]}return{description:`activity configuration from the assessment ${this.name}`,type:"object",properties:e}}end(){var t,e,i;(null===(t=this.session.options.activityCallbacks)||void 0===t?void 0:t.onActivityLifecycle)&&this.session.options.activityCallbacks.onActivityLifecycle({type:n.ActivityEnd,target:this,results:{data:this.data,dataSchema:this.makeGameDataSchema(),activityConfiguration:this.makeGameActivityConfiguration(null!==(e=this.options.parameters)&&void 0!==e?e:{}),activityConfigurationSchema:this.makeGameActivityConfigurationSchema(null!==(i=this.options.parameters)&&void 0!==i?i:{}),activityMetrics:this.gameMetrics}})}cancel(){var t,e,i;(null===(t=this.session.options.activityCallbacks)||void 0===t?void 0:t.onActivityLifecycle)&&this.session.options.activityCallbacks.onActivityLifecycle({type:n.ActivityCancel,target:this,results:{data:this.data,dataSchema:this.makeGameDataSchema(),activityConfiguration:this.makeGameActivityConfiguration(null!==(e=this.options.parameters)&&void 0!==e?e:{}),activityConfigurationSchema:this.makeGameActivityConfigurationSchema(null!==(i=this.options.parameters)&&void 0!==i?i:{}),activityMetrics:this.gameMetrics}})}setupHtmlCanvases(t,e,n,i){let r;if(Globals.canvasScale=Math.round(100*window.devicePixelRatio)/100,void 0===t){const t=document.getElementsByTagName("canvas");let e=new Array;for(let n=0;n<t.length;n++)e.push(t[n]);if(e=e.filter((t=>"m2c2kitscratchcanvas"!==t.id)),0===e.length)throw new Error("no html canvas tag was found in the html");e.length>1&&console.warn("warning: more than one html canvas was found.");const n=e.filter((t=>"m2c2kit-canvas"===t.id))[0];n?(r=n,e.length>1&&console.log("using canvas with id 'm2c2kit-canvas'")):(r=t[0],e.length>1&&console.log("using first canvas"))}else if(r=document.getElementById(t),void 0===r)throw new Error(`could not find canvas HTML element with id "${t}"`);if(i||window.innerWidth<e||window.innerHeight<n){const t=n/e,i=window.innerHeight/window.innerWidth;Globals.rootScale=i<t?window.innerHeight/n:window.innerWidth/e}r.style.width=Globals.rootScale*e+"px",r.style.height=Globals.rootScale*n+"px",r.width=Globals.rootScale*e*Globals.canvasScale,r.height=Globals.rootScale*n*Globals.canvasScale,this.htmlCanvas=r,this.canvasCssWidth=e,this.canvasCssHeight=n,Globals.canvasCssWidth=e,Globals.canvasCssHeight=n}setupCanvasKitSurface(){if(void 0===this.htmlCanvas)throw new Error("main html canvas is undefined");try{this.webGlRendererInfo=N.getRendererString()}catch(t){this.webGlRendererInfo="err",N.dispose()}const t=this.canvasKit.MakeWebGLCanvasSurface(this.htmlCanvas);if(null===t)throw new Error("could not make CanvasKit surface from canvas HTML element");this.surface=t,console.log("⚪ CanvasKit surface is backed by "+(this.surface.reportBackendTypeIsGPU()?"GPU":"CPU")),this.surface.getCanvas().scale(Globals.canvasScale,Globals.canvasScale)}setupFpsFont(){this.fpsTextFont=new this.canvasKit.Font(null,F.FPS_DISPLAY_TEXT_FONT_SIZE*Globals.canvasScale),this.fpsTextPaint=new this.canvasKit.Paint,this.fpsTextPaint.setColor(this.canvasKit.Color(F.FPS_DISPLAY_TEXT_COLOR[0],F.FPS_DISPLAY_TEXT_COLOR[1],F.FPS_DISPLAY_TEXT_COLOR[2],F.FPS_DISPLAY_TEXT_COLOR[3])),this.fpsTextPaint.setAntiAlias(!0)}setupCanvasDomEventHandlers(){if(void 0===this.htmlCanvas)throw new Error("main html canvas is undefined");this.htmlCanvas.addEventListener("pointerdown",this.htmlCanvasPointerDownHandler.bind(this)),this.htmlCanvas.addEventListener("pointerup",this.htmlCanvasPointerUpHandler.bind(this)),this.htmlCanvas.addEventListener("pointermove",this.htmlCanvasPointerMoveHandler.bind(this)),this.htmlCanvas.addEventListener("touchstart",(t=>{t.preventDefault()}))}loop(t){var e;if(this.gameStopRequested){if(void 0===this.surface)throw new Error("CanvasKit surface is undefined");this.surface.deleteLater()}else{if(this.animationFramesRequested++,!this.limitFps||this.animationFramesRequested%Math.round(60/F.LIMITED_FPS_RATE)==0){if(void 0===this.currentScene&&0===this.incomingSceneTransitions.length)throw new Error("Can not run game without a current or incoming scene");for(this.updateGameTime(),this.handleIncomingSceneTransitions(this.incomingSceneTransitions),this.update(),this.draw(t);this.snapshots.length>0;)null===(e=this.snapshots.shift())||void 0===e||e.delete();this.snapshots.push(this.takeCurrentSceneSnapshot()),this.freeEntitiesScene.draw(t),this.pendingScreenshot&&(this.handlePendingScreenshot(this.pendingScreenshot),this.pendingScreenshot=void 0)}if(this.priorUpdateTime=Globals.now,void 0===this.surface)throw new Error("CanvasKit surface is undefined");this.surface.requestAnimationFrame(this.loop.bind(this))}}updateGameTime(){this.options.timeStepping?Globals.now=this.steppingNow:Globals.now=performance.now(),this.priorUpdateTime?Globals.deltaTime=Globals.now-this.priorUpdateTime:Globals.deltaTime=0}handleIncomingSceneTransitions(t){if(0!==t.length&&(this.snapshots.length>0||t[0].transition.type===b.None)){const e=t.shift();if(void 0===e)throw new Error("no incoming scene transition");const n=e.scene,i=e.transition;if(i.type===b.None)return this.currentScene&&(this.currentScene._active=!1),this.currentScene=n,this.currentScene._active=!0,n._setupCallback&&n._setupCallback(n),void(n._appearCallback&&n._appearCallback(n));if(this.currentSceneSnapshot=this.snapshots.shift(),!this.currentSceneSnapshot)throw new Error("No snapshop available for outgoing scene");const r=this.createOutgoingScene(this.currentSceneSnapshot);r._active=!0,this.currentScene&&(this.currentScene._active=!1),this.currentScene=n,this.currentScene._active=!0,n._setupCallback&&n._setupCallback(n),this.animateSceneTransition(n,i,r)}}createOutgoingScene(t){const e=new R({name:F.OUTGOING_SCENE_NAME});e.size.width=this.canvasCssWidth,e.size.height=this.canvasCssHeight,this.addScene(e);const n=new f(F.OUTGOING_SCENE_IMAGE_NAME,t,this.canvasCssWidth,this.canvasCssHeight);this.session.imageManager.addLoadedImage(n,this.uuid);const i=new O({name:F.OUTGOING_SCENE_SPRITE_NAME,imageName:F.OUTGOING_SCENE_IMAGE_NAME,position:{x:this.canvasCssWidth/Globals.rootScale/2,y:this.canvasCssHeight/Globals.rootScale/2}});return i.scale=1/Globals.rootScale,e.addChild(i),e}update(){this.scenes.filter((t=>t._active)).forEach((t=>t.update())),this.freeEntitiesScene.update()}draw(t){this.scenes.filter((t=>t._active)).forEach((e=>e.draw(t))),this.drawnFrames++,this.calculateFps(),this.showFps&&this.drawFps(t)}calculateFps(){0===this.lastFpsUpdate?(this.lastFpsUpdate=Globals.now,this.nextFpsUpdate=Globals.now+F.FPS_DISPLAY_UPDATE_INTERVAL):Globals.now>=this.nextFpsUpdate&&(this.fpsRate=this.drawnFrames/((Globals.now-this.lastFpsUpdate)/1e3),this.drawnFrames=0,this.lastFpsUpdate=Globals.now,this.nextFpsUpdate=Globals.now+F.FPS_DISPLAY_UPDATE_INTERVAL,this.gameMetrics.length<this.maximumRecordedActivityMetrics&&this.fpsRate<this.fpsMetricReportThreshold&&this.gameMetrics.push({fps:Number.parseFloat(this.fpsRate.toFixed(2)),fps_interval_ms:F.FPS_DISPLAY_UPDATE_INTERVAL,fps_report_threshold:this.fpsMetricReportThreshold,activity_type:e.Game,activity_uuid:this.uuid,iso8601_timestamp:(new Date).toISOString()}))}takeCurrentSceneSnapshot(){if(void 0===this.surface)throw new Error("CanvasKit surface is undefined");return this.surface.makeImageSnapshot()}handlePendingScreenshot(t){if(!this.surface)throw new Error("no surface");let e;if(4==t.rect.length){const n=t.rect[0]*Globals.canvasScale,i=t.rect[1]*Globals.canvasScale,r=[n,i,n+t.rect[2]*Globals.canvasScale,i+t.rect[3]*Globals.canvasScale];e=this.surface.makeImageSnapshot(r)}else e=this.surface.makeImageSnapshot();const n=e.encodeToBytes();t.promiseResolve(n)}takeScreenshot(t,e,n,i){if(!this.surface)throw new Error("no canvaskit surface. unable to take screenshot.");const r=[t,e,n,i].map((t=>t?0:1)).reduce(((t,e)=>t+e));return new Promise(((o,a)=>{switch(r){case 0:if(!(t&&e&&n&&i))return void a("missing values in arguments for takeScreenshot()");this.pendingScreenshot={rect:[t,e,n,i],promiseResolve:o};break;case 4:this.pendingScreenshot={rect:[],promiseResolve:o};break;default:a("Exactly 0 or 4 arguments must be supplied to takeScreenshot()")}}))}animateSceneTransition(t,e,n){const i=e.duration;if(t._transitioning=!0,n._transitioning=!0,e.type!==b.Slide)throw new Error("unknown transition type");switch(e.direction){case w.Left:t.position.x=t.size.width,t.run(r.sequence([r.move({point:{x:0,y:0},duration:i,easing:e.easing,runDuringTransition:!0}),r.custom({callback:()=>{t._transitioning=!1,t._appearCallback&&t._appearCallback(t),this.removeScene(F.OUTGOING_SCENE_NAME)},runDuringTransition:!0})])),n.run(r.sequence([r.move({point:{x:-n.size.width,y:0},duration:i,easing:e.easing,runDuringTransition:!0}),r.custom({callback:()=>{n._active=!1,n._transitioning=!1,this.currentSceneSnapshot&&this.currentSceneSnapshot.delete()},runDuringTransition:!0})]));break;case w.Right:t.position.x=-t.size.width,t.run(r.sequence([r.move({point:{x:0,y:0},duration:i,easing:e.easing,runDuringTransition:!0}),r.custom({callback:()=>{t._transitioning=!1,t._appearCallback&&t._appearCallback(t),this.removeScene(F.OUTGOING_SCENE_NAME)},runDuringTransition:!0})])),n.run(r.sequence([r.move({point:{x:n.size.width,y:0},duration:i,easing:e.easing,runDuringTransition:!0}),r.custom({callback:()=>{n._active=!1,n._transitioning=!1,this.currentSceneSnapshot&&this.currentSceneSnapshot.delete()},runDuringTransition:!0})]));break;case w.Up:t.position.y=t.size.height,t.run(r.sequence([r.move({point:{x:0,y:0},duration:i,easing:e.easing,runDuringTransition:!0}),r.custom({callback:()=>{t._transitioning=!1,t._appearCallback&&t._appearCallback(t),this.removeScene(F.OUTGOING_SCENE_NAME)},runDuringTransition:!0})])),n.run(r.sequence([r.move({point:{x:0,y:-n.size.height},duration:i,easing:e.easing,runDuringTransition:!0}),r.custom({callback:()=>{n._active=!1,n._transitioning=!1,this.currentSceneSnapshot&&this.currentSceneSnapshot.delete()},runDuringTransition:!0})]));break;case w.Down:t.position.y=-t.size.height,t.run(r.sequence([r.move({point:{x:0,y:0},duration:i,easing:e.easing,runDuringTransition:!0}),r.custom({callback:()=>{t._transitioning=!1,t._appearCallback&&t._appearCallback(t),this.removeScene(F.OUTGOING_SCENE_NAME)},runDuringTransition:!0})])),n.run(r.sequence([r.move({point:{x:0,y:n.size.height},duration:i,easing:e.easing,runDuringTransition:!0}),r.custom({callback:()=>{n._active=!1,n._transitioning=!1,this.currentSceneSnapshot&&this.currentSceneSnapshot.delete()},runDuringTransition:!0})]));break;default:throw new Error("unknown transition direction")}}drawFps(t){t.save();const e=Globals.canvasScale;if(t.scale(1/e,1/e),!this.fpsTextFont||!this.fpsTextPaint)throw new Error("fps font or paint is undefined");t.drawText("FPS: "+this.fpsRate.toFixed(2),0,0+F.FPS_DISPLAY_TEXT_FONT_SIZE*e,this.fpsTextPaint,this.fpsTextFont),t.restore()}createEventListener(t,e,i,r=!0){const o=this.entities.filter((t=>t.name===e));o.length>1&&console.warn(`warning: createEventListener() found more than one entity with name ${e}. Event listener will be attached to first entity found. All entities that receive tap events should be uniquely named`);const a=o.filter((t=>t.name===e)).find(Boolean);if(void 0===a)throw new Error(`could not create event listener. entity with name ${e} could not be found in the game entity tree`);if(t!==n.PointerDown)throw new Error(`could not create event listener: event type ${t} is not known`);a.onPointerDown(i,r)}get entities(){function t(e,n){n.push(e),e.children.forEach((e=>t(e,n)))}const e=new Array;return[...this.scenes,this.freeEntitiesScene].forEach((n=>t(n,e))),e}htmlCanvasPointerDownHandler(t){t.preventDefault();const e=this.currentScene;if(!e||!this.sceneCanReceiveUserInteraction(e))return;const i={target:e,type:n.PointerDown,handled:!1};this.processDomPointerDown(this.freeEntitiesScene,i,t),this.processDomPointerDown(e,i,t)}htmlCanvasPointerUpHandler(t){t.preventDefault();const e=this.currentScene;if(!e||!this.sceneCanReceiveUserInteraction(e))return;const i={target:e,type:n.PointerUp,handled:!1};this.processDomPointerUp(this.freeEntitiesScene,i,t),this.processDomPointerUp(e,i,t)}htmlCanvasPointerMoveHandler(t){t.preventDefault();const e=this.currentScene;if(!e||!this.sceneCanReceiveUserInteraction(e))return;const i={target:e,type:n.PointerMove,handled:!1};this.processDomPointerMove(this.freeEntitiesScene,i,t),this.processDomPointerMove(e,i,t)}processDomPointerDown(t,e,n){e.handled||(t.isUserInteractionEnabled&&this.IsCanvasPointWithinEntityBounds(t,n.offsetX,n.offsetY)&&(t.pressed=!0,t.pressedInHitArea=!0,this.raiseM2PointerDownEvent(t,e,n),this.raiseTapDownEvent(t,e,n)),t.children&&t.children.filter((t=>!t.hidden)).filter((t=>t.isDrawable)).sort(((t,e)=>e.zPosition-t.zPosition)).forEach((t=>this.processDomPointerDown(t,e,n))))}processDomPointerUp(t,e,n){e.handled||(t.isUserInteractionEnabled&&t.pressed&&t.pressedInHitArea?(t.pressed=!1,t.pressedInHitArea=!1,this.raiseTapUpEvent(t,e,n),this.raiseTapUpAny(t,e,n),this.raiseM2PointerUpEvent(t,e,n)):t.isUserInteractionEnabled&&t.pressed&&0==t.pressedInHitArea?(t.pressed=!1,t.pressedInHitArea=!1,this.raiseTapUpAny(t,e,n)):t.isUserInteractionEnabled&&this.IsCanvasPointWithinEntityBounds(t,n.offsetX,n.offsetY)&&(t.pressed=!1,t.pressedInHitArea=!1,this.raiseM2PointerUpEvent(t,e,n)),t.children&&t.children.filter((t=>!t.hidden)).filter((t=>t.isDrawable)).sort(((t,e)=>e.zPosition-t.zPosition)).forEach((t=>this.processDomPointerUp(t,e,n))))}processDomPointerMove(t,e,n){e.handled||(t.isUserInteractionEnabled&&t.pressed&&t.pressedInHitArea&&!this.IsCanvasPointWithinEntityBounds(t,n.offsetX,n.offsetY)&&(t.pressedInHitArea=!1,this.raiseTapLeaveEvent(t,e,n)),this.IsCanvasPointWithinEntityBounds(t,n.offsetX,n.offsetY)&&this.raiseM2PointerMoveEvent(t,e,n),t.children&&t.children.filter((t=>!t.hidden)).filter((t=>t.isDrawable)).sort(((t,e)=>e.zPosition-t.zPosition)).forEach((t=>this.processDomPointerMove(t,e,n))))}raiseM2PointerDownEvent(t,e,i){e.target=t,e.type=n.PointerDown,this.raiseEventOnListeningEntities(t,e,i)}raiseTapDownEvent(t,e,i){e.target=t,e.type=n.TapDown,this.raiseEventOnListeningEntities(t,e,i)}raiseTapLeaveEvent(t,e,i){e.target=t,e.type=n.TapLeave,this.raiseEventOnListeningEntities(t,e,i)}raiseM2PointerUpEvent(t,e,i){e.target=t,e.type=n.PointerUp,this.raiseEventOnListeningEntities(t,e,i)}raiseTapUpEvent(t,e,i){e.target=t,e.type=n.TapUp,this.raiseEventOnListeningEntities(t,e,i)}raiseTapUpAny(t,e,i){e.target=t,e.type=n.TapUpAny,this.raiseEventOnListeningEntities(t,e,i)}raiseM2PointerMoveEvent(t,e,i){e.target=t,e.type=n.PointerMove,this.raiseEventOnListeningEntities(t,e,i)}calculatePointWithinEntityFromDomPointerEvent(t,e){const n=e.offsetX,i=e.offsetY,r=this.calculateEntityAbsoluteBoundingBox(t);return{x:(n-r.xMin)/(r.xMax-r.xMin)*t.size.width,y:(i-r.yMin)/(r.yMax-r.yMin)*t.size.height}}raiseEventOnListeningEntities(t,e,i){t.eventListeners.filter((t=>t.type===e.type)).forEach((r=>{if(r.entityUuid===t.uuid)switch(e.target=t,e.type){case n.PointerDown:case n.PointerMove:case n.PointerUp:case n.TapDown:case n.TapUp:case n.TapUpAny:case n.TapLeave:e.point=this.calculatePointWithinEntityFromDomPointerEvent(t,i),e.buttons=i.buttons,r.callback(e)}}))}sceneCanReceiveUserInteraction(t){var e;return t.game===(null===(e=t.game.session)||void 0===e?void 0:e.currentActivity)&&!1===t._transitioning}IsCanvasPointWithinEntityBounds(t,e,n){if(!t.isDrawable)throw"only drawable entities can receive pointer events";if(0===t.size.width||0===t.size.height)return!1;if(t.type===y.TextLine&&isNaN(t.size.width))return!1;const i=this.calculateEntityAbsoluteBoundingBox(t);return!!(t.isUserInteractionEnabled&&e>=i.xMin&&e<=i.xMax&&n>=i.yMin&&n<=i.yMax)}calculateEntityAbsoluteBoundingBox(t){const e=t.anchorPoint,n=t.absoluteScale;return{xMin:t.absolutePosition.x-t.size.width*e.x*n,xMax:t.absolutePosition.x+t.size.width*(1-e.x)*n,yMin:t.absolutePosition.y-t.size.height*e.y*n,yMax:t.absolutePosition.y+t.size.height*(1-e.y)*n}}}{constructor(){const t={number_of_dots:{type:"integer",default:3,description:"Number of dots to present."},preparation_duration_ms:{type:"number",default:500,description:"How long the 'get ready' message is shown, milliseconds."},blank_grid_duration_ms:{type:"number",default:500,description:"How long a blank grid is shown before the dots appear, milliseconds."},interference_duration_ms:{type:"number",default:8e3,description:"How long the grid of interference targets is shown, milliseconds."},interference_transition_animation:{type:"boolean",default:!0,description:"Should the transitions between dot presentation, interference, and recall be animated slide transitions?"},dot_present_duration_ms:{type:"number",default:3e3,description:"How long the dots are shown, milliseconds."},number_of_interference_targets:{type:"integer",default:5,description:"How many targets to show in the interference phase."},number_of_trials:{type:"integer",default:4,description:"How many trials to run."},show_trials_complete_scene:{default:!0,type:"boolean",description:"After the final trial, should a completion scene be shown? Otherwise, the game will immediately end."},trials_complete_scene_text:{type:"string",default:"You have completed all the grid memory trials",description:"Text for scene displayed after all trials are complete."},trials_complete_scene_button_text:{type:"string",default:"OK",description:"Button text for scene displayed after all trials are complete."},instruction_type:{type:"string",default:"long",description:"Type of intructions to show, 'short' or 'long'."},show_quit_button:{type:"boolean",default:!0,description:"Should the activity quit button be shown?"},show_fps:{type:"boolean",default:!1,description:"Should the FPS be shown?"}},e=200;super({name:"Grid Memory",id:"grid-memory",version:"0.8.1",shortDescription:"A short description of Grid Memory goes here...",longDescription:'Each trial of the dot memory task consisted of 3 phases: encoding,   distraction, and retrieval. During the encoding phase, the participant was   asked to remember the location three red dots appear on a 5 x 5 grid. After   a 3-second study period, the grid was removed and the distraction phase   began, during which the participant wasrequired to locate and touch Fs among   an array of Es. After performing the distraction task for 8 seconds, and   empty 5 x 5 grid reappeared on the screen and participants were then   prompted to recall the locations of the 3 dots presented initially and press   a button labeled "Done" after entering their responses to complete the trial.   Participants completed 2 trials (encoding, distractor, retrieval) with a   1-second delay between trials. The dependent variable was an error score with   partial credit given based on the deviation from the correct positions. If   all dots were recalled in their correct location, the participant received a   score ofzero. In the case of one or more retrieval errors, Euclidean distance   of the location of the incorrect dot to the correct grid location was   calculated, with higher scores indicating less accurate placement and poorer   performance (Siedlecki, 2007). The rationale for our use of this task as an   indicator of working memory has both an empirical and theoreticalbasis.   Previous research (Miyake, Friedman, Rettinger, Shah, & Hegarty, 2001) has   demonstrated that a similar dotmemory task loaded on a factor representing   working memory. The authors of this study reasoned that the spatial dot   memory task placed high demands on controlled attention—a hallmark of working   memory tasks. Indeed, individual differences in working memory capacity arise   "in situations where information needs to be actively maintained or when a   controlled search of memory is required" (Unsworth & Engle, 2007, p. 123).   The ambulatory dot memory task satisfies this requirement by using an   interference task to prevent rehearsal and produce interference with encoded   locations, which creates the demand for active maintenance and controlled   retrieval of previously encoded location during the recall phase.   SOURCE: Sliwinski, Martin J., Jacqueline A. Mogle, Jinshil Hyun, Elizabeth   Munoz, Joshua M. Smyth, and Richard B. Lipton. "Reliability and validity of   ambulatory cognitive assessments." Assessment 25, no. 1 (2018): 14-30.',showFps:t.show_fps.default,width:400,height:800,trialSchema:{activity_begin_iso8601_timestamp:{type:"string",format:"date-time",description:"ISO 8601 timestamp at the beginning of the game activity."},trial_begin_iso8601_timestamp:{type:["string","null"],format:"date-time",description:"ISO 8601 timestamp at the beginning of the trial. Null if trial was skipped."},trial_index:{type:["integer","null"],description:"Index of the trial within this assessment, 0-based."},presented_cells:{type:["array","null"],description:"Randomly chosen locations of the dots presented to the user. Null if trial was skipped.",items:{type:"object",properties:{row:{type:"integer",description:"Row of the cell, 0-indexed."},column:{type:"integer",description:"Column of the cell, 0-indexed."}}}},selected_cells:{type:["array","null"],description:"User selected locations of the dots. Null if trial was skipped.",items:{type:"object",properties:{row:{type:"integer",description:"Row of the cell, 0-indexed."},column:{type:"integer",description:"Column of the cell, 0-indexed."}}}},user_dot_actions:{type:["array","null"],description:"Complete user dot actions: placement, removal, and done. Null if trial was skipped.",items:{type:"object",properties:{elapsed_duration_ms:{type:"number",description:"Duration, milliseconds, from when dot recall scene fully appeared until this user action."},action_type:{type:"string",enum:["placed","removed","done"],description:"Was the action a dot placement, dot removal, or done button push?"},cell:{type:["object","null"],description:"Cell of user action; null if non-applicable (user action was done button push).",properties:{row:{type:"integer",description:"Row of the cell, 0-indexed."},column:{type:"integer",description:"Column of the cell, 0-indexed."},tap_x:{type:"number",description:"X coordinate of user's tap on the cell, relative to the cell."},tap_y:{type:"number",description:"Y coordinate of user's tap on the cell, relative to the cell."}}}}}},user_interference_actions:{type:["array","null"],description:"User actions tapping the interference targets. Null if trial was skipped.",items:{type:"object",properties:{elapsed_duration_ms:{type:"number",description:"Duration, milliseconds, from when interference scene fully appeared until this user action."},action_type:{type:"string",enum:["on-target","off-target"],description:"Was the action on an interference target or off?"},cell:{type:"object",description:"Cell of user interference action.",properties:{row:{type:"integer",description:"Row of the cell, 0-indexed."},column:{type:"integer",description:"Column of the cell, 0-indexed."},tap_x:{type:"number",description:"X coordinate of user's tap on the cell, relative to the cell."},tap_y:{type:"number",description:"Y coordinate of user's tap on the cell, relative to the cell."}}}}}},number_of_correct_dots:{type:["integer","null"],description:"Number of dots that were correctly placed. Null if trial was skipped."},quit_button_pressed:{type:"boolean",description:"Was the quit button pressed?"}},parameters:t,fontUrls:["assets/grid-memory/fonts/roboto/Roboto-Regular.ttf"],images:[{imageName:"grid",height:e,width:e,url:"assets/grid-memory/img/dotmem1_grid.png"},{imageName:"fs",height:e,width:e,url:"assets/grid-memory/img/dotmem2_fs.png"},{imageName:"circle-x",height:32,width:32,url:"assets/grid-memory/img/circle-x.svg"}]})}init(){super.init();const t=this;let e,n,o,a;const s=t.getParameter("number_of_dots");if(t.getParameter("show_quit_button")){const e=new O({imageName:"circle-x",position:{x:380,y:20},isUserInteractionEnabled:!0});t.addFreeEntity(e),e.onTapDown((e=>{t.removeAllFreeEntities(),e.handled=!0;const n=new R;t.addScene(n),t.presentScene(n),t.addTrialData("quit_button_pressed",!0),t.trialComplete(),t.cancel()}))}const l=class extends class{static Create(t){return new Array}}{static Create(t){const e=new Array;return t.instructionScenes.forEach(((n,i)=>{var r,o,a,s,l,c,h,u,d,f,p,m,g,y,b,S,_,C,T,A,P,E,k,M,F,D,B,L,G,N,U,z,j,$,V;const q=null!==(o=null!==(r=n.nextSceneTransition)&&void 0!==r?r:t.nextSceneTransition)&&void 0!==o?o:I.slide({direction:w.Left,duration:500,easing:X}),K=null!==(s=null!==(a=n.backSceneTransition)&&void 0!==a?a:t.backSceneTransition)&&void 0!==s?s:I.slide({direction:w.Right,duration:500,easing:X}),Q=null!==(c=null!==(l=n.backButtonText)&&void 0!==l?l:t.backButtonText)&&void 0!==c?c:"Back",J=null!==(u=null!==(h=n.nextButtonText)&&void 0!==h?h:t.nextButtonText)&&void 0!==u?u:"Next",Z=null!==(f=null!==(d=n.backButtonWidth)&&void 0!==d?d:t.backButtonWidth)&&void 0!==f?f:125,tt=null!==(m=null!==(p=n.nextButtonWidth)&&void 0!==p?p:t.nextButtonWidth)&&void 0!==m?m:125,et=null!==(y=null!==(g=n.backButtonHeight)&&void 0!==g?g:t.backButtonHeight)&&void 0!==y?y:50,nt=null!==(S=null!==(b=n.nextButtonHeight)&&void 0!==b?b:t.nextButtonHeight)&&void 0!==S?S:50,it=null!==(_=n.backgroundColor)&&void 0!==_?_:t.backgroundColor,rt=null===(C=n.imageAboveText)||void 0===C||C,ot=null!==(T=n.imageMarginTop)&&void 0!==T?T:0,at=null!==(A=n.imageMarginBottom)&&void 0!==A?A:0,st=null!==(P=n.textMarginStart)&&void 0!==P?P:48,lt=null!==(E=n.textMarginEnd)&&void 0!==E?E:48,ct=null!==(k=n.textAlignmentMode)&&void 0!==k?k:W.Left,ht=null!==(M=n.textFontSize)&&void 0!==M?M:16,ut=null!==(F=n.titleFontSize)&&void 0!==F?F:16,dt=null!==(D=n.titleMarginTop)&&void 0!==D?D:48,ft=null!==(L=null!==(B=n.backButtonBackgroundColor)&&void 0!==B?B:t.backButtonBackgroundColor)&&void 0!==L?L:x.Black,pt=null!==(N=null!==(G=n.backButtonFontColor)&&void 0!==G?G:t.backButtonFontColor)&&void 0!==N?N:x.White,mt=null!==(z=null!==(U=n.nextButtonBackgroundColor)&&void 0!==U?U:t.nextButtonBackgroundColor)&&void 0!==z?z:x.Black,gt=null!==($=null!==(j=n.nextButtonFontColor)&&void 0!==j?j:t.nextButtonFontColor)&&void 0!==$?$:x.White,yt=null!==(V=t.sceneNamePrefix)&&void 0!==V?V:"instructions",vt=new R({name:yt+"-"+(i+1).toString().padStart(2,"0"),backgroundColor:it});let bt,wt;if(void 0!==n.title&&(bt=new H({text:n.title,fontSize:ut,layout:{marginTop:dt,constraints:{topToTopOf:vt,startToStartOf:vt,endToEndOf:vt}}}),vt.addChild(bt)),void 0!==n.text&&(wt=new H({text:n.text,preferredMaxLayoutWidth:v.MatchConstraint,horizontalAlignmentMode:ct,fontSize:ht,layout:{marginStart:st,marginEnd:lt,constraints:{topToTopOf:vt,bottomToBottomOf:vt,startToStartOf:vt,endToEndOf:vt,verticalBias:n.textVerticalBias}}}),vt.addChild(wt)),void 0!==n.imageName){let t;t=new O(void 0!==wt?rt?{imageName:n.imageName,layout:{marginBottom:at,constraints:{bottomToTopOf:wt,startToStartOf:vt,endToEndOf:vt}}}:{imageName:n.imageName,layout:{marginTop:ot,constraints:{topToBottomOf:wt,startToStartOf:vt,endToEndOf:vt}}}:{imageName:n.imageName,layout:{constraints:{topToTopOf:vt,bottomToBottomOf:vt,verticalBias:n.imageVerticalBias,startToStartOf:vt,endToEndOf:vt}}}),vt.addChild(t)}if(i>0){const t=new Y({text:Q,fontColor:pt,backgroundColor:ft,size:{width:Z,height:et},layout:{marginStart:32,marginBottom:80,constraints:{bottomToBottomOf:vt,startToStartOf:vt}}});t.isUserInteractionEnabled=!0,t.onTapDown((()=>{vt.game.presentScene(yt+"-"+(i+1-1).toString().padStart(2,"0"),K)})),vt.addChild(t)}const St=new Y({name:"nextButton",text:J,fontColor:gt,backgroundColor:mt,size:{width:tt,height:nt},layout:{marginEnd:32,marginBottom:80,constraints:{bottomToBottomOf:vt,endToEndOf:vt}}});St.isUserInteractionEnabled=!0,i!==t.instructionScenes.length-1?St.onTapDown((()=>{vt.game.presentScene(yt+"-"+(i+1+1).toString().padStart(2,"0"),q)})):void 0!==t.postInstructionsScene?St.onTapDown((()=>{var e;vt.game.presentScene(null!==(e=t.postInstructionsScene)&&void 0!==e?e:"",q)})):St.onTapDown((()=>{const t=vt.game.scenes.indexOf(vt);if(-1===t)console.warn("warning: postInstructionsScene is not defined, and next scene cannot be determined.");else{const e=t+1;e<vt.game.scenes.length?vt.game.presentScene(vt.game.scenes[e],q):console.warn("warning: postInstructionsScene is not defined, and there is no next scene to present.")}})),vt.addChild(St),e.push(vt)})),e}}.Create({instructionScenes:[{title:"Grid Memory",text:`For this activity, try to remember the location of ${s} dots.`,imageName:"grid",imageAboveText:!1,imageMarginTop:12,textFontSize:24,titleFontSize:30,textVerticalBias:.25},{title:"Grid Memory",text:`Before placing the ${s} dots in their location, you will also have to tap some Fs on the screen as quickly as you can.`,imageName:"fs",imageAboveText:!1,imageMarginTop:12,textFontSize:24,titleFontSize:30,textVerticalBias:.25},{title:"Grid Memory",text:"Press START to begin!",textFontSize:24,titleFontSize:30,textAlignmentMode:W.Center,nextButtonText:"START",nextButtonBackgroundColor:x.Green}]});let c,h;t.addScenes(l),l[0].onAppear((()=>{t.addTrialData("activity_begin_iso8601_timestamp",this.beginIso8601Timestamp)})),t.getParameter("interference_transition_animation")&&(c=I.slide({direction:w.Left,duration:500,easing:i.sinusoidalInOut}),h=I.slide({direction:w.Right,duration:500,easing:i.sinusoidalInOut}));const u=new R;t.addScene(u);const d=new H({text:"Get Ready",fontSize:24,position:{x:200,y:400}});u.addChild(d),u.onAppear((()=>{u.run(r.sequence([r.custom({callback:()=>{t.addTrialData("activity_begin_iso8601_timestamp",this.beginIso8601Timestamp),t.addTrialData("trial_begin_iso8601_timestamp",(new Date).toISOString())}}),r.wait({duration:t.getParameter("preparation_duration_ms")}),r.custom({callback:()=>{t.presentScene(f)}})]))}));const f=new R;t.addScene(f);const p=new H({text:"Remember the dot locations!",fontSize:24,position:{x:200,y:150}});f.addChild(p);const m=new q({size:{width:300,height:300},position:{x:200,y:400},rows:5,columns:5,backgroundColor:x.Silver,gridLineColor:x.Black,gridLineWidth:4});f.addChild(m),f.onSetup((()=>{p.hidden=!0})),f.onAppear((()=>{p.hidden=!1,f.run(r.sequence([r.wait({duration:t.getParameter("blank_grid_duration_ms")}),r.custom({callback:()=>{e=$.FromGridWithoutReplacement(s,5,5);for(let t=0;t<s;t++){const n=new V({circleOfRadius:20,fillColor:x.Red,strokeColor:x.Black,lineWidth:2});m.addAtCell(n,e[t].row,e[t].column)}}}),r.wait({duration:t.getParameter("dot_present_duration_ms")}),r.custom({callback:()=>{m.removeAllChildren(),p.hidden=!0,t.presentScene(g,c)}})]))}));const g=new R;t.addScene(g);const y=new H({text:"Touch the F's!",fontSize:24,position:{x:200,y:100}});g.addChild(y);const b=new q({size:{width:300,height:480},position:{x:200,y:400},rows:8,columns:5,backgroundColor:x.Transparent,gridLineColor:x.Transparent});g.addChild(b),g.onSetup((()=>{a=new Array,T.start("interferenceResponseTime"),y.hidden=!0,function e(n=!1){b.removeAllChildren();let i=0;const o=t.getParameter("number_of_interference_targets"),s=$.FromGridWithoutReplacement(o,8,5);for(let t=0;t<8;t++)for(let n=0;n<5;n++){const l=new V({rect:{size:{width:59,height:59}},fillColor:x.Transparent});let c,h=!1;c=new H({text:"E",fontSize:50});for(let e=0;e<o;e++)s[e].row===t&&s[e].column===n&&(c=new H({text:"F",fontSize:50}),h=!0);l.userData={},l.userData.row=t,l.userData.column=n,l.userData.tapStatus=h?0:-1,l.isUserInteractionEnabled=!0,l.onTapDown((t=>{0===l.userData.tapStatus?(i++,c.text="E",c.run(r.sequence([r.scale({scale:1.25,duration:125}),r.scale({scale:1,duration:125})])),l.userData.tapStatus=1,i>=o&&(b.gridChildren.forEach((t=>{t.entity.isUserInteractionEnabled=!1})),e(!0)),T.exists("interferenceResponseTime")&&a.push({elapsed_duration_ms:T.elapsed("interferenceResponseTime"),action_type:"on-target",cell:{row:l.userData.row,column:l.userData.column,tap_x:t.point.x,tap_y:t.point.y}})):T.exists("interferenceResponseTime")&&a.push({elapsed_duration_ms:T.elapsed("interferenceResponseTime"),action_type:"off-target",cell:{row:l.userData.row,column:l.userData.column,tap_x:t.point.x,tap_y:t.point.y}})})),b.addAtCell(c,t,n),b.addAtCell(l,t,n)}n&&(b.position={x:200,y:1040},b.run(r.move({point:{x:200,y:400},duration:500})))}(),g.run(r.sequence([r.wait({duration:t.getParameter("interference_duration_ms")}),r.custom({callback:()=>{T.remove("interferenceResponseTime"),t.presentScene(S,h)}})]),"advanceAfterInterference")})),g.onAppear((()=>{y.hidden=!1}));const S=new R;t.addScene(S);const _=new H({text:"Where were the dots?",fontSize:24,position:{x:200,y:150}});S.addChild(_);const C=new q({size:{width:300,height:300},position:{x:200,y:400},rows:5,columns:5,backgroundColor:x.Silver,gridLineColor:x.Black,gridLineWidth:4});S.addChild(C);let A=0;S.onSetup((()=>{T.start("responseTime"),C.removeAllChildren(),P.hidden=!0,_.hidden=!0,A=0,n=new Array,o=new Array;for(let t=0;t<5;t++)for(let e=0;e<5;e++){const i=new V({rect:{size:{width:59,height:59}},fillColor:x.Transparent});i.userData=0,i.onTapDown((r=>{if(0===i.userData&&A<s){const a=new V({circleOfRadius:20,fillColor:x.Red,strokeColor:x.Black,lineWidth:2});i.addChild(a),i.userData=1,A++,n.push({row:t,column:e}),o.push({elapsed_duration_ms:T.elapsed("responseTime"),action_type:"placed",cell:{row:t,column:e,tap_x:r.point.x,tap_y:r.point.y}})}else 1===i.userData&&(i.removeAllChildren(),i.userData=0,A--,n=n.filter((n=>!(n.row===t&&n.column===e))),o.push({elapsed_duration_ms:T.elapsed("responseTime"),action_type:"removed",cell:{row:t,column:e,tap_x:r.point.x,tap_y:r.point.y}}))})),i.isUserInteractionEnabled=!0,C.addAtCell(i,t,e)}})),S.onAppear((()=>{P.hidden=!1,_.hidden=!1}));const P=new Y({text:"Done",position:{x:200,y:700},size:{width:250,height:50}});S.addChild(P);const E=new H({text:`You must select all ${s} locations!`,position:{x:200,y:600},hidden:!0});S.addChild(E),P.isUserInteractionEnabled=!0,P.onTapDown((()=>{if(o.push({elapsed_duration_ms:T.elapsed("responseTime"),action_type:"done",cell:null}),A<s)E.run(r.sequence([r.custom({callback:()=>{E.hidden=!1}}),r.wait({duration:3e3}),r.custom({callback:()=>{E.hidden=!0}})]));else{T.stop("responseTime"),T.remove("responseTime"),t.addTrialData("presented_cells",e),t.addTrialData("selected_cells",n),t.addTrialData("user_dot_actions",o),t.addTrialData("user_interference_actions",a);const r=(t,e)=>t.row===e.row&&t.column===e.column,s=n.map((t=>e.some((e=>r(e,t)))?1:0)).reduce(((t,e)=>t+e),0);if(t.addTrialData("number_of_correct_dots",s),t.addTrialData("quit_button_pressed",!1),t.addTrialData("trial_index",t.trialIndex),t.trialComplete(),t.trialIndex===t.getParameter("number_of_trials")){const e=I.slide({direction:w.Left,duration:500,easing:i.sinusoidalInOut});t.getParameter("show_trials_complete_scene")?t.presentScene(k,e):t.end()}else t.presentScene(u)}}));const k=new R;t.addScene(k);const M=new H({text:t.getParameter("trials_complete_scene_text"),position:{x:200,y:400}});k.addChild(M);const F=new Y({text:t.getParameter("trials_complete_scene_button_text"),position:{x:200,y:600}});F.isUserInteractionEnabled=!0,F.onTapDown((()=>{F.isUserInteractionEnabled=!1,k.removeAllChildren(),t.end()})),k.addChild(F),k.onSetup((()=>{t.removeAllFreeEntities()}))}}export{K as GridMemory};
